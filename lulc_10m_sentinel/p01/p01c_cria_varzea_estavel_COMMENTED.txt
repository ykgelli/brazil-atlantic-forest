var aflora = /* color: #35f1ff */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.97336023640395, -19.251293094992135],
                  [-42.97484081578017, -19.24827465607152],
                  [-42.97728699040175, -19.25038149177513],
                  [-42.974089797256, -19.252022373918656]]]),
            {
              "reference": 29,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.994000413059325, -19.242564733483082],
                  [-42.9950947543374, -19.242605251219135],
                  [-42.99513766968164, -19.247507823451663],
                  [-42.99288461410913, -19.24586689615941],
                  [-42.9941935321084, -19.24438802170306],
                  [-42.99189756119165, -19.244590608032752]]]),
            {
              "reference": 29,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.935934761438034, -19.269428311940587],
                  [-42.93752262917485, -19.269914444483064],
                  [-42.93859551278081, -19.271210790879802],
                  [-42.935891846093796, -19.27202100217032]]]),
            {
              "reference": 29,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.97799179879155, -19.28542941715748],
                  [-42.97915051308598, -19.28555093855793],
                  [-42.97940800515141, -19.288953501152893],
                  [-42.97747681466069, -19.28761678856656]]]),
            {
              "reference": 29,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.763967990384934, -20.07351903927557],
                  [-43.76499795864665, -20.08093560302923],
                  [-43.7622513766154, -20.078194739909847],
                  [-43.76053476284587, -20.07110051871451]]]),
            {
              "reference": 29,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.86848460233018, -20.146367796232354],
                  [-43.869514570591896, -20.138470834117996],
                  [-43.87414942776963, -20.145239683230432]]]),
            {
              "reference": 29,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.897495375035255, -20.097851583913503],
                  [-43.892517195103615, -20.095594649708346],
                  [-43.89509211575791, -20.09204797309887],
                  [-43.90144358670518, -20.09656191120786]]]),
            {
              "reference": 29,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.472198623177064, -20.08243611440105],
                  [-43.44335951184894, -20.097912881695326],
                  [-43.45915235852863, -20.082758562647374]]]),
            {
              "reference": 29,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.54944624280597, -20.131118281004333],
                  [-43.545326369759096, -20.166572569798305],
                  [-43.54223646497394, -20.143689358935408]]]),
            {
              "reference": 29,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.535370009895814, -20.107907481059076],
                  [-43.54772962903644, -20.100814605309896],
                  [-43.534340041634096, -20.122414634701606]]]),
            {
              "reference": 29,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.71690959706972, -20.079929903847606],
                  [-43.7210294701166, -20.076382872637762],
                  [-43.73167247548769, -20.092827522424965]]]),
            {
              "reference": 29,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.668157766015035, -20.149564420363443],
                  [-43.67536754384707, -20.168579566219975],
                  [-43.66403789296816, -20.156332788668653]]]),
            {
              "reference": 29,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.54593486562441, -20.221474931859714],
                  [-43.548338124901754, -20.20117743019876],
                  [-43.552801320702535, -20.225018668576624]]]),
            {
              "reference": 29,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.586790273339254, -20.222119253632044],
                  [-43.574773976952535, -20.196344301607535],
                  [-43.58061046376894, -20.19569987312977]]]),
            {
              "reference": 29,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.61288280263613, -20.200210816480123],
                  [-43.63142223134707, -20.195055441985822],
                  [-43.615972707421285, -20.206976986496443]]]),
            {
              "reference": 29,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.690130422265035, -20.14091371480931],
                  [-43.68944377675722, -20.157351582367273],
                  [-43.685667226464254, -20.157996169360665]]]),
            {
              "reference": 29,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.63760204091738, -20.12189520021726],
                  [-43.64549846425722, -20.125763560132302],
                  [-43.651678273827535, -20.1463931962521]]]),
            {
              "reference": 29,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.47136050897704, -20.426490013182395],
                  [-43.4469845934497, -20.444827807489148],
                  [-43.455567662297355, -20.433889737213555]]]),
            {
              "reference": 29,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.744988743840324, -20.468309857632264],
                  [-43.725762669621574, -20.48664266016341],
                  [-43.734689061223136, -20.472491215936177]]]),
            {
              "reference": 29,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.643365208684074, -20.503043836565745],
                  [-43.608346287785636, -20.50979675197395],
                  [-43.62448245721923, -20.50400855699148]]]),
            {
              "reference": 29,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.569894139348136, -20.48921550975499],
                  [-43.58809024530517, -20.472491215936177],
                  [-43.57229739862548, -20.49339629826469]]]),
            {
              "reference": 29,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.44217807489501, -20.48406976740578],
                  [-43.424325291691886, -20.48664266016341],
                  [-43.433595006047355, -20.48246168751399]]]),
            {
              "reference": 29,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.47555766338597, -20.33430975916339],
                  [-43.482424118464095, -20.32304189565539],
                  [-43.479677536432845, -20.337528997929187]]]),
            {
              "reference": 29,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.4666336495672, -20.12636982248741],
                  [-43.447750898102356, -20.145710111119843],
                  [-43.45496067593439, -20.136040266015307]]]),
            {
              "reference": 29,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.62868198941095, -20.179695118457477],
                  [-43.61151585171564, -20.19612890003723],
                  [-43.61391911099298, -20.189684486378667]]]),
            {
              "reference": 29,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.47667291362005, -19.302021118839985],
                  [-43.45401361186224, -19.29489242808867],
                  [-43.47598626811224, -19.291003920425062]]]),
            {
              "reference": 29,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.35033014018255, -19.439997135605978],
                  [-43.34415033061224, -19.447766952358954],
                  [-43.337970521041925, -19.44323460445588]]]),
            {
              "reference": 29,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.283038880416925, -19.433522004219547],
                  [-43.27685907084661, -19.43740711403866],
                  [-43.277545716354425, -19.42963680145258]]]),
            {
              "reference": 29,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.497623495115924, -19.2796216403145],
                  [-43.489383749022174, -19.29452812111229],
                  [-43.49007039452999, -19.284158539000384]]]),
            {
              "reference": 29,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.51753621484249, -19.8896647501933],
                  [-43.51616292382686, -19.875459004357698],
                  [-43.5292091884753, -19.88643628345097]]]),
            {
              "reference": 29,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.67409139062374, -19.822499102855193],
                  [-43.676151327147174, -19.816039369927797],
                  [-43.68782430077999, -19.822499102855193]]]),
            {
              "reference": 29,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.854679159178424, -19.91678127162151],
                  [-43.846439413084674, -19.920009119359875],
                  [-43.83957295800655, -19.912262174096487]]]),
            {
              "reference": 29,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.05380635644405, -20.076158002566423],
                  [-44.0620461025378, -20.072933354469594],
                  [-44.071659139647174, -20.081962201989974]]]),
            {
              "reference": 29,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.761295370115924, -19.846397831566087],
                  [-43.758548788084674, -19.83993907029821],
                  [-43.769535116209674, -19.83606368743353]]]),
            {
              "reference": 29,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.58139424706905, -20.021329971633556],
                  [-43.588260702147174, -20.032942211128024],
                  [-43.58345418359249, -20.0348775009654]]]),
            {
              "reference": 29,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.41154866601436, -20.139992365354704],
                  [-44.39094930077999, -20.124519759790346],
                  [-44.41841512109249, -20.13354563251998]]]),
            {
              "reference": 29,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.099124959959674, -20.099373510342172],
                  [-44.09294515038936, -20.090990529379567],
                  [-44.1169777431628, -20.098728681584593]]]),
            {
              "reference": 29,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.9137306728503, -20.12709863374666],
                  [-43.90343099023311, -20.112269527715405],
                  [-43.91991048242061, -20.116138125702943],
                  [-43.937076620115924, -20.11549336601496]]]),
            {
              "reference": 29,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.84663777734249, -20.593169711303233],
                  [-45.843204549803424, -20.588027465640458],
                  [-45.84938435937374, -20.579670946695483]]]),
            {
              "reference": 29,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.02241902734249, -20.516660932200317],
                  [-46.021732381834674, -20.502512259082632],
                  [-46.0285988369128, -20.503798556096466]]]),
            {
              "reference": 29,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.88920979882686, -20.523734778550047],
                  [-45.8857765712878, -20.502512259082632],
                  [-45.88920979882686, -20.49736696304893]]]),
            {
              "reference": 29,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.895389608397174, -20.65743313976869],
                  [-45.89058308984249, -20.64394007068342],
                  [-45.89744954492061, -20.636871794728997]]]),
            {
              "reference": 29,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.9407082119128, -20.56809962651615],
                  [-45.93796162988155, -20.584813474061157],
                  [-45.933841756834674, -20.580313772094748]]]),
            {
              "reference": 29,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.84801106835811, -20.60088275465693],
                  [-45.851444295897174, -20.613094275085434],
                  [-45.84457784081905, -20.613094275085434]]]),
            {
              "reference": 29,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.89931111718624, -20.3371334435981],
                  [-43.90205769921749, -20.306225906208212],
                  [-43.90617757226436, -20.312665485625267]]]),
            {
              "reference": 29,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.93844991113155, -20.363528739451052],
                  [-43.937076620115924, -20.32811938307552],
                  [-43.945316366209674, -20.32425605343004]]]),
            {
              "reference": 29,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.91853719140499, -20.425314697272352],
                  [-43.912357381834674, -20.434966514311654],
                  [-43.89656453515499, -20.425314697272352]]]),
            {
              "reference": 29,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.676151327147174, -20.502512259082632],
                  [-43.67546468163936, -20.496080612048686],
                  [-43.70155721093624, -20.490935100097264]]]),
            {
              "reference": 29,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.89931111718624, -20.465204950644097],
                  [-43.904117635740924, -20.4555550324436],
                  [-43.91441731835811, -20.461345056130632]]]),
            {
              "reference": 29,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.9741554775378, -20.23730565608691],
                  [-43.972782186522174, -20.20637822040933],
                  [-43.98239522363155, -20.20766698631509]]]),
            {
              "reference": 29,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.97072224999874, -20.238594165757153],
                  [-43.972782186522174, -20.25663217911457],
                  [-43.959049276365924, -20.275956296577004],
                  [-43.95836263085811, -20.26951519149176],
                  [-43.964542440428424, -20.25663217911457],
                  [-43.9631691494128, -20.247613434278676]]]),
            {
              "reference": 29,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.110111288084674, -21.06166530964657],
                  [-44.1114845791003, -21.05717982685934],
                  [-44.13277058984249, -21.06102453466977]]]),
            {
              "reference": 29,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.187015584959674, -21.10074736208829],
                  [-44.16847615624874, -21.08793470682417],
                  [-44.17122273827999, -21.083450016399297]]]),
            {
              "reference": 29,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.659183553709674, -20.952693976670034],
                  [-45.659183553709674, -20.937944689568546],
                  [-45.6660500087878, -20.942433756875474]]]),
            {
              "reference": 29,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.6660500087878, -21.01488148831536],
                  [-45.65781026269405, -21.015522461809965],
                  [-45.65987019921749, -21.011035589501496],
                  [-45.66948323632686, -21.011035589501496],
                  [-45.6825295009753, -21.01488148831536]]]),
            {
              "reference": 29,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.94002156640499, -20.896254069489096],
                  [-45.9297218837878, -20.886631511265573],
                  [-45.942081502928424, -20.888556072255472]]]),
            {
              "reference": 29,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.97674481441476, -20.89946145180749],
                  [-45.98773114253976, -20.8840653915722],
                  [-46.00009076168038, -20.8840653915722]]]),
            {
              "reference": 29,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.60345379878976, -21.582973137829956],
                  [-44.59796063472726, -21.57914207554891],
                  [-44.62061993648507, -21.564455398343853]]]),
            {
              "reference": 29,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.71194378902413, -21.36124397171062],
                  [-44.70919720699288, -21.35420958204252],
                  [-44.72567669918038, -21.359325535294715]]]),
            {
              "reference": 29,
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.652205629844445, -21.618086485153512],
                  [-44.65907208492257, -21.628299676725774],
                  [-44.63778607418038, -21.621278185039586]]]),
            {
              "reference": 29,
              "system:index": "59"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.783880103608425, -21.430930107963768],
                  [-44.7879999766553, -21.423259867067504],
                  [-44.803106177827175, -21.43987821295483]]]),
            {
              "reference": 29,
              "system:index": "60"
            })]),
    flo = /* color: #0b4a8b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.683446931336675, -19.217362011776732],
                  [-42.685206460450445, -19.217402535730194],
                  [-42.68574290225342, -19.2189627003412],
                  [-42.68514208743409, -19.22076598903715],
                  [-42.68361859271363, -19.219570552674128],
                  [-42.68286757418946, -19.21722017786097]]]),
            {
              "reference": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.69078545520142, -19.21673388922066],
                  [-42.6917725081189, -19.219327412010717],
                  [-42.69052796313599, -19.219854216326798],
                  [-42.689948605988775, -19.217969870029496]]]),
            {
              "reference": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.74373052664407, -19.233090924693926],
                  [-42.7445459181846, -19.22863365550932],
                  [-42.74634836264261, -19.227377494165157],
                  [-42.74553297110208, -19.233658204821754]]]),
            {
              "reference": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.70678041525491, -19.235197955290555],
                  [-42.706694584566435, -19.234103923547448],
                  [-42.708969097811064, -19.22745853712238],
                  [-42.70982740871898, -19.22847154196888],
                  [-42.70853994436868, -19.233617684877608]]]),
            {
              "reference": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.71459100790628, -19.240343858670307],
                  [-42.717680912691435, -19.2406680046642],
                  [-42.718667965608915, -19.23929037976976],
                  [-42.71922586508401, -19.234022883869123],
                  [-42.72274492331155, -19.234671200175953],
                  [-42.71982667990335, -19.2382774129132],
                  [-42.721672039705595, -19.238642081701578],
                  [-42.722144108492216, -19.2415999208313],
                  [-42.717466335970244, -19.24245079618929]]]),
            {
              "reference": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.11505098555733, -20.65487622918385],
                  [-44.1149866125707, -20.655388227756635],
                  [-44.11438579802916, -20.65615120282171],
                  [-44.11397810244745, -20.656181320179915],
                  [-44.114600374675945, -20.654976621266428]]]),
            {
              "reference": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.35153714411513, -20.43266776908041],
                  [-44.3527387737538, -20.434457337009096],
                  [-44.35254565470473, -20.434899698904967],
                  [-44.35138694041029, -20.433090028558677]]]),
            {
              "reference": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.99970656486596, -20.810659801326274],
                  [-44.999363242112054, -20.8088545916807],
                  [-44.999835310898675, -20.808573779348624],
                  [-45.00039321037377, -20.810699916850655]]]),
            {
              "reference": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.968592940293206, -20.80476270312719],
                  [-44.969322503611295, -20.80394030075311],
                  [-44.96996623130883, -20.80367953756992],
                  [-44.96927958580102, -20.80504352255719]]]),
            {
              "reference": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.61581992818603, -20.16884217076555],
                  [-43.61170005513915, -20.161913202669677],
                  [-43.606378552453606, -20.153211272045304],
                  [-43.61976813985595, -20.163202336312548]]]),
            {
              "reference": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.62697791768798, -20.13790114281183],
                  [-43.61393165303954, -20.133871912033797],
                  [-43.58577918721923, -20.147087400451962],
                  [-43.584405896203606, -20.14321956834296],
                  [-43.61650657369384, -20.127747282298927]]]),
            {
              "reference": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.33194789441683, -20.58826639719738],
                  [-45.33641109021761, -20.587945001590224],
                  [-45.33486613782503, -20.592605171607524]]]),
            {
              "reference": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.12444363492595, -19.39860269356792],
                  [-43.124615296302906, -19.396659686478337],
                  [-43.13002262967693, -19.39811694397061]]]),
            {
              "reference": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.17001973050701, -19.394149934651317],
                  [-43.17302380460369, -19.39568817423347],
                  [-43.17096386808025, -19.396335849707803]]]),
            {
              "reference": 3,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.75956343002914, -19.617959805010358],
                  [-42.74728964157699, -19.61650452703046],
                  [-42.74754713364242, -19.611896059852167],
                  [-42.75072286911605, -19.60922793953571],
                  [-42.757160170751796, -19.615534334391537]]]),
            {
              "reference": 3,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.73364256210922, -19.61933422211624],
                  [-42.732698424535975, -19.614159884797296],
                  [-42.73424337692855, -19.606478920790217],
                  [-42.73613165207504, -19.603891566110203],
                  [-42.73759077377914, -19.60753002174103],
                  [-42.735187514501796, -19.619253374376502]]]),
            {
              "reference": 3,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.729179366308436, -19.63364363131138],
                  [-42.727462752538905, -19.63453287456252],
                  [-42.72463033981918, -19.634209513949983],
                  [-42.72754858322738, -19.631460922457403]]]),
            {
              "reference": 3,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.67141531296371, -19.65681421000968],
                  [-42.67562101669906, -19.653015209076408],
                  [-42.67716596909164, -19.65463181621462],
                  [-42.67235945053695, -19.658269122710543]]]),
            {
              "reference": 3,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.661201461035, -19.65228773054963],
                  [-42.663518889623866, -19.65139858564848],
                  [-42.66197393723129, -19.653661853886515]]]),
            {
              "reference": 3,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.681285842138514, -19.66101725513654],
                  [-42.68712232895492, -19.658269122710543],
                  [-42.682487471777186, -19.662552955686813]]]),
            {
              "reference": 3,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.20529369368293, -21.036999838340122],
                  [-45.20417789473274, -21.035357574885715],
                  [-45.204478302142405, -21.03459651982938],
                  [-45.205465355059886, -21.036639343035095],
                  [-45.206495323321604, -21.036879673335378],
                  [-45.20585159315803, -21.03804126432108]]]),
            {
              "reference": 3,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.205980339190745, -21.043809030226704],
                  [-45.20619491591194, -21.042967911610408],
                  [-45.20743946089485, -21.041646144186803],
                  [-45.20666698469856, -21.04384908337565],
                  [-45.20537952437141, -21.04497056717239]]]),
            {
              "reference": 3,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.1946077729676, -21.042887804827767],
                  [-45.19310573591926, -21.045731569224284],
                  [-45.193749466082835, -21.043328391599097]]]),
            {
              "reference": 3,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.19332031264045, -21.0356780179569],
                  [-45.19336322798469, -21.038001209610282],
                  [-45.19284824385383, -21.036999838340122]]]),
            {
              "reference": 3,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.21709541334846, -21.04601193742094],
                  [-45.21808246626594, -21.044930514325074],
                  [-45.21812538161018, -21.04641246250041]]]),
            {
              "reference": 3,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.47177697222503, -21.491105289616097],
                  [-44.471176157405694, -21.49214350833042],
                  [-44.46954537432464, -21.49322165069336],
                  [-44.46770001452239, -21.4939803386785],
                  [-44.46808625262054, -21.493301512772813],
                  [-44.470146189143975, -21.492383096212535],
                  [-44.471648226192315, -21.490306654795386]]]),
            {
              "reference": 3,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.4799308876303, -21.49134487920763],
                  [-44.47851468127044, -21.493461236800243],
                  [-44.475124369075616, -21.49477895333633],
                  [-44.47602559130462, -21.493940407830536],
                  [-44.47821427386077, -21.49278240847278],
                  [-44.48057462203351, -21.489188559099613]]]),
            {
              "reference": 3,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.49074555437835, -21.48994726769615],
                  [-44.487612734248955, -21.490306654795386],
                  [-44.4859819511679, -21.488589575089545],
                  [-44.48756981890472, -21.48962781175174],
                  [-44.49229050677093, -21.489587879709386]]]),
            {
              "reference": 3,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.49924279253753, -21.50342367641715],
                  [-44.49971486132415, -21.50258518074374],
                  [-44.499843607356866, -21.503224035028644],
                  [-44.4989853004721, -21.504302095270667]]]),
            {
              "reference": 3,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.485311364793496, -20.717374299703827],
                  [-43.48698506321879, -20.716410929422107],
                  [-43.487371301316934, -20.716972896164275],
                  [-43.48522553410502, -20.717896122715146]]]),
            {
              "reference": 3,
              "system:index": "29"
            })]),
    agro = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.65467149563108, -20.02837283934828],
                  [-43.65415651150022, -20.02837283934828],
                  [-43.653963392451146, -20.027485797750344],
                  [-43.65460712261472, -20.026901153960182],
                  [-43.65490753002439, -20.027888999097257]]]),
            {
              "reference": 21,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.62469512768064, -20.023514209218174],
                  [-43.626282995417455, -20.022163443045393],
                  [-43.62761337108884, -20.02294971133361],
                  [-43.62691600089647, -20.024209749173068],
                  [-43.625789468958715, -20.024381112737352]]]),
            {
              "reference": 21,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.61165959201122, -20.109526010184254],
                  [-43.61141282863889, -20.110180870738134],
                  [-43.61046869106565, -20.11012042232868],
                  [-43.610275572016576, -20.110624158360576],
                  [-43.61126262493406, -20.110886100456295],
                  [-43.612292593195775, -20.111309236761553],
                  [-43.61222822017942, -20.112598787967602],
                  [-43.61085492916379, -20.11227640116247],
                  [-43.60965329952512, -20.11189356596861],
                  [-43.609267061426976, -20.11030176748697],
                  [-43.60870916195188, -20.109918927461884],
                  [-43.60740024395261, -20.110180870738134],
                  [-43.60701400573288, -20.10915324209169],
                  [-43.605812376563904, -20.109102868982088],
                  [-43.60600549715463, -20.1076873549513],
                  [-43.60746461696897, -20.108165911173327],
                  [-43.60840875454221, -20.1078032156964],
                  [-43.609052484705785, -20.109173394198784],
                  [-43.61025411434446, -20.10965698374715],
                  [-43.61147720165525, -20.108790551413154]]]),
            {
              "reference": 21,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.11526173045735, -20.247620891432003],
                  [-44.11223619868855, -20.24546678347855],
                  [-44.113351997638745, -20.243977009103435],
                  [-44.1145321696053, -20.24272880876316],
                  [-44.116999801899, -20.245527179435673]]]),
            {
              "reference": 21,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.10453289439778, -20.251405606882106],
                  [-44.105627235675854, -20.25221085358898],
                  [-44.10564869334797, -20.25291544103224],
                  [-44.105069336200756, -20.25307648914183],
                  [-44.103824791217846, -20.25198941116084]]]),
            {
              "reference": 21,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.884620794370335, -20.646569707296596],
                  [-43.886895307614964, -20.647613838523363],
                  [-43.88869775207297, -20.64781463216804],
                  [-43.88867629440085, -20.648798517193935],
                  [-43.88670218856589, -20.648858754845826],
                  [-43.88341916473166, -20.647453203416692]]]),
            {
              "reference": 21,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.889062532499, -20.647553600378238],
                  [-43.88747466476218, -20.646168116454113],
                  [-43.889963754728, -20.64642915062237]]]),
            {
              "reference": 21,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.89770997436301, -20.65428004577779],
                  [-43.897624143674534, -20.652974937852797],
                  [-43.899598249509495, -20.65337651071555],
                  [-43.89955533416526, -20.654159574746483]]]),
            {
              "reference": 21,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.86301291854636, -20.65052532041712],
                  [-43.86200440795676, -20.649220180256],
                  [-43.862862714841526, -20.648196139362394],
                  [-43.86432183654563, -20.650063502871742]]]),
            {
              "reference": 21,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.85473025710837, -20.65757288365827],
                  [-43.85376466186301, -20.657432337157534],
                  [-43.85333550842063, -20.656990618737645],
                  [-43.85355008514182, -20.656287882241813],
                  [-43.85479463012473, -20.656408351586155],
                  [-43.85558856399314, -20.65717132188278]]]),
            {
              "reference": 21,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.91041291625754, -20.67831210623702],
                  [-43.90942586206029, -20.67851286138384],
                  [-43.90865338714377, -20.67787044853519],
                  [-43.90847099771463, -20.676796410637895],
                  [-43.9090181675698, -20.676565543273362],
                  [-43.90994084747092, -20.676164031705508],
                  [-43.910799154355686, -20.676284485287365]]]),
            {
              "reference": 21,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.93855219932641, -20.814992216274536],
                  [-44.94069796653832, -20.815513702269435],
                  [-44.938423453293694, -20.816155528709118]]]),
            {
              "reference": 21,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.376244448877486, -21.583260748282353],
                  [-45.374356173731, -21.586932080591616],
                  [-45.37246789858452, -21.583579998264707]]]),
            {
              "reference": 21,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.38379033714968, -21.571524445448215],
                  [-45.38327535301882, -21.575435526080877],
                  [-45.38104375511843, -21.57104553036162],
                  [-45.38602193505007, -21.570087695440694]]]),
            {
              "reference": 21,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.37941297203737, -21.57040697445104],
                  [-45.37692388207155, -21.57272172624062],
                  [-45.37426313072878, -21.57040697445104],
                  [-45.37829717308718, -21.56889039288776]]]),
            {
              "reference": 21,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.503292894029336, -20.721127828240753],
                  [-43.50140461888285, -20.720606016362375],
                  [-43.50320706334086, -20.72016448183039]]]),
            {
              "reference": 21,
              "system:index": "15"
            })]),
    sav = /* color: #d633d5 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.36847333419223, -20.11031815863876],
                  [-45.367142958520844, -20.112937564985828],
                  [-45.36697129714389, -20.11088234217257]]]),
            {
              "reference": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.40971498000522, -20.114871867678072],
                  [-45.40653924453159, -20.116725551982768],
                  [-45.40817002761264, -20.11507335616651]]]),
            {
              "reference": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.4046509693851, -20.11261517887875],
                  [-45.40400723922153, -20.114750974460456],
                  [-45.40392140853305, -20.113259950428624]]]),
            {
              "reference": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.38778523909946, -20.117571791862403],
                  [-45.38993100631137, -20.120755224687503],
                  [-45.388128561853364, -20.119183664681984]]]),
            {
              "reference": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.411603255151704, -20.12361622928039],
                  [-45.41168908584018, -20.125308629891734],
                  [-45.41100244033237, -20.125268334851963]]]),
            {
              "reference": 4,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.50889234053989, -20.166162453202865],
                  [-45.51039437758823, -20.164269070419543],
                  [-45.51000813949008, -20.166444444417408]]]),
            {
              "reference": 4,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.38269525623659, -20.187794618979716],
                  [-45.376730023387466, -20.19299051134048],
                  [-45.37681585407594, -20.18976827292051]]]),
            {
              "reference": 4,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.416984616282974, -20.19846816369403],
                  [-45.41737085438112, -20.20136801930076],
                  [-45.41642671680788, -20.199676443425933]]]),
            {
              "reference": 4,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.32922273731569, -20.204227546252124],
                  [-45.32862192249635, -20.206966198883524],
                  [-45.327291546824966, -20.206603732919177]]]),
            {
              "reference": 4,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.3561732081783, -19.988871172164068],
                  [-44.35891979020955, -19.991613593898965],
                  [-44.350250890673415, -19.98725796060341],
                  [-44.350765874804274, -19.986370687203]]]),
            {
              "reference": 4,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.38578479570271, -19.953457381550674],
                  [-44.38956134599568, -19.95781394876942],
                  [-44.382952382982985, -19.958136652667406]]]),
            {
              "reference": 4,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.50139426708984, -19.995431045236167],
                  [-44.498819346435546, -19.9980926973128],
                  [-44.49675940991211, -19.99801204185038],
                  [-44.49950599194336, -19.995995641860826]]]),
            {
              "reference": 4,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.3288736440407, -20.149168287062665],
                  [-45.32441044823992, -20.155292077042706],
                  [-45.32578373925554, -20.14949059778645]]]),
            {
              "reference": 4,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.307921031956, -19.31345521360625],
                  [-43.307749370579046, -19.309405142380335],
                  [-43.30963764572553, -19.31288820967406]]]),
            {
              "reference": 4,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.31830654526166, -19.305030952786705],
                  [-43.320538143162054, -19.303491858255516],
                  [-43.318993190769476, -19.306408025091464]]]),
            {
              "reference": 4,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.45484247548622, -19.23572889530238],
                  [-43.45630159719032, -19.238484193301247],
                  [-43.453640845847545, -19.238646268214183]]]),
            {
              "reference": 4,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.50485322552238, -19.198689992329175],
                  [-43.5073423154882, -19.19816312020959],
                  [-43.506269431882245, -19.200067957588832]]]),
            {
              "reference": 4,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.45880840287377, -19.196018615540847],
                  [-43.46009586320092, -19.19383002900504],
                  [-43.46279952988793, -19.195005387749802],
                  [-43.46009586320092, -19.19658602937862]]]),
            {
              "reference": 4,
              "system:index": "17"
            })]),
    sombra = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.73730545315345, -20.48050139499392],
                  [-43.72683410915931, -20.486129672784916],
                  [-43.72237091335853, -20.49127534601229],
                  [-43.72185592922767, -20.48870253098343],
                  [-43.725289156766735, -20.484521614490756],
                  [-43.728550722928844, -20.48259192228226],
                  [-43.735760500760875, -20.479214902502104]]]),
            {
              "reference": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.708294680448375, -20.49722481539893],
                  [-43.69748001370033, -20.500923017814856],
                  [-43.69902496609291, -20.497546401760367],
                  [-43.702801516385875, -20.496099257820248]]]),
            {
              "reference": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.58531947234769, -20.479210729211985],
                  [-43.58360285857816, -20.48467824793754],
                  [-43.581714583431676, -20.484839054361455],
                  [-43.58360285857816, -20.479853976823968]]]),
            {
              "reference": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.555719883257154, -20.182914281415172],
                  [-43.54559186201692, -20.189681202775972],
                  [-43.54662183027864, -20.18710336261935],
                  [-43.55503323774934, -20.17904733729654]]]),
            {
              "reference": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.58576062422395, -20.220289793105966],
                  [-43.577692539507154, -20.225766484821126],
                  [-43.56876614790559, -20.233336888127884],
                  [-43.57322934370637, -20.22721616505174],
                  [-43.578207523638014, -20.222867083818024]]]),
            {
              "reference": 4,
              "system:index": "4"
            })]),
    agua = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.923947926787015, -21.035133973035563],
                  [-45.95553362014639, -21.07326191436747],
                  [-46.00428545120108, -21.066534163969283],
                  [-46.01767503860342, -21.031929499608932],
                  [-46.007375355986234, -21.00436818430959],
                  [-46.02042162063467, -21.033211297249593],
                  [-46.00600206497061, -21.06941752283586],
                  [-45.95484697463858, -21.075184072861774]]]),
            {
              "reference": 33,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.21694706268429, -21.008261985782962],
                  [-45.21900699920773, -21.009904547738376],
                  [-45.219114287568324, -21.010665728853763],
                  [-45.21690414734005, -21.008682643616122]]]),
            {
              "reference": 33,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.2246932823193, -21.016234251495757],
                  [-45.22452162094235, -21.01198777103359],
                  [-45.225100978089564, -21.012989310339027],
                  [-45.22495077438473, -21.01551315956215]]]),
            {
              "reference": 33,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.388695126536795, -21.509458763577662],
                  [-44.387686615947196, -21.5097781759716],
                  [-44.38665664768548, -21.509438800279746],
                  [-44.38633478260369, -21.50911938714018],
                  [-44.389210110667655, -21.509139350481952]]]),
            {
              "reference": 33,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.39513242817254, -21.507342638743246],
                  [-44.394231205943534, -21.502850762264135],
                  [-44.39487493610711, -21.503469651264933],
                  [-44.39551866627068, -21.50766205578619]]]),
            {
              "reference": 33,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.267799728948496, -20.00238268862915],
                  [-44.2697094617671, -20.00508454910361],
                  [-44.27011715753736, -20.00593139134655],
                  [-44.26788555963697, -20.003189219000188],
                  [-44.26741349085035, -20.00280611758926],
                  [-44.26717745645704, -20.001112394914333]]]),
            {
              "reference": 33,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.25802870273235, -20.019195518936606],
                  [-44.25313635348918, -20.017542295431397],
                  [-44.25262136935832, -20.016534223789158],
                  [-44.25378008365276, -20.017481811315076],
                  [-44.258543686863206, -20.018792295293952]]]),
            {
              "reference": 33,
              "system:index": "6"
            })]),
    campo = /* color: #98ff00 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.90383086046619, -21.575651793163694],
                  [-44.895076130241584, -21.577886645649706],
                  [-44.90022597155018, -21.570543429471076]]]),
            {
              "reference": 12,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.93215498766346, -21.572139812469135],
                  [-44.92116865953846, -21.564636659492816],
                  [-44.94502959093494, -21.569585591231817],
                  [-44.94417128405018, -21.574055448854327]]]),
            {
              "reference": 12,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.8628037913744, -21.560326161936885],
                  [-44.86743864855213, -21.564636659492816],
                  [-44.85799727281971, -21.568308463732766]]]),
            {
              "reference": 12,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.82109007677479, -21.563052801682982],
                  [-44.83001646837635, -21.56193526537655],
                  [-44.82400832018299, -21.56576678256489]]]),
            {
              "reference": 12,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.834136341423225, -21.567842145427274],
                  [-44.833106373161506, -21.56576678256489],
                  [-44.84306273302479, -21.561615967706935],
                  [-44.83653960070057, -21.5692789176949]]]),
            {
              "reference": 12,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.67125624692128, -21.58929170204679],
                  [-44.68207091366933, -21.585301184074503],
                  [-44.67177123105214, -21.597910845514903]]]),
            {
              "reference": 12,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.623279504424154, -21.53653546730769],
                  [-44.62945931399447, -21.534938692423772],
                  [-44.62087624514681, -21.541964370544495]]]),
            {
              "reference": 12,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.63066094363314, -21.550586328903957],
                  [-44.63563912356478, -21.553939174347754],
                  [-44.626026086455404, -21.554258488919764]]]),
            {
              "reference": 12,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.61606972659212, -21.57756655350165],
                  [-44.622764520293295, -21.585069036987218],
                  [-44.613494805937826, -21.58379204596461]]]),
            {
              "reference": 12,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.56886284793001, -21.57644912909898],
                  [-44.565257959014, -21.59001727084163],
                  [-44.56336968386751, -21.58522866007334]]]),
            {
              "reference": 12,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.65555184329134, -21.609648918912285],
                  [-44.661731652861654, -21.605658962195754],
                  [-44.65589516604525, -21.614436721690787]]]),
            {
              "reference": 12,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.574789439903974, -21.508085772416454],
                  [-44.58062592672038, -21.50361388299378],
                  [-44.57684937642741, -21.51127989494121]]]),
            {
              "reference": 12,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.6175811174351, -21.47743713708158],
                  [-44.619469392581586, -21.48845888503202],
                  [-44.609513032718304, -21.48398639226502]]]),
            {
              "reference": 12,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.66204141406596, -21.4652962752838],
                  [-44.66581796435893, -21.46833158559517],
                  [-44.66272805957377, -21.4708875873363]]]),
            {
              "reference": 12,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.722122895999554, -21.455870435012393],
                  [-44.72418283252299, -21.470727838541332],
                  [-44.71920465259135, -21.470408340425863]]]),
            {
              "reference": 12,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.71474145679057, -21.449959003871516],
                  [-44.717831361575726, -21.438774559709383],
                  [-44.71868966846049, -21.45123717145278]]]),
            {
              "reference": 12,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.74220727710307, -21.462580417724777],
                  [-44.736370790286664, -21.467532825854434],
                  [-44.73396753100932, -21.456349729735457]]]),
            {
              "reference": 12,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.59045861987651, -21.444047333087827],
                  [-44.583763826175336, -21.459225464980445],
                  [-44.58067392139018, -21.446124433910818]]]),
            {
              "reference": 12,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.51224094765848, -21.43227904532576],
                  [-44.51533085244364, -21.438510761701234],
                  [-44.51258427041239, -21.441067286306048]]]),
            {
              "reference": 12,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.425036968166296, -21.546963835179547],
                  [-44.41937214272684, -21.547762158674363],
                  [-44.42400699990458, -21.545047840872215]]]),
            {
              "reference": 12,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.34722773678265, -21.487091849567133],
                  [-44.34877268917523, -21.493800394035052],
                  [-44.34568278439007, -21.490605887619836]]]),
            {
              "reference": 12,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.364050551724056, -21.505619457881522],
                  [-44.35666911251507, -21.50849422007605],
                  [-44.36216227657757, -21.50290435251167]]]),
            {
              "reference": 12,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.37967173702679, -21.52111055967256],
                  [-44.37538020260296, -21.52558191080919],
                  [-44.37761180050335, -21.519833005500946]]]),
            {
              "reference": 12,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.175902181714044, -21.573707300721416],
                  [-44.17367058381365, -21.576740347159646],
                  [-44.17298393830584, -21.574345842089777]]]),
            {
              "reference": 12,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.19341164216326, -21.551675900879037],
                  [-44.197359853833184, -21.54975996879461],
                  [-44.195814901440606, -21.553112833337178]]]),
            {
              "reference": 12,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.09728127106951, -21.550558276904727],
                  [-44.100199514477715, -21.54880199326424],
                  [-44.105177694409356, -21.552314539284318]]]),
            {
              "reference": 12,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.15337071631769, -21.603973787537008],
                  [-44.1540573618255, -21.607804192717364],
                  [-44.14667592261652, -21.606846600930286]]]),
            {
              "reference": 12,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.14667592261652, -21.626795119904596],
                  [-44.13637623999933, -21.62823130704106],
                  [-44.13912282203058, -21.6236035418352]]]),
            {
              "reference": 12,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.127964832528626, -21.61067693004338],
                  [-44.123501636727845, -21.61354961031182],
                  [-44.122471668466126, -21.609240568512195]]]),
            {
              "reference": 12,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.02716795056603, -21.68256759170001],
                  [-44.02476469128869, -21.68926708613171],
                  [-44.02424970715783, -21.68336516689546]]]),
            {
              "reference": 12,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.0254513367965, -21.671720130841212],
                  [-44.027339611942985, -21.675229692798055],
                  [-44.02562299817345, -21.677143963309508]]]),
            {
              "reference": 12,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.02442136853478, -21.666615160954297],
                  [-44.021331463749625, -21.67076296275358],
                  [-44.022361432011344, -21.665498424702303]]]),
            {
              "reference": 12,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.14458433240197, -21.700113226058917],
                  [-44.14647260754845, -21.704738537241468],
                  [-44.140807782109, -21.70729036944949]]]),
            {
              "reference": 12,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.976871167118766, -21.67108201948879],
                  [-43.975154553349235, -21.675389216311597],
                  [-43.97395292371056, -21.673155871058682]]]),
            {
              "reference": 12,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.95180860608361, -21.572938844335383],
                  [-43.950435315067985, -21.564477860731515],
                  [-43.954040203984, -21.570065358121102]]]),
            {
              "reference": 12,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.20466581433556, -21.221154723513443],
                  [-44.20397916882775, -21.212993423965223],
                  [-44.20844236462853, -21.2227549254017]]]),
            {
              "reference": 12,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.17273679822228, -21.24611589603538],
                  [-44.17136350720666, -21.254435347679443],
                  [-44.16981855481408, -21.24563591333922]]]),
            {
              "reference": 12,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.151794110234, -21.20083065018581],
                  [-44.15557066052697, -21.195068986677757],
                  [-44.153167401249625, -21.20435155614497]]]),
            {
              "reference": 12,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.108707104618766, -21.234595879911044],
                  [-44.10012403577111, -21.241315998728197],
                  [-44.10218397229455, -21.236195935984338]]]),
            {
              "reference": 12,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.09960905164025, -21.24483593870495],
                  [-44.09634748547814, -21.252035554070815],
                  [-44.09737745373986, -21.245155929079758]]]),
            {
              "reference": 12,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.13582960217736, -21.24691586372151],
                  [-44.13188139050744, -21.250595659141066],
                  [-44.13291135876916, -21.2411559994592]]]),
            {
              "reference": 12,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.1602055177047, -21.24611589603538],
                  [-44.16106382458947, -21.252035554070815],
                  [-44.15574232190392, -21.2449959339792]]]),
            {
              "reference": 12,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.31556573043399, -21.223514238415593],
                  [-44.321402217250395, -21.227194617952044],
                  [-44.31573739181094, -21.229754827821385]]]),
            {
              "reference": 12,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.30372109542422, -21.1545120246717],
                  [-44.3188272965961, -21.163156806194856],
                  [-44.30200448165469, -21.157713854468266]]]),
            {
              "reference": 12,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.30869927535586, -21.127293676734183],
                  [-44.293421412807035, -21.135139478099248],
                  [-44.30200448165469, -21.12473169248809]]]),
            {
              "reference": 12,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.280718470912504, -21.12473169248809],
                  [-44.282435084682035, -21.113202215697214],
                  [-44.28706994185977, -21.1240911895104]]]),
            {
              "reference": 12,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.089458632018264, -21.328879549952767],
                  [-45.094093489196, -21.330478580724822],
                  [-45.08877198651045, -21.34343008764261]]]),
            {
              "reference": 12,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.00173966839522, -21.326480971122777],
                  [-45.00723283245772, -21.323122894900408],
                  [-45.003284620787795, -21.328399837323182]]]),
            {
              "reference": 12,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.96946732952803, -21.34662781451562],
                  [-44.97118394329756, -21.352383547117494],
                  [-44.965862440612014, -21.352063790124546]]]),
            {
              "reference": 12,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.92466229546807, -21.341576228708046],
                  [-44.929726306088185, -21.34173611872951],
                  [-44.931957903988575, -21.35140914065757],
                  [-44.92732304681084, -21.348691165912616]]]),
            {
              "reference": 12,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.86252298631229, -21.360122308104955],
                  [-44.86037721910038, -21.344933882546673],
                  [-44.86363878526249, -21.345253655092655],
                  [-44.86501207627811, -21.359722632863264]]]),
            {
              "reference": 12,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.81660356797733, -21.36435879862817],
                  [-44.81617441453495, -21.34709233369713],
                  [-44.81840601243534, -21.34709233369713],
                  [-44.81935015000858, -21.365238054892092]]]),
            {
              "reference": 12,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.73787555324272, -21.370264897718755],
                  [-44.74302539455132, -21.36466973254971],
                  [-44.741823764912645, -21.350920704652648],
                  [-44.74577197658257, -21.349481778329583],
                  [-44.74645862209038, -21.36147239933901],
                  [-44.741823764912645, -21.37090433155455]]]),
            {
              "reference": 12,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.70371493922905, -21.362111871564366],
                  [-44.70131167995171, -21.35331888379921],
                  [-44.705603214375536, -21.353958391610742],
                  [-44.70628985988335, -21.36339080764039]]]),
            {
              "reference": 12,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.69324359523491, -21.370584614985706],
                  [-44.70543155299858, -21.37905686816091],
                  [-44.700110050313036, -21.380815198881415],
                  [-44.69272861110405, -21.373941604138874]]]),
            {
              "reference": 12,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.76634350280351, -21.409948783039525],
                  [-44.773381619258586, -21.413624492042285],
                  [-44.773896603389446, -21.4222540540735],
                  [-44.76806011657304, -21.414743167732116]]]),
            {
              "reference": 12,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.92190790824956, -21.441127712989935],
                  [-44.918989664841355, -21.448317695273374],
                  [-44.914011484909715, -21.45518779161669],
                  [-44.9158997600562, -21.443045076251106]]]),
            {
              "reference": 12,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.001387125778855, -21.42067427064483],
                  [-45.00001383476323, -21.42866423765346],
                  [-44.996923929978074, -21.425148706033998]]]),
            {
              "reference": 12,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.9763245647437, -21.445601521398125],
                  [-44.97752619438237, -21.43984945681639],
                  [-44.97975779228276, -21.44671995206102]]]),
            {
              "reference": 12,
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.8926481002726, -21.499533000603282],
                  [-44.87788522185463, -21.498414975391114],
                  [-44.88766992034096, -21.496817781610396]]]),
            {
              "reference": 12,
              "system:index": "59"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.93041360320229, -21.518059024149117],
                  [-44.92320382537026, -21.52524520798068],
                  [-44.920800566092915, -21.52300954443277]]]),
            {
              "reference": 12,
              "system:index": "60"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.066943790177625, -21.246384035172255],
                  [-44.064197208146375, -21.255183424832417],
                  [-44.058704044083875, -21.249423883744136]]]),
            {
              "reference": 12,
              "system:index": "61"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.05560112239474, -21.212863959572115],
                  [-44.05130958797091, -21.210303456630434],
                  [-44.05989265681857, -21.210303456630434]]]),
            {
              "reference": 12,
              "system:index": "62"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.02264213801974, -21.221345308326054],
                  [-44.01646232844943, -21.228226044417397],
                  [-44.02161216975802, -21.217984832215006],
                  [-44.02641868831271, -21.217984832215006]]]),
            {
              "reference": 12,
              "system:index": "63"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.0202388787424, -21.21158371365251],
                  [-44.02659034968966, -21.20710276550554],
                  [-44.02332878352755, -21.214304222960077]]]),
            {
              "reference": 12,
              "system:index": "64"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.04684639217013, -21.262224198725892],
                  [-44.05439949275607, -21.261424314170977],
                  [-44.04993629695529, -21.266703471928874]]]),
            {
              "reference": 12,
              "system:index": "65"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.06315422298068, -21.286218714222425],
                  [-44.067445757404506, -21.28733836271012],
                  [-44.064699175373256, -21.29213675966687]]]),
            {
              "reference": 12,
              "system:index": "66"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.15825462581271, -21.27134257549497],
                  [-44.162889482990444, -21.262704127373116],
                  [-44.16168785335177, -21.27326216178587]]]),
            {
              "reference": 12,
              "system:index": "67"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.2043080733304, -21.156335160103545],
                  [-44.19744161825228, -21.159697038172105],
                  [-44.19915823202181, -21.155694793720414]]]),
            {
              "reference": 12,
              "system:index": "68"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.23029488237323, -21.055818947784104],
                  [-44.22806328447284, -21.063828716869732],
                  [-44.22480171831073, -21.054056740726548]]]),
            {
              "reference": 12,
              "system:index": "69"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.00541532699455, -20.106635571427535],
                  [-43.977606183928145, -20.104056360109922],
                  [-43.98103941146721, -20.099542638044934]]]),
            {
              "reference": 12,
              "system:index": "70"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.02361143295158, -20.052785724979305],
                  [-44.00575864974846, -20.03730450381336],
                  [-44.006101972502364, -20.024079752501553],
                  [-44.008848554533614, -20.0350466982287]]]),
            {
              "reference": 12,
              "system:index": "71"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.13862455551018, -20.090192371272934],
                  [-44.12763822738518, -20.099542638044934],
                  [-44.13038480941643, -20.09244938332774]]]),
            {
              "reference": 12,
              "system:index": "72"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.91914285398517, -20.28864845562612],
                  [-43.90266336179767, -20.295732782180547],
                  [-43.91090310789142, -20.28864845562612]]]),
            {
              "reference": 12,
              "system:index": "73"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.93012918211017, -20.406506923021464],
                  [-43.93115915037189, -20.411333496996075],
                  [-43.917769562969546, -20.40393268838202]]]),
            {
              "reference": 12,
              "system:index": "74"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.930815827617984, -20.487251659228676],
                  [-43.931502473125796, -20.499472261719443],
                  [-43.928755891094546, -20.497864343369628]]]),
            {
              "reference": 12,
              "system:index": "75"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.68662387567626, -20.424559591850493],
                  [-43.681817357121574, -20.433246297082256],
                  [-43.68113071161376, -20.427776947280375]]]),
            {
              "reference": 12,
              "system:index": "76"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.78309756952392, -20.37564751108162],
                  [-43.786874119816886, -20.37500382759999],
                  [-43.781380955754386, -20.383693327963435]]]),
            {
              "reference": 12,
              "system:index": "77"
            })]),
    varzea = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.76582258838516, -21.062406150138727],
                  [-45.76135939258438, -21.06272653499691],
                  [-45.76135939258438, -21.059362459576576]]]),
            {
              "reference": 11,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.76067274707657, -21.081307675989816],
                  [-45.75586622852188, -21.07746349249892],
                  [-45.76067274707657, -21.07778384492024]]]),
            {
              "reference": 11,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.73543852466446, -21.07201739572109],
                  [-45.73887175220352, -21.07233775987706],
                  [-45.73801344531876, -21.07586172003736]]]),
            {
              "reference": 11,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.84387066315528, -21.09560514796698],
                  [-45.84627392243262, -21.0972067076126],
                  [-45.843699001778326, -21.098648096526382]]]),
            {
              "reference": 11,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.88755848358985, -21.207166431096113],
                  [-45.88747265290137, -21.2034855521207],
                  [-45.888931774605474, -21.207006394787623]]]),
            {
              "reference": 11,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.52522518995241, -21.857217127481547],
                  [-45.52376606824831, -21.856500179318978],
                  [-45.525053528575455, -21.854906948296488]]]),
            {
              "reference": 11,
              "system:index": "5"
            })]);

// Define the Atlantic Forest boundary
var limite_MA = /* color: #d63000 */ee.Geometry.Polygon(
        [[[-48.593359954293625, -30.678347823900353],
          [-47.275000579293625, -25.525376684152373],
          [-40.595313079293625, -23.284530667538736],
          [-33.915625579293625, -6.580343714417967],
          [-35.453711516793625, -4.217995607905081],
          [-44.198828704293625, -17.856203449528717],
          [-50.483008391793625, -17.52126295946964],
          [-55.712500579293625, -21.74193426005608],
          [-55.492774016793625, -29.72888025446976]]]);

// Define the output directory
var dirout = 'projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/'

// Define the input stable version
var v_estavel_in = '1';

// Define the output version
var version_out = '2';

// Define the year
var year = 2020;

// Import the palettes module
var palettes = require('users/mapbiomas/modules:Palettes.js');

// Define the visualization parameters
var vis = {'min': 0,'max': 62,'palette': palettes.get('classification8')};

// Load the collection 9 image
var colecao9 = ee.Image('projects/mapbiomas-public/assets/brazil/lulc/collection9/mapbiomas_collection90_integration_v1')

// Add the collection 9 image to the map
Map.addLayer(colecao9.select('classification_2023'), vis, 'Classes LANDSAT 23', false);

// Load the stable version 1 image
var estaveis_v1 = ee.Image(dirout+'MA_amostras_estaveis16a22_colS2_v'+v_estavel_in)

// Add the stable version 1 image to the map
Map.addLayer(estaveis_v1, vis, 'estaveis_v1 S2', false);

// Load and remap the SEMA MG image
var SEMA_MG = ee.ImageCollection('projects/mapbiomas-workspace/VALIDACAO/MATA_ATLANTICA/MG_IEF').mosaic()
SEMA_MG = SEMA_MG.remap(
                  [3, 4, 5, 9,11,12,13,15,18,19,20,36,39,41,21,22,23,24,25,26,29,30,31,32,33],
                  [3, 4, 3, 9,11,12,13,21,21,21,21,21,21,21,21,22,22,22,22,33,29,22,33,13,33])
                  .clip(MG)

// Add the SEMA MG image to the map
Map.addLayer(SEMA_MG, vis, 'SEMA_MG', false);

// Load and remap the SEMA ES image
var SEMA_ES = ee.Image('projects/mapbiomas-workspace/MAPA_REFERENCIA/MATA_ATLANTICA/ES_SEMA_IDMapBiomas_15m')
SEMA_ES = SEMA_ES.remap(
                  [3, 4, 5, 9,11,12,13,15,18,19,20,36,39,41,21,22,23,24,25,26,29,30,31,32,33],
                  [3, 4, 3, 9,11,12,13,21,21,21,21,21,21,21,21,22,22,22,22,33,29,22,33,13,33])

// Add the SEMA ES image to the map
Map.addLayer(SEMA_ES, vis, 'SEMA_ES', false);

// Load and remap the SEMA PR image
var SEMA_PR = ee.Image('projects/mapbiomas-workspace/MAPA_REFERENCIA/MATA_ATLANTICA/PR_Sema_LULC_10m_ids_MapBiomas3')
SEMA_PR = SEMA_PR.remap(
                  [3, 4, 5, 9,11,12,13,15,18,19,20,36,39,41,21,22,23,24,25,26,29,30,31,32,33],
                  [3, 4, 3, 9,11,12,13,21,21,21,21,21,21,21,21,22,22,22,22,33,29,22,33,13,33])

// Add the SEMA PR image to the map
Map.addLayer(SEMA_PR, vis, 'SEMA_PR', false);

// Load and remap the SEMA SP image
var SEMA_SP = ee.Image('projects/mapbiomas-workspace/MAPA_REFERENCIA/MATA_ATLANTICA/SP_IF_2020_2')
SEMA_SP = SEMA_SP.remap(
                  [3, 4, 5, 9,11,12,13,15,18,19,20,36,39,41,21,22,23,24,25,26,29,30,31,32,33],
                  [3, 4, 3, 9,11,12,13,21,21,21,21,21,21,21,21,22,22,22,22,33,29,22,33,13,33])

// Add the SEMA SP image to the map
Map.addLayer(SEMA_SP, vis, 'SEMA_SP', false);

//Corrige MG
//var savanaMG = SEMA_MG.remap([4],[100])
//savanaMG = savanaMG.add(estaveis_v1).remap([103],[4])
//Map.addLayer(savanaMG, [], 'savanaMG', false);

// Create a mask to remove class 21 from the SEMA MG image
var apaga21MG = SEMA_MG.remap([3,4,9,12,13,29],[100,100,100,100,100,100])
// Blend the masked SEMA MG image with the stable version 1 image and remap class 121 to 27
apaga21MG = apaga21MG.add(estaveis_v1).remap([121],[27])

// Add the masked SEMA MG image to the map
Map.addLayer(apaga21MG, [], 'apaga21MG', false);

// Create a mask to remove classes 4, 9, 11, 12, 13, 29, 21, and 22 from the SEMA MG image
var apaga3MG = SEMA_MG.remap([4,9,11,12,13,29,21,22],[100,100,100,100,100,100,100,100])
// Blend the masked SEMA MG image with the stable version 1 image and remap class 103 to 27
apaga3MG = apaga3MG.add(estaveis_v1).remap([103],[27])

// Add the masked SEMA MG image to the map
Map.addLayer(apaga21MG, [], 'apaga21MG', false);

// Create a mask to keep classes 12 and 29 from the SEMA MG image
var complementoMG = SEMA_MG.remap([12,29],[12,29])

//Corrige ES
// Create a mask to remove classes 3, 4, 9, 12, 13, 29, and 22 from the SEMA ES image
var apaga21ES = SEMA_ES.remap([3,4,9,12,13,29,22],[100,100,100,100,100,100,100])
// Blend the masked SEMA ES image with the stable version 1 image and remap class 121 to 27
apaga21ES = apaga21ES.add(estaveis_v1).remap([121],[27])

// Add the masked SEMA ES image to the map
Map.addLayer(apaga21ES, [], 'apaga21ES', false);

// Create a mask to remove classes 4, 9, 11, 12, 13, 29, 21, and 22 from the SEMA ES image
var apaga3ES = SEMA_ES.remap([4,9,11,12,13,29,21,22],[100,100,100,100,100,100,100,100])
// Blend the masked SEMA ES image with the stable version 1 image and remap class 103 to 27
apaga3ES = apaga3ES.add(estaveis_v1).remap([103],[27])

// Add the masked SEMA ES image to the map
Map.addLayer(apaga3ES, [], 'apaga3ES', false);

// Create a mask to keep classes 12 and 29 from the SEMA ES image
var complementoES = SEMA_ES.remap([12,29],[29,29])

//Corrige PR
// Create a mask to remove classes 3, 4, 9, 12, 13, 29, and 22 from the SEMA PR image
var apaga21PR = SEMA_PR.remap([3,4,9,12,13,29,22],[100,100,100,100,100,100,100])
// Blend the masked SEMA PR image with the stable version 1 image and remap class 121 to 27
apaga21PR = apaga21PR.add(estaveis_v1).remap([121],[27])

// Add the masked SEMA PR image to the map
Map.addLayer(apaga21PR, [], 'apaga21PR', false);

// Create a mask to remove classes 4, 9, 11, 12, 13, 29, 21, and 22 from the SEMA PR image
var apaga3PR = SEMA_PR.remap([4,9,11,12,13,29,21,22],[100,100,100,100,100,100,100,100])
// Blend the masked SEMA PR image with the stable version 1 image and remap class 103 to 27
apaga3PR = apaga3PR.add(estaveis_v1).remap([103],[27])

// Add the masked SEMA PR image to the map
Map.addLayer(apaga3PR, [], 'apaga3PR', false);

// Create a mask to keep classes 12 and 29 from the SEMA PR image
var complementoPR = SEMA_PR.remap([12,29],[12,29])

//Corrige SP
// Create a mask to remove classes 3, 4, 5, 12, and 29 from the SEMA SP image
var apaga21SP = SEMA_SP.remap([3,4,5,12,29],[100,100,100,100,100])
// Blend the masked SEMA SP image with the stable version 1 image and remap class 121 to 27
apaga21SP = apaga21SP.add(estaveis_v1).remap([121],[27])

// Add the masked SEMA SP image to the map
Map.addLayer(apaga21SP, [], 'apaga21SP', false);

// Create a mask to remove classes 4, 9, 11, 12, and 29 from the SEMA SP image
var apaga3SP = SEMA_SP.remap([4,9,11,12,29],[100,100,100,100,100])
// Blend the masked SEMA SP image with the stable version 1 image and remap class 103 to 27
apaga3SP = apaga3SP.add(estaveis_v1).remap([103],[27])

// Add the masked SEMA SP image to the map
Map.addLayer(apaga3SP, [], 'apaga3SP', false);

// Create a mask to keep classes 12 and 29 from the SEMA SP image
var complementoSP = SEMA_SP.remap([12,29],[12,29])

// Blend the stable version 1 image with the corrected SEMA images
var estaveis_v2 = estaveis_v1
    .blend(apaga21MG).blend(apaga3MG).blend(complementoMG)
    .blend(apaga21ES).blend(apaga3ES).blend(complementoES)
    .blend(apaga21PR).blend(apaga3PR).blend(complementoPR)
    .blend(apaga21SP).blend(apaga3SP).blend(complementoSP)

// Add the blended image to the map
Map.addLayer(estaveis_v2, vis, 'estaveis_v2', false);

// Load the GEDI image and clip it to the Atlantic Forest boundary
var GEDI = ee.Image('users/potapovpeter/GEDI_V27/GEDI_SAM_v27').clip(limite_MA2).rename('GEDI');

// Define the visualization parameters for the GEDI image
var imageVisGEDI = {"min": 0,"max": 15,"palette":["c9f5f1","#ffbeee","#daffe0","#c0debf","08ff04","#037e07","0b240a"]};

// Add the GEDI image to the map
Map.addLayer(GEDI, imageVisGEDI,'GEDI', false);

// Create a mask for forest areas based on GEDI data
var am_flo_gedi = GEDI.gte(8).remap([1],[100],0)

// Add the forest mask to the map
Map.addLayer(am_flo_gedi.selfMask(), {"palette":["037e07"]},'GEDI_Floresta', false);
  
// Create a mask for non-forest areas based on GEDI data
var am_cam_gedi = GEDI.lt(7).remap([1],[200],0)

// Add the non-forest mask to the map
Map.addLayer(am_cam_gedi.selfMask(), {"palette":["806316"]},'GEDI_Campo', false);
 
// Blend the stable version 2 image with the GEDI masks
var estavel_GEDI = estaveis_v2.add(am_flo_gedi).add(am_cam_gedi)
//Map.addLayer(estavel_GEDI, vis, 'estavel_GEDI', false);

// Remap the classes to the desired values
estavel_GEDI = estavel_GEDI.remap(
  [  3,  4,  9, 12, 50, 21, 22, 29, 33,
   103,104,109,112,150,121,122,129,133,
   203,204,209,212,250,221,222,229,233],
  [  0,  4,  9,  0,  0, 21,  0,  0,  0,
     3,  0,  9,  0,  0,  0,  0,  0,  0,
     0,  4,  9, 12, 50, 21, 22, 29, 33],0 ).rename('reference')
 
// Add the blended image to the map
Map.addLayer(estavel_GEDI.selfMask(), vis, 'estavel_GEDI', false);

// Create a mask for forest areas without a 10m buffer
var flo_sem_buff10m = estavel_GEDI.eq(3).distance(ee.Kernel.euclidean(100, 'meters'))
flo_sem_buff10m = flo_sem_buff10m.lte(10).selfMask()
Map.addLayer(flo_sem_buff10m)

// Export the blended image to an asset
Export.image.toAsset({
    "image": estavel_GEDI.selfMask().toInt8(),
    "description": 'MA_amostras_estaveis16a22_colS2_v'+version_out,
    "assetId": dirout + 'MA_amostras_estaveis16a22_colS2_v'+version_out,
    "scale": 30,
    "pyramidingPolicy": {
        '.default': 'mode'
    },
    "maxPixels": 1e13,
    "region": limite_MA2
});  

// Define the visualization parameters for HAND
var vis_hand = {
    'min': 0,
    'max': 60,
    'palette': 'blue,white,green,orange,red,brown'
};

// Load the HAND images
var hand30_100 = ee.ImageCollection('users/gena/global-hand/hand-100').mosaic();
// var hand30_1000 =  ee.Image("users/gena/GlobalHAND/30m/hand-1000");
var hand30_1000 =  ee.Image("projects/nexgenmap/MapBiomas2/ANCILARY/HAND_30_1000_South_America");

// Add the HAND images to the map
Map.addLayer(hand30_100,vis_hand,'hand_1000',false);
Map.addLayer(hand30_1000,vis_hand,'hand_1000',false);

// Create masks for HAND values less than 5 and 7
var hand30_100_7 =  hand30_100.lt(5);//.selfMask();
var hand30_1000_7 =  hand30_1000.lt(7);//.selfMask();

// Combine the masks
var hand_join = hand30_100_7.add(hand30_1000_7).remap([0,1,2],[0,100,100]);

// Add the masks to the map
// Map.addLayer(hand30_100,vis_hand,'hand_1000',false);
// Map.addLayer(hand30_100_7,{    'min': 0,    'max': 1,'palette': 'white, blue'} ,'hand_100- 7',false);
// Map.addLayer(hand30_1000_7,{    'min': 0,    'max': 1,'palette': 'white, blue'} ,'hand_1000- 7',false);
Map.addLayer(hand_join,{    'min': 0,    'max': 100,'palette': 'white, blue'} ,'hand_join',false);

// Blend the stable GEDI image with the HAND mask
var estavel_HAND = estavel_GEDI.add(hand_join)
// Map.addLayer(estavel_GEDI, vis, 'estavel_GEDI', false);

// Remap the classes to the desired values
estavel_HAND = estavel_HAND.remap(
  [0, 11,111],
  [0,  0, 11],0 ).rename('reference')
 
// Add the blended image to the map
Map.addLayer(estavel_HAND, vis, 'Varzea 16a22 GEDI HAND', true);

// Export the blended image to an asset
Export.image.toAsset({
    "image": estavel_HAND.toInt8(),
    "description": 'MA_varzea_estaveis16a22_colS2_v'+version_out,
    "assetId": dirout + 'MA_varzea_estaveis16a22_colS2_v'+version_out,
    "scale": 10,
    "pyramidingPolicy": {
        '.default': 'mode'
    },
    "maxPixels": 1e13,
    "region": limite_MA
});
