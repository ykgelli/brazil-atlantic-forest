var savana = /* color: #ff0000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.32487919785108, -13.38737151344832],
                  [-40.32221844650831, -13.392130875509627],
                  [-40.32273343063917, -13.38545104246203]]]),
            {
              "reference": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.322046785131356, -13.394802756818455],
                  [-40.32264760772623, -13.39939497247784],
                  [-40.32050183273878, -13.399645466060125],
                  [-40.31990101791944, -13.397140628624198]]]),
            {
              "reference": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.31552365280714, -13.394969748415138],
                  [-40.31312039352979, -13.400897874995774],
                  [-40.31123211838331, -13.397558103341597]]]),
            {
              "reference": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.27346661545362, -13.389458964535077],
                  [-40.2695184037837, -13.394719260976638],
                  [-40.269861726537606, -13.389542462202026]]]),
            {
              "reference": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.27320912338819, -13.330335356409382],
                  [-40.27544072128858, -13.328497950200212],
                  [-40.27629902817335, -13.332506818474371]]]),
            {
              "reference": 4,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.21297186933034, -13.300388635665334],
                  [-40.211941911714426, -13.296462737155586],
                  [-40.214345160345964, -13.292870956014944],
                  [-40.21468848309987, -13.300388635665334]]]),
            {
              "reference": 4,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.233632025942384, -13.281744257759863],
                  [-40.22848218463379, -13.276732112033594],
                  [-40.23517697833496, -13.276397965306172]]]),
            {
              "reference": 4,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.31739440606121, -12.22808021500745],
                  [-39.31499114678387, -12.242927156140972],
                  [-39.31207289308813, -12.241710837109379],
                  [-39.3141328398991, -12.230261173883015]]]),
            {
              "reference": 4,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.308903658731545, -12.203557845784738],
                  [-39.3152980052988, -12.194161925374416],
                  [-39.31649963493747, -12.196175376773477],
                  [-39.31160728569431, -12.20557128105928]]]),
            {
              "reference": 4,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.142255220626645, -12.155060919626678],
                  [-39.14689006870739, -12.152543735823807],
                  [-39.149464998458676, -12.156403419914367],
                  [-39.14431515715008, -12.160598689636815]]]),
            {
              "reference": 4,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.109038765395205, -12.213788915873005],
                  [-39.11410275480633, -12.203890002858431],
                  [-39.118050966476254, -12.207077843480668],
                  [-39.11187115690594, -12.213956737233259]]]),
            {
              "reference": 4,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.1864849878246, -12.011327804006232],
                  [-39.189574892609755, -12.011663610005785],
                  [-39.18717163333241, -12.013006829816314]]]),
            {
              "reference": 4,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.07336014041249, -12.042220201662625],
                  [-39.080655748933, -12.037435470212886],
                  [-39.0788962529514, -12.041590627291821],
                  [-39.07542007693593, -12.04423479993239]]]),
            {
              "reference": 4,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.066493685334365, -11.94852473336736],
                  [-39.069240267365615, -11.944997925019543],
                  [-39.068210299103896, -11.94902855938146]]]),
            {
              "reference": 4,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.74479701660911, -11.7870305186091],
                  [-38.744453693855206, -11.798121044481638],
                  [-38.74119210225291, -11.801817768140188],
                  [-38.72608553575702, -11.7762749381872],
                  [-38.73089244507591, -11.761486998177322]]]),
            {
              "reference": 4,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.58528068207542, -11.909883399742409],
                  [-38.59373508300194, -11.90211488267018],
                  [-38.6012881054763, -11.904970347151098],
                  [-38.59407832764427, -11.916727931718526]]]),
            {
              "reference": 4,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.00163145927382, -11.59716779145523],
                  [-38.00025816825819, -11.602212454139122],
                  [-37.99888487724257, -11.600362755074505]]]),
            {
              "reference": 4,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.714023529016046, -10.974706909591006],
                  [-37.71243566127923, -10.978035198702592],
                  [-37.711276946984796, -10.976855556218938]]]),
            {
              "reference": 4,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.19577998613873, -14.109043169264522],
                  [-40.196209139581114, -14.116701256902594],
                  [-40.195436663384825, -14.112539284676465]]]),
            {
              "reference": 4,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.333036139337295, -15.08935261767701],
                  [-41.32925958904433, -15.097308116821385],
                  [-41.330547049371475, -15.092833185209319]]]),
            {
              "reference": 4,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.26034486226436, -15.110621230415795],
                  [-41.2514184706628, -15.10830105277048],
                  [-41.256482481282916, -15.107886732664486]]]),
            {
              "reference": 4,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.322915434163775, -15.152794319564823],
                  [-41.31210076741573, -15.14732637709058],
                  [-41.31913888387081, -15.145503698204566]]]),
            {
              "reference": 4,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.2667732098056, -15.23248555860036],
                  [-41.256130204434506, -15.235798142824748],
                  [-41.25853346371185, -15.229669821004757]]]),
            {
              "reference": 4,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.40616224789154, -15.210786842878033],
                  [-41.40890882992279, -15.216915714340034],
                  [-41.405475602383724, -15.216584428549222]]]),
            {
              "reference": 4,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.142131842458575, -15.707895468116163],
                  [-41.1380119694117, -15.715662097686792],
                  [-41.13749698528084, -15.702937890161534]]]),
            {
              "reference": 4,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.08153537639412, -15.726567928486416],
                  [-41.074497259939044, -15.72061936594038],
                  [-41.08102039226326, -15.72375890672884]]]),
            {
              "reference": 4,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.04056310235208, -15.628083496453515],
                  [-41.04039144097513, -15.633704134959087],
                  [-41.039189811336456, -15.631555085511309]]]),
            {
              "reference": 4,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.038849122189724, -15.535661658431833],
                  [-41.032840973996365, -15.543269437089585],
                  [-41.02803445544168, -15.53880403583974]]]),
            {
              "reference": 4,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.99524056708895, -15.476859921685373],
                  [-40.9899190644034, -15.483973575095533],
                  [-40.98648583686434, -15.479837759855247]]]),
            {
              "reference": 4,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.50971777444559, -15.24231571230391],
                  [-41.51521093850809, -15.254240213856503],
                  [-41.508344483429966, -15.251921613764466]]]),
            {
              "reference": 4,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.739552425463515, -15.258877337274814],
                  [-41.73062603386195, -15.265170412442032],
                  [-41.73268597038539, -15.258546117568358]]]),
            {
              "reference": 4,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.66024486931117, -15.172662230999148],
                  [-41.653378414233046, -15.181939968153854],
                  [-41.64857189567836, -15.1759757553361]]]),
            {
              "reference": 4,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.679127620776015, -15.140518349665829],
                  [-41.67054455192836, -15.155099684675418],
                  [-41.66848461540492, -15.146814958473596]]]),
            {
              "reference": 4,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.76763122166438, -15.367344732279479],
                  [-41.770034480941725, -15.380586223536213],
                  [-41.76419799412532, -15.37495869256588]]]),
            {
              "reference": 4,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.60736389370466, -15.55018847702391],
                  [-41.60839386196638, -15.544565552232953],
                  [-41.613200380521064, -15.55118074193122]]]),
            {
              "reference": 4,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.43570251675153, -15.459210586102119],
                  [-41.44394226284528, -15.452923362328011],
                  [-41.445658876614814, -15.459541487331965]]]),
            {
              "reference": 4,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.369825002086856, -15.608092657693998],
                  [-41.372571584118106, -15.599495250427765],
                  [-41.37669145716498, -15.608753981789981]]]),
            {
              "reference": 4,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.80061932221228, -14.830660691612538],
                  [-40.79512615814978, -14.839289542261564],
                  [-40.79203625336462, -14.83265199538781]]]),
            {
              "reference": 4,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.788946348579465, -14.759293563469614],
                  [-40.79203625336462, -14.768589216147129],
                  [-40.78757305756384, -14.76626534024032]]]),
            {
              "reference": 4,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.43624014496069, -14.593565329680224],
                  [-40.42456717132788, -14.595558798417136],
                  [-40.42731375335913, -14.58824932476984]]]),
            {
              "reference": 4,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.27681242870076, -14.459100288950525],
                  [-40.273379201161696, -14.476386932579496],
                  [-40.27131926463826, -14.464086958859049]]]),
            {
              "reference": 4,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.234927052724196, -14.430507889019829],
                  [-40.227717274892164, -14.43981744596484],
                  [-40.22737395213826, -14.426850456565539]]]),
            {
              "reference": 4,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.01212667829632, -10.19600223156842],
                  [-37.004144424268, -10.19752278238429],
                  [-37.00809263593792, -10.19397481919083]]]),
            {
              "reference": 4,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.03873419172405, -10.185527128787324],
                  [-37.04139494306683, -10.185611606799403],
                  [-37.03779005415081, -10.188399368642324]]]),
            {
              "reference": 4,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.14021398809605, -10.190938007192097],
                  [-37.134120009214215, -10.186545194269964],
                  [-37.143132231504254, -10.189544140417347]]]),
            {
              "reference": 4,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.1539251230935, -10.164292715924276],
                  [-37.15371054637231, -10.169572899956945],
                  [-37.15169352519311, -10.16517979294013]]]),
            {
              "reference": 4,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.1761152337835, -10.229598188530268],
                  [-37.17431278932549, -10.233948174392307],
                  [-37.17158766496636, -10.232491146932583],
                  [-37.17105122316338, -10.230379501062291]]]),
            {
              "reference": 4,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.16575937324429, -10.241450186754086],
                  [-37.1666069503223, -10.24540936541997],
                  [-37.16603832298184, -10.24586335660649],
                  [-37.16337757163907, -10.242928288761503]]]),
            {
              "reference": 4,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.17273311668301, -10.273928425291997],
                  [-37.170930672225005, -10.2759975538854],
                  [-37.17011528068448, -10.273632834387218]]]),
            {
              "reference": 4,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.16291146559237, -10.3112121270023],
                  [-37.16132359785556, -10.316152092987124],
                  [-37.15999322218417, -10.311803238125304]]]),
            {
              "reference": 4,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.258623658768464, -10.367244424611872],
                  [-37.260855256668854, -10.370199441789467],
                  [-37.257851182572175, -10.369608440584841]]]),
            {
              "reference": 4,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.36835856564588, -10.42195915918036],
                  [-37.37007517941541, -10.429303149057592],
                  [-37.36647029049939, -10.425251313991852]]]),
            {
              "reference": 4,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.34181902896046, -10.555288014141661],
                  [-37.34319231997608, -10.561110062614949],
                  [-37.33881495486378, -10.55613179611472]]]),
            {
              "reference": 4,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.520928835196315, -10.974232287186487],
                  [-37.521915888113796, -10.978698091406274],
                  [-37.5187830679844, -10.976254546517676]]]),
            {
              "reference": 4,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.714287299364564, -11.19015375383577],
                  [-37.708493727892396, -11.194405768082206],
                  [-37.7073779289422, -11.192342917483073],
                  [-37.71235610887384, -11.188217172200488]]]),
            {
              "reference": 4,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.73873049293914, -11.20694415071466],
                  [-37.7407045987741, -11.203828954634696],
                  [-37.74250704323211, -11.205512848574296],
                  [-37.740361276020195, -11.20930157409063]]]),
            {
              "reference": 4,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.90052586530957, -11.628401785901655],
                  [-37.89391690229687, -11.63706076363205],
                  [-37.89348774885449, -11.628653992945107]]]),
            {
              "reference": 4,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.80043596384824, -11.602421281042192],
                  [-37.79940599558652, -11.61108106617629],
                  [-37.795028630474214, -11.6120899556952],
                  [-37.79786104319394, -11.602421281042192]]]),
            {
              "reference": 4,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.92507836856309, -11.760318770493333],
                  [-37.930013633150494, -11.754772800771951],
                  [-37.930743194002545, -11.759772581466075]]]),
            {
              "reference": 4,
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.81057548919922, -14.703803000195439],
                  [-40.81263542572266, -14.694836676509135],
                  [-40.823793415224614, -14.699818012890082]]]),
            {
              "reference": 4,
              "system:index": "59"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.84078789154297, -14.65498189961608],
                  [-40.837526325380864, -14.664115927079722],
                  [-40.83495140472657, -14.655812281488055],
                  [-40.837011341250005, -14.651826419802022]]]),
            {
              "reference": 4,
              "system:index": "60"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.84986325566226, -14.804521869902949],
                  [-40.84505673710757, -14.813483674361585],
                  [-40.84299680058413, -14.81182410890454],
                  [-40.84574338261538, -14.804687832612338]]]),
            {
              "reference": 4,
              "system:index": "61"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.97586270634585, -14.891152903050124],
                  [-40.96521970097476, -14.889659831518165],
                  [-40.975004399461085, -14.88650775764551]]]),
            {
              "reference": 4,
              "system:index": "62"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.95896824595389, -14.919328609178306],
                  [-40.954333388776156, -14.92596348874658],
                  [-40.953646743268344, -14.917006352960396]]]),
            {
              "reference": 4,
              "system:index": "63"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.29493868063235, -12.706834970604692],
                  [-39.30283510397219, -12.722073109588138],
                  [-39.290303823454614, -12.726091807007785]]]),
            {
              "reference": 4,
              "system:index": "64"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.040687877697685, -12.067639841807091],
                  [-39.042919475598076, -12.077711727278693],
                  [-39.03828461842034, -12.083670747822648],
                  [-39.032190639538506, -12.065457550051896]]]),
            {
              "reference": 4,
              "system:index": "65"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.31372967439118, -12.17727554050226],
                  [-39.298966795973215, -12.176604343922474],
                  [-39.30205670075837, -12.175597545871641],
                  [-39.312699706129465, -12.17492634505042]]]),
            {
              "reference": 4,
              "system:index": "66"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.22274914460603, -12.134483368612598],
                  [-39.216054350904855, -12.134147716541536],
                  [-39.221032530836496, -12.132301622594035]]]),
            {
              "reference": 4,
              "system:index": "67"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.294675261549386, -12.130287687340587],
                  [-39.29416027741853, -12.13364423764227],
                  [-39.289697081617746, -12.132301622594035],
                  [-39.29107037263337, -12.13011985871597]]]),
            {
              "reference": 4,
              "system:index": "68"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.312699706129465, -12.098618919683355],
                  [-39.31098309235993, -12.103654326769124],
                  [-39.3092664785904, -12.101136635086275]]]),
            {
              "reference": 4,
              "system:index": "69"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.17966213899079, -12.011995101433683],
                  [-39.182580382398996, -12.015017332863337],
                  [-39.177602202467355, -12.014177827535832]]]),
            {
              "reference": 4,
              "system:index": "70"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.13407761256062, -11.949360127716174],
                  [-39.135622564953195, -11.952886879240685],
                  [-39.130644385021554, -11.95355863622586]]]),
            {
              "reference": 4,
              "system:index": "71"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.127914396176706, -11.866736496497673],
                  [-39.11933132732905, -11.86539255141294],
                  [-39.123966184506784, -11.863544616107022],
                  [-39.128944364438425, -11.86472057638681]]]),
            {
              "reference": 4,
              "system:index": "72"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.142677274594675, -11.857496740304123],
                  [-39.14473721111811, -11.852288739843507],
                  [-39.14731213177241, -11.858336731071343]]]),
            {
              "reference": 4,
              "system:index": "73"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.834661765630344, -11.75820028861352],
                  [-38.83294515186081, -11.749124937442058],
                  [-38.83620671802292, -11.748956872563003],
                  [-38.83758000903855, -11.757696110284773]]]),
            {
              "reference": 4,
              "system:index": "74"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.52818582847469, -12.53588959545514],
                  [-39.529044135359456, -12.53203547938557],
                  [-39.535567267683675, -12.532873335607839],
                  [-39.54174707725399, -12.538067983387917],
                  [-39.53264902427547, -12.538403118358229]]]),
            {
              "reference": 4,
              "system:index": "75"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.28305338218563, -12.652491157173959],
                  [-39.280135138777425, -12.645791355725741],
                  [-39.285113318709065, -12.641436390516983],
                  [-39.28442667320125, -12.64763381865075]]]),
            {
              "reference": 4,
              "system:index": "76"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.34116075828426, -12.648178180152506],
                  [-39.34184740379207, -12.655212901281795],
                  [-39.33875749900692, -12.655380392278726],
                  [-39.33892916038387, -12.648513171269027]]]),
            {
              "reference": 4,
              "system:index": "77"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.22948406746635, -12.83128507860813],
                  [-39.22935532143364, -12.824799225780692],
                  [-39.230428205039594, -12.823250965230008],
                  [-39.23184441139946, -12.824380777922373],
                  [-39.230900273826215, -12.830866641535646]]]),
            {
              "reference": 4,
              "system:index": "78"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.254523349875484, -12.87527725458068],
                  [-39.25533874141601, -12.878080273846628],
                  [-39.2511759530249, -12.880172058841133],
                  [-39.25113303768066, -12.875528272509278]]]),
            {
              "reference": 4,
              "system:index": "79"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.83904997907764, -11.703096998400568],
                  [-38.83879248701221, -11.706458835051029],
                  [-38.83596007429249, -11.705282196872053],
                  [-38.83613173566944, -11.701163923823293]]]),
            {
              "reference": 4,
              "system:index": "80"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.6195841880761, -11.731985568623784],
                  [-38.621644124599534, -11.739212710838483],
                  [-38.612374410244065, -11.744590926295778],
                  [-38.60670958480461, -11.733834390471435]]]),
            {
              "reference": 4,
              "system:index": "81"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.590401753994065, -11.746943862557556],
                  [-38.58130370101555, -11.75114548447525],
                  [-38.58010207137688, -11.747111928664586],
                  [-38.587140187831956, -11.744927061277494]]]),
            {
              "reference": 4,
              "system:index": "82"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.646363362880784, -11.774841431332119],
                  [-38.653058156581956, -11.778874580661888],
                  [-38.64378844222649, -11.78173135895368],
                  [-38.642071828456956, -11.776185821018625]]]),
            {
              "reference": 4,
              "system:index": "83"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.92550203402179, -10.049717729866995],
                  [-36.9206955154671, -10.052760211002077],
                  [-36.91932222445148, -10.043632681708585]]]),
            {
              "reference": 4,
              "system:index": "84"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.13605806429523, -11.224771095639992],
                  [-38.13743135531085, -11.230832628538783],
                  [-38.134341450525696, -11.22948563222958]]]),
            {
              "reference": 4,
              "system:index": "85"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.110652180506165, -11.378290526633764],
                  [-38.10481569368976, -11.36516379574112],
                  [-38.11099550326007, -11.363817430175564]]]),
            {
              "reference": 4,
              "system:index": "86"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.52620984874123, -12.577140464367977],
                  [-39.529128092149435, -12.58124521404107],
                  [-39.52354909739846, -12.58183160149441]]]),
            {
              "reference": 4,
              "system:index": "87"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.410252588609396, -12.578313256684657],
                  [-39.40793516002053, -12.580072435116278],
                  [-39.40690519175881, -12.578229485982524]]]),
            {
              "reference": 4,
              "system:index": "88"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.48638440928811, -12.586355116822277],
                  [-39.486899393418966, -12.591297385006621],
                  [-39.48398115001076, -12.586606420891625]]]),
            {
              "reference": 4,
              "system:index": "89"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.56033059097139, -13.016284333932814],
                  [-39.560416421659866, -13.018124085081011],
                  [-39.55938645339815, -13.017873210728633]]]),
            {
              "reference": 4,
              "system:index": "90"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.54488106704561, -13.01193577693643],
                  [-39.54264946914522, -13.012521164052018],
                  [-39.54316445327608, -13.011601269392678]]]),
            {
              "reference": 4,
              "system:index": "91"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.255275390935324, -12.09595427447807],
                  [-39.25510372955837, -12.098870655051554],
                  [-39.25272192795315, -12.099521066523488]]]),
            {
              "reference": 4,
              "system:index": "92"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.31660141785183, -12.115235365627466],
                  [-39.31557144959011, -12.118759941248811],
                  [-39.311966560674094, -12.116242391983326]]]),
            {
              "reference": 4,
              "system:index": "93"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.29900612671413, -12.1155290820404],
                  [-39.299435280156516, -12.11863406434962],
                  [-39.29634537537136, -12.117878801707498]]]),
            {
              "reference": 4,
              "system:index": "94"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.2943712695364, -12.114102456435711],
                  [-39.296431206059836, -12.116536107288049],
                  [-39.292225502324484, -12.117543128735967]]]),
            {
              "reference": 4,
              "system:index": "95"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.30655922730007, -12.118382310373091],
                  [-39.306215904546164, -12.120312418122838],
                  [-39.303211830449484, -12.120312418122838]]]),
            {
              "reference": 4,
              "system:index": "96"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.546949620824556, -12.628075440920803],
                  [-39.55175613937924, -12.638125774125388],
                  [-39.54282974777768, -12.637790769385342]]]),
            {
              "reference": 4,
              "system:index": "97"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.339239354711275, -12.658560232327352],
                  [-39.33477615891049, -12.667939435711341],
                  [-39.32687973557065, -12.658895209816365]]]),
            {
              "reference": 4,
              "system:index": "98"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.865085199612615, -12.93559222695237],
                  [-39.86800344302082, -12.939272910014166],
                  [-39.86371190859699, -12.940945929812242]]]),
            {
              "reference": 4,
              "system:index": "99"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.931003168362615, -12.94747059975542],
                  [-39.928771570462224, -12.939105607417023],
                  [-39.934779718655584, -12.942786238624953]]]),
            {
              "reference": 4,
              "system:index": "100"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.949714258450506, -12.950649223237413],
                  [-39.95263250185871, -12.9464668154957],
                  [-39.95555074526691, -12.947637896738975]]]),
            {
              "reference": 4,
              "system:index": "101"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.615932062405584, -13.335545240791172],
                  [-40.612155512112615, -13.340639684260468],
                  [-40.60812146975422, -13.331954011196126]]]),
            {
              "reference": 4,
              "system:index": "102"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.56340368105793, -13.29946348845282],
                  [-40.56537778689289, -13.302052867345033],
                  [-40.56117208315754, -13.302804617325338]]]),
            {
              "reference": 4,
              "system:index": "103"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.58709295107746, -13.323351546664913],
                  [-40.59284360720539, -13.319008438656052],
                  [-40.597650125760076, -13.323351546664913]]]),
            {
              "reference": 4,
              "system:index": "104"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.57327421023273, -13.33237159877374],
                  [-40.567180231350896, -13.33237159877374],
                  [-40.57138593508625, -13.330033099049738]]]),
            {
              "reference": 4,
              "system:index": "105"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.62769086672687, -13.398368507629355],
                  [-40.62949331118488, -13.400873332277978],
                  [-40.62734754397297, -13.401541281111639]]]),
            {
              "reference": 4,
              "system:index": "106"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.59078367068195, -13.423999980062117],
                  [-40.593186929959295, -13.42658802231697],
                  [-40.58975370242023, -13.427506353183425]]]),
            {
              "reference": 4,
              "system:index": "107"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.59433318586833, -13.484848995262896],
                  [-40.594934000687665, -13.477086673003965],
                  [-40.599912180619306, -13.480008006664733]]]),
            {
              "reference": 4,
              "system:index": "108"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.4951987406779, -13.613266192969435],
                  [-40.49451209517009, -13.615935598920698],
                  [-40.48953391523845, -13.614600899710222]]]),
            {
              "reference": 4,
              "system:index": "109"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.52434797597972, -15.157680128775034],
                  [-41.51645155263988, -15.14575016578462],
                  [-41.525549605618394, -15.148898415790306]]]),
            {
              "reference": 4,
              "system:index": "110"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.49894209219066, -15.160331140299036],
                  [-41.4984271080598, -15.16894669820108],
                  [-41.48898573232738, -15.161822319676752]]]),
            {
              "reference": 4,
              "system:index": "111"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.51696653677074, -15.164141911138689],
                  [-41.50975675893871, -15.158674261990836],
                  [-41.51387663198558, -15.155691848325237]]]),
            {
              "reference": 4,
              "system:index": "112"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.607432082425035, -15.133653822385725],
                  [-41.612410262356676, -15.127688248018922],
                  [-41.612925246487535, -15.134648068450405]]]),
            {
              "reference": 4,
              "system:index": "113"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.55688664077118, -15.179458617887583],
                  [-41.54967686293915, -15.172168915932557],
                  [-41.5524234449704, -15.171340524794033]]]),
            {
              "reference": 4,
              "system:index": "114"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.5330257093747, -15.169352372811419],
                  [-41.53319737075165, -15.158251513880773],
                  [-41.53954884169892, -15.161399577860015]]]),
            {
              "reference": 4,
              "system:index": "115"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.47534748671845, -15.14300759409317],
                  [-41.47929569838837, -15.140522068288483],
                  [-41.48427387832001, -15.145824488063393]]]),
            {
              "reference": 4,
              "system:index": "116"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.45852467177704, -15.164381911028357],
                  [-41.46006962416962, -15.160571144514398],
                  [-41.465219465478214, -15.166038744609676]]]),
            {
              "reference": 4,
              "system:index": "117"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.42577385998847, -15.47076210217527],
                  [-41.4329836378205, -15.455540923080761],
                  [-41.449463130008, -15.478372272121902]]]),
            {
              "reference": 4,
              "system:index": "118"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.45564293957831, -15.410863619279185],
                  [-41.449806452761905, -15.400272034404177],
                  [-41.46113610364081, -15.396631052521245]]]),
            {
              "reference": 4,
              "system:index": "119"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.426117182742374, -15.42244754728204],
                  [-41.43126702405097, -15.413511431186256],
                  [-41.43916344739081, -15.421454664475867]]]),
            {
              "reference": 4,
              "system:index": "120"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.36603570080878, -15.420461776923492],
                  [-41.371872187625186, -15.416821148629477],
                  [-41.37496209241034, -15.424433298654662]]]),
            {
              "reference": 4,
              "system:index": "121"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.34577965832831, -15.432045169659872],
                  [-41.347152949343936, -15.43866396102616],
                  [-41.33856988049628, -15.439987693963463]]]),
            {
              "reference": 4,
              "system:index": "122"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.632506859227234, -11.907713109405165],
                  [-38.638000023289734, -11.908888878892562],
                  [-38.63456679575067, -11.916783199361072],
                  [-38.62907363168817, -11.90872091213447]]]),
            {
              "reference": 4,
              "system:index": "123"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.59542800180536, -11.877813262638682],
                  [-38.60813094369989, -11.862358122163972],
                  [-38.614482414647156, -11.875797424451328]]]),
            {
              "reference": 4,
              "system:index": "124"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.60109282724481, -11.849758174872466],
                  [-38.60383940927606, -11.848918157707866],
                  [-38.604526054783875, -11.853118217689085]]]),
            {
              "reference": 4,
              "system:index": "125"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.598002922459656, -11.84757412487018],
                  [-38.596801292820984, -11.849590171646263],
                  [-38.592509758397156, -11.844886039353801]]]),
            {
              "reference": 4,
              "system:index": "126"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.614482414647156, -11.908888878892562],
                  [-38.62117720834833, -11.909560744886505],
                  [-38.62134886972528, -11.919974455257442]]]),
            {
              "reference": 4,
              "system:index": "127"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.40170614607799, -15.628487273022534],
                  [-41.39827291853893, -15.647001697908127],
                  [-41.36531393416393, -15.63311603622858]]]),
            {
              "reference": 4,
              "system:index": "128"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.85454810792032, -10.25489921341955],
                  [-36.856007229624424, -10.249662675907599],
                  [-36.85819591218058, -10.253843466856093]]]),
            {
              "reference": 4,
              "system:index": "129"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.84982742005411, -10.246917682152871],
                  [-36.85210193329874, -10.250549514961593],
                  [-36.84918368989054, -10.252112034873985]]]),
            {
              "reference": 4,
              "system:index": "130"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.878505445984196, -10.294277360551787],
                  [-36.874814726379704, -10.294446258631734],
                  [-36.877389647034, -10.292503925252994]]]),
            {
              "reference": 4,
              "system:index": "131"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.88889095928986, -10.314544484071604],
                  [-36.88957760479767, -10.312433386201075],
                  [-36.890500284698795, -10.314586705884635]]]),
            {
              "reference": 4,
              "system:index": "132"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.888032652405094, -10.316740010840034],
                  [-36.887775160339665, -10.318851079829015],
                  [-36.88657353070099, -10.318091096624288]]]),
            {
              "reference": 4,
              "system:index": "133"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.88657353070099, -10.319779945697872],
                  [-36.88657353070099, -10.322397643847987],
                  [-36.88485691693146, -10.321890994292943]]]),
            {
              "reference": 4,
              "system:index": "134"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.889882511066645, -10.315494473495042],
                  [-36.89078373329565, -10.31486114753128],
                  [-36.89180920269806, -10.31608557657833]]]),
            {
              "reference": 4,
              "system:index": "135"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.88900274650976, -10.31754221872393],
                  [-36.889388984607905, -10.319737724581497],
                  [-36.88880962746069, -10.319399955446562]]]),
            {
              "reference": 4,
              "system:index": "136"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.8850116194956, -10.323938697895457],
                  [-36.88451809303686, -10.322460974984994],
                  [-36.88550514595434, -10.323094285653811]]]),
            {
              "reference": 4,
              "system:index": "137"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.242403086647116, -10.551373015369613],
                  [-37.2417164411393, -10.56116086851165],
                  [-37.234163340553366, -10.559473329857699]]]),
            {
              "reference": 4,
              "system:index": "138"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.223177012428366, -10.551035497635565],
                  [-37.22935682199868, -10.540572264251095],
                  [-37.23382001779946, -10.547997821365497]]]),
            {
              "reference": 4,
              "system:index": "139"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.492342051490866, -10.827674647837426],
                  [-37.49096876047524, -10.821604798231984],
                  [-37.49680524729165, -10.819581487711622]]]),
            {
              "reference": 4,
              "system:index": "140"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.503328379615866, -10.825651378297328],
                  [-37.50195508860024, -10.820930362909255],
                  [-37.508821543678366, -10.821604798231984]]]),
            {
              "reference": 4,
              "system:index": "141"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.51789168299036, -10.810322407105469],
                  [-37.513771809943485, -10.817404152855923],
                  [-37.50862196863489, -10.813357461470744]]]),
            {
              "reference": 4,
              "system:index": "142"
            })]),
    campo = /* color: #00ff00 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.49327006594023, -10.787254475736031],
                  [-37.48400035158476, -10.785062304614106],
                  [-37.49078097597441, -10.781436755774555]]]),
            {
              "reference": 12,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.60103396179624, -10.70367984904686],
                  [-37.599145686649756, -10.710342423234096],
                  [-37.59185007812925, -10.707137658998397]]]),
            {
              "reference": 12,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.593652522587256, -10.721811827890807],
                  [-37.58876017334409, -10.731847200382724],
                  [-37.587215220951514, -10.727883689688623],
                  [-37.5920217395062, -10.719281849511832]]]),
            {
              "reference": 12,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.618629252933935, -10.724932105425852],
                  [-37.60729960205503, -10.727968020244306],
                  [-37.611076152348, -10.724510448180043],
                  [-37.619401729130225, -10.723667131925328]]]),
            {
              "reference": 12,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.60429552795835, -10.750652085178945],
                  [-37.61699846985288, -10.741544932919044],
                  [-37.61579684021421, -10.745929892375125],
                  [-37.604123866581396, -10.754025034799394]]]),
            {
              "reference": 12,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.35551494740511, -10.748470341335384],
                  [-37.3603214659598, -10.733460150073924],
                  [-37.36547130726839, -10.743748114401427]]]),
            {
              "reference": 12,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.35448497914339, -10.774778538082595],
                  [-37.35448497914339, -10.785402350863732],
                  [-37.34710353993441, -10.78337879639615],
                  [-37.347446862688315, -10.776970784127535]]]),
            {
              "reference": 12,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.3548283018973, -10.788437657037836],
                  [-37.35637325428988, -10.80293925237425],
                  [-37.35105175160433, -10.797374769478681]]]),
            {
              "reference": 12,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.36821788929964, -10.811875933328146],
                  [-37.36152309559847, -10.805299910937745],
                  [-37.366672936907065, -10.804625438956478]]]),
            {
              "reference": 12,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.44666713856722, -10.829242683851081],
                  [-37.43327755116488, -10.83109732588261],
                  [-37.43293422841097, -10.823004258204282]]]),
            {
              "reference": 12,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.41199154042269, -10.831265929134144],
                  [-37.395168725481284, -10.828568265719518],
                  [-37.397400323381675, -10.825196152286853],
                  [-37.408901635637534, -10.823341473722024]]]),
            {
              "reference": 12,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.377659265032065, -10.826545002214546],
                  [-37.37645763539339, -10.81727153635967],
                  [-37.38160747670199, -10.825027545618946]]]),
            {
              "reference": 12,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.33857521445067, -10.790309681525635],
                  [-37.32587227255614, -10.797560521515994],
                  [-37.324498981540515, -10.792501814390256],
                  [-37.334970325534655, -10.788117532676372]]]),
            {
              "reference": 12,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.3538530769995, -10.738227098155372],
                  [-37.346471637790515, -10.741937493368692],
                  [-37.35213646322997, -10.72928823168606]]]),
            {
              "reference": 12,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.29874811769306, -10.892054247884547],
                  [-37.30097971559345, -10.897532686229145],
                  [-37.29488573671161, -10.894667054132762]]]),
            {
              "reference": 12,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.32947550416767, -10.890621408917221],
                  [-37.327329736955754, -10.89416135148722],
                  [-37.32089243532001, -10.893655647982632],
                  [-37.32767305970966, -10.888514280265133]]]),
            {
              "reference": 12,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.29102335573017, -10.890705693753208],
                  [-37.28956423402607, -10.894414202917375],
                  [-37.28750429750263, -10.892054247884547]]]),
            {
              "reference": 12,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.366196834986674, -10.864196937732059],
                  [-37.36379357570933, -10.867821485394344],
                  [-37.36199113125132, -10.862763964889577]]]),
            {
              "reference": 12,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.375981533473, -10.862258208126665],
                  [-37.37606736416148, -10.866304238240444],
                  [-37.372634136622416, -10.862595379397115]]]),
            {
              "reference": 12,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.40370484585093, -10.835283273865528],
                  [-37.40542145962046, -10.830815315568469],
                  [-37.40576478237437, -10.83469316998745]]]),
            {
              "reference": 12,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.37149631507372, -10.828291243712712],
                  [-37.373642082285635, -10.82154697266228],
                  [-37.37492954261278, -10.827701126056278]]]),
            {
              "reference": 12,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.230223840358526, -10.97315235673338],
                  [-37.23236960757044, -10.972941703153829],
                  [-37.23408622133997, -10.97492184087274],
                  [-37.23133963930872, -10.976017230505464]]]),
            {
              "reference": 12,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.23104752448695, -10.953694185842718],
                  [-37.23070420173304, -10.955505919624466],
                  [-37.22748555091517, -10.954663254128567],
                  [-37.23048962501185, -10.951798173500164]]]),
            {
              "reference": 12,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.25413597968714, -10.94351356759706],
                  [-37.25267685798304, -10.94532536365996],
                  [-37.25044526008265, -10.943850646773187],
                  [-37.25220478919642, -10.942038841693224]]]),
            {
              "reference": 12,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.3629400553277, -11.115106865012907],
                  [-37.36057971139459, -11.121212799303484],
                  [-37.35783312936334, -11.117086043927594]]]),
            {
              "reference": 12,
              "system:index": "24"
            })]),
    agro = /* color: #0b4a8b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.60431284525429, -15.470969090318993],
                  [-41.60431284525429, -15.463027753072847],
                  [-41.60963434793984, -15.47179629543201]]]),
            {
              "reference": 21,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.508869119668354, -15.466502125593491],
                  [-41.496337839150776, -15.484534836635934],
                  [-41.494621225381245, -15.480399032617687]]]),
            {
              "reference": 21,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.569293924355854, -15.502731391536292],
                  [-41.5636290989164, -15.510340384762562],
                  [-41.56191248514687, -15.505378029673755]]]),
            {
              "reference": 21,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.408378849939645, -15.357661885237857],
                  [-41.41249872298652, -15.3652761991396],
                  [-41.406404744104684, -15.35948272472073]]]),
            {
              "reference": 21,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.19976495319602, -15.527801304751138],
                  [-41.19736169391868, -15.522839369513694],
                  [-41.2027690272927, -15.526312736714502]]]),
            {
              "reference": 21,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.76345369417804, -10.36868260015265],
                  [-36.7613937576546, -10.361252753623113],
                  [-36.76517030794757, -10.361928201497864]]]),
            {
              "reference": 21,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.6197512159455, -15.437340219642653],
                  [-41.596405268679874, -15.449584505105074],
                  [-41.59571862317206, -15.436347408062625],
                  [-41.5977785596955, -15.430059491087043],
                  [-41.61889281792122, -15.426088887255432],
                  [-41.63588738537909, -15.432045169659872]]]),
            {
              "reference": 21,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.476466667576844, -11.88587646619343],
                  [-38.498439323826844, -11.866053996332878],
                  [-38.507365715428406, -11.87898916135933]]]),
            {
              "reference": 21,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.5070223926745, -11.857150214479233],
                  [-38.494662773533875, -11.842533942829514],
                  [-38.5070223926745, -11.843373979626941]]]),
            {
              "reference": 21,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.51354552499872, -11.882348844016006],
                  [-38.52401686899286, -11.862862107954227],
                  [-38.535346519871766, -11.87478949976448]]]),
            {
              "reference": 21,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.523158562108094, -11.818507797964953],
                  [-38.53294326059442, -11.8272448220708],
                  [-38.51200057260614, -11.830941171372963]]]),
            {
              "reference": 21,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.33244277231317, -11.91896669429064],
                  [-38.32746459238153, -11.8988106896485],
                  [-38.3393092273913, -11.901498243317246]]]),
            {
              "reference": 21,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.46977187387567, -11.877141318233559],
                  [-38.469943535252625, -11.884868578806753],
                  [-38.45415068857294, -11.88050102368373]]]),
            {
              "reference": 21,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.35802031747919, -11.873109617001278],
                  [-38.34274245493036, -11.867565930419914],
                  [-38.34600402109247, -11.849590171646263],
                  [-38.35269881479364, -11.852782215268231]]]),
            {
              "reference": 21,
              "system:index": "13"
            })]),
    flo = /* color: #ffc82d */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.68241877176796, -15.421496221080808],
                  [-41.676153131509174, -15.420586074521157],
                  [-41.67632479288613, -15.418600286367086],
                  [-41.67975802042519, -15.41975866509723],
                  [-41.68267626383339, -15.419096735185224]]]),
            {
              "reference": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.65031809427773, -15.394934850619505],
                  [-41.6500606022123, -15.39989985059512],
                  [-41.648944803262104, -15.398741361199201],
                  [-41.64731402018105, -15.395927860093419]]]),
            {
              "reference": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.64800066568886, -15.38665958740796],
                  [-41.6460265598539, -15.385583779027378],
                  [-41.644395776772846, -15.385418269552375],
                  [-41.643451639199604, -15.384342454758155],
                  [-41.6445674381498, -15.383432145591003],
                  [-41.64877314188515, -15.385418269552375]]]),
            {
              "reference": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.237702117502664, -15.554180254794248],
                  [-41.23632882648704, -15.552609189372426],
                  [-41.23881791645286, -15.552278437229502],
                  [-41.23933290058372, -15.554262942115876]]]),
            {
              "reference": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.23658631855247, -15.541942165047615],
                  [-41.23675797992942, -15.542934469685918],
                  [-41.23375390583274, -15.542769085911472]]]),
            {
              "reference": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.15084146076438, -15.573610861785651],
                  [-41.15169976764915, -15.572618705051859],
                  [-41.15221475178001, -15.57005561132878],
                  [-41.153502212107156, -15.57253602510791],
                  [-41.1518714290261, -15.574851050969222]]]),
            {
              "reference": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.11590837055442, -15.576835338099453],
                  [-41.108870254099344, -15.579398347289356],
                  [-41.10672448688743, -15.577331406888822],
                  [-41.11213182026145, -15.576587303255776],
                  [-41.11444924885032, -15.576173911184481]]]),
            {
              "reference": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.01544764491924, -15.568103171665596],
                  [-41.01321604701885, -15.567359034632029],
                  [-41.014846830099906, -15.565457338869615],
                  [-41.01690676662334, -15.56636684773234]]]),
            {
              "reference": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.02420237514385, -15.556940833504834],
                  [-41.02574732753643, -15.554790980316604],
                  [-41.02677729579815, -15.555452475996997],
                  [-41.02591898891338, -15.557436950282273]]]),
            {
              "reference": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.04523089382061, -15.571493095188274],
                  [-41.03742030116924, -15.574469567321426],
                  [-41.037334470480765, -15.572237217261543],
                  [-41.043857602804984, -15.569591437654829]]]),
            {
              "reference": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.02342989894756, -15.599850508634294],
                  [-41.02497485134014, -15.598941147988608],
                  [-41.026090650290335, -15.600594527983505],
                  [-41.0229149148167, -15.601751886053616]]]),
            {
              "reference": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.019825010031546, -15.610349198747953],
                  [-41.01948168727764, -15.60770391014488],
                  [-41.02205660793194, -15.609770544781616]]]),
            {
              "reference": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.99579241725811, -15.599767839651198],
                  [-40.99879649135479, -15.603322575849937],
                  [-40.99604990932354, -15.603322575849937],
                  [-40.99493411037334, -15.6018345542374],
                  [-40.9939899728001, -15.6018345542374],
                  [-40.99476244899639, -15.600181184233655]]]),
            {
              "reference": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.055530576437796, -15.612829125823062],
                  [-41.05338480922588, -15.610762522009942],
                  [-41.056560544699515, -15.610266533995594]]]),
            {
              "reference": 3,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.01714507085839, -15.511816442456015],
                  [-41.018003377743156, -15.513387818802071],
                  [-41.012252721615226, -15.516199725564443],
                  [-41.013540181942375, -15.51173373810645]]]),
            {
              "reference": 3,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.0065020654873, -15.506688710133764],
                  [-41.01139441473046, -15.50503457576968],
                  [-41.00847617132226, -15.507846596305235]]]),
            {
              "reference": 3,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-36.992793293787415, -10.374761434382423],
                  [-36.989016743494446, -10.382528661842718],
                  [-36.98386690218585, -10.379151630121395]]]),
            {
              "reference": 3,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.55073983661523, -15.372935470223547],
                  [-41.53872354022851, -15.362010899643627],
                  [-41.551083159369135, -15.358038186613273]]]),
            {
              "reference": 3,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.49683816425195, -15.345126346845902],
                  [-41.50473458759179, -15.324267072963188],
                  [-41.512631010931635, -15.333207016756699]]]),
            {
              "reference": 3,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.45144067652607, -12.99480631717644],
                  [-39.451269015149116, -12.996144435223643],
                  [-39.450067385510444, -12.995391744709538]]]),
            {
              "reference": 3,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.435117258744306, -13.59274412939198],
                  [-40.43820716352946, -13.594078951825262],
                  [-40.436147227006025, -13.599918711545271]]]),
            {
              "reference": 3,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.441640391068525, -13.603923034992931],
                  [-40.44473029585368, -13.607426762455754],
                  [-40.44301368208415, -13.60876150213356]]]),
            {
              "reference": 3,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.60203452287334, -15.029317920772849],
                  [-41.61302085099834, -15.01804394374303],
                  [-41.62950034318584, -15.038601925252703]]]),
            {
              "reference": 3,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.710524513107714, -15.066783033618622],
                  [-41.71636099992412, -15.075070885160125],
                  [-41.69232840715068, -15.078717437553241]]]),
            {
              "reference": 3,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.553969337326464, -15.054516421093862],
                  [-41.56838889299053, -15.036280962013663],
                  [-41.58177848039287, -15.045564663396608]]]),
            {
              "reference": 3,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.5999745863499, -15.052858716560989],
                  [-41.61302085099834, -15.056505649505132],
                  [-41.611647559982714, -15.075402392506545]]]),
            {
              "reference": 3,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.52959342179912, -15.086341845036014],
                  [-41.5175771254124, -15.073081830232566],
                  [-41.53611655412334, -15.065125424576483]]]),
            {
              "reference": 3,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.587135554324405, -15.423771383640142],
                  [-41.58953881360175, -15.436016469813628],
                  [-41.577179194461124, -15.43237611424185]]]),
            {
              "reference": 3,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.30282919295299, -15.751444497394223],
                  [-41.30008261092174, -15.773912523602908],
                  [-41.263003753499866, -15.764000465674172]]]),
            {
              "reference": 3,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.386599944906116, -15.75871383682237],
                  [-41.391406463460804, -15.77655565725827],
                  [-41.37355368025768, -15.767304538785035]]]),
            {
              "reference": 3,
              "system:index": "29"
            })]),
    varzea = /* color: #25fffa */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.50174810252541, -12.589035680873105],
                  [-39.49874402842873, -12.589203215196417],
                  [-39.501662271836935, -12.587695402348183]]]),
            {
              "reference": 11,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.48260785899514, -12.597496027433293],
                  [-39.476428049424825, -12.60034400208931],
                  [-39.47531225047463, -12.599003782663143]]]),
            {
              "reference": 11,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.45265294871682, -12.611903103697301],
                  [-39.449992197374044, -12.6128244589159],
                  [-39.44793226085061, -12.611316785014]]]),
            {
              "reference": 11,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.4594177402762, -12.60842402878503],
                  [-39.45778695719515, -12.610350521178047],
                  [-39.456842819621905, -12.608842832711776]]]),
            {
              "reference": 11,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.454868713786944, -12.609931719716561],
                  [-39.4495472111014, -12.609429157058804],
                  [-39.4498905338553, -12.60842402878503]]]),
            {
              "reference": 11,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.326779164986185, -12.55263290012202],
                  [-39.3234317681356, -12.548946595178037],
                  [-39.32420424433189, -12.548360132705424]]]),
            {
              "reference": 11,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.33390311212974, -12.55724070704018],
                  [-39.33210066767173, -12.558162258519967],
                  [-39.33338812799888, -12.556570485708416]]]),
            {
              "reference": 11,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.26581452607063, -12.556361041184132],
                  [-39.26628659485725, -12.557952815291747],
                  [-39.26551411866096, -12.55707315187095]]]),
            {
              "reference": 11,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.20976708649543, -12.565367001709074],
                  [-39.209466679085764, -12.566539847770628],
                  [-39.20908044098762, -12.564822464218587]]]),
            {
              "reference": 11,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.2201525998011, -12.56825721984785],
                  [-39.21852181672004, -12.568634202426326],
                  [-39.21998093842414, -12.567838349667646]]]),
            {
              "reference": 11,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.25800393341926, -12.560382346253176],
                  [-39.25680230378059, -12.56067556395497],
                  [-39.256888134469065, -12.560005351573885]]]),
            {
              "reference": 11,
              "system:index": "10"
            })]),
    Duvida = 
    /* color: #d02ed6 */
    /* shown: false */
    ee.Geometry.Point([-41.60842156506659, -15.434361770651808]),
    reg22_zoom = 
    /* color: #1fc9d6 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-42.08301919334149, -15.29578680578968],
          [-41.13819497459149, -16.268413510658338],
          [-40.43506997459149, -15.951767030797528],
          [-39.20460122459149, -13.294424343604812],
          [-37.75440591209149, -12.351751116295796],
          [-36.91944497459149, -10.996141979346957],
          [-36.41407388084149, -10.132141698892514],
          [-37.33692544334149, -9.504270682474234],
          [-38.69923013084149, -11.319501412208442],
          [-39.73194497459149, -11.620974533796792],
          [-39.75391763084149, -12.437593199073971],
          [-40.87452309959149, -13.23026442038922],
          [-40.41309731834149, -14.105622246674029],
          [-41.95118325584149, -14.616485635092474],
          [-42.39063638084149, -14.786511931893505]]]);

// Define the region ID (reg_22)
var regiaoID = 'reg_22'; // old 11

// Define whether to collect data (false)
var coleta = false;   // true or false

// Center the map on the region (commented out)
//Map.centerObject (reg22_zoom)

// Define the years to process (2016-2023)
var anos = [2016,2017,2018,2019,2020,2021,2022,2023]

// If collecting data, only process 2023
if (coleta) {var anos = [2023]}

// Define the number of trees for the Random Forest classifier (100)
var RFtrees = 100; 

// If collecting data, use 200 trees
if (coleta) {var RFtrees = 200}

// Define the output version (3)
var versao_out = 3;

// Define the Sentinel-2 version (S2_v2)
var versao_pt = 'S2_v2';

// Define the stable version (3)
var versao_estavel = '3'

// Define the input directory for training data
var dir_pt_in = 'projects/mapbiomas-workspace/AMOSTRAS/col9/MATA_ATLANTICA/teste/';

// Load the 250,000 biomes feature collection
var bioma250mil = ee.FeatureCollection('projects/mapbiomas-workspace/AUXILIAR/biomas_IBGE_250mil');

// Filter the collection to only include the Atlantic Forest biome
var bioma250mil_MA_vetor = bioma250mil.filterMetadata('Bioma','equals', 'Mata Atlntica');

// Load the biomes raster
var biomes = ee.Image('projects/mapbiomas-workspace/AUXILIAR/biomas-raster-41');

// Mask the biomes raster to only include the Atlantic Forest biome
var bioma250mil_MA = biomes.mask(biomes.eq(2));

// Add the Atlantic Forest biome layer to the map (commented out)
//Map.addLayer(bioma250mil_MA,{},'layer bioma',false)

// Import the palettes module
var palettes = require('users/mapbiomas/modules:Palettes.js');

// Define the visualization parameters for the classification
var vis = {
    'min': 0,
    'max': 62,
    'palette': palettes.get('classification7')
};

// Load the Atlantic Forest regions feature collection
var regioesCollection = ee.FeatureCollection('projects/mapbiomas-workspace/AUXILIAR/Mata_Atlantica_col6_PLANET');

// Define the visualization parameters for the median composite
var visParMedian2 = {bands: ['swir1_median', 'nir_median', 'red_median'],gain: [0.08, 0.06, 0.2],gamma: 0.85}

// Define the biome name (MATAATLANTICA)
var bioma = "MATAATLANTICA";

// Define the output directory for the classification
var dirout = 'projects/mapbiomas-workspace/COLECAO7/classificacao-ma/';

// Load the Sentinel-2 clusters image
var S2_cluster = ee.Image('projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/mosaicos_MA_S2_clusters_2106_2023')

// Filter the regions collection to only include the specified region
var limite = regioesCollection.filterMetadata('reg_id', "equals", regiaoID);

// Define the stable map from collection 6 (commented out)
//var limite = reg_04_rev

// Load the stable map from collection 6
var mapa_estavel_col6 = ee.Image('projects/mapbiomas-workspace/AMOSTRAS/col7/MATA_ATLANTICA/MA_amostras_estaveis85a20_col6_v1')

// Add the stable map layer to the map (commented out)
Map.addLayer(mapa_estavel_col6, vis, 'mapa_estavel_col6', false);

// Create a blank image
var blank = ee.Image(0).mask(0);
// Outline the region in red
var outline = blank.paint(limite, 'AA0000', 2); 
// Define the visualization parameters for the outline
var visPar = {'palette':'000000','opacity': 0.6};
// Add the outline layer to the map (commented out)
//Map.addLayer(outline, visPar, regiaoID, false);

// Define a function to shuffle a feature collection
var shuffle = function (collection, seed) {
    // Add a random column to the collection
    collection = collection.randomColumn('random', seed || 1)
        // Sort the collection by the random column
        .sort('random', true)
        // Map over the collection and set a new ID based on the random value
        .map(function (feature) {
                var rescaled = ee.Number(feature.get('random')).multiply(1000000000).round();
                return feature.set('new_id', rescaled)});
    // Get a list of the new IDs
    var randomIdList = ee.List(collection.reduceColumns(ee.Reducer.toList(), ['new_id']).get('list'));
    // Create a sequential list of IDs
    var sequentialIdList = ee.List.sequence(1, collection.size());
    // Remap the collection using the new and sequential IDs
    var shuffled = collection.remap(randomIdList, sequentialIdList, 'new_id');
    // Return the shuffled collection
    return shuffled;
};

// Define the visualization parameters for the hand-labeled data
var vis_hand = {
    'min': 0,
    'max': 60,
    'palette': 'blue,white,green,orange,red,brown'
};

// Loop through the years
for (var i_ano=0;i_ano<anos.length; i_ano++){
  // Get the current year
  var ano = anos[i_ano];

  // Define the asset path for the Sentinel-2 mosaics
  var asset = 'projects/mapbiomas-mosaics/assets/SENTINEL/BRAZIL/mosaics-3';
  // Define the band names to use for classification
  var bandNames = ee.List([
  //  THE 60 MOST IMPORTANT BANDS FOR THIS REGION
  'latitude','longitude','cvi_median_wet','green_median_texture_'+ano,'nddi_median','green_median_texture','avi_median','ndvi_median_wet_'+ano,'swir2_stdDev','red_edge_2_median_wet','swir1_median_dry','wetness_median','spri_median_1','msi_median_dry','lswi_median_dry','awei_median_wet','iia_median','osavi_median_wet','red_edge_1_median','spri_median','ndvi_median_dry_'+ano,'bsi_median','blue_median_wet','blue_median','gvmi_median_wet_1','red_edge_1_median_wet','red_edge_4_median_wet','ndvi_median_wet','red_edge_3_median','ratio_median_dry','dswi5_median','brightness_median','ratio_median_wet','co2flux_median','wetness_median_wet','nir_stdDev','swir1_median_wet','gcvi_median_wet','cvi_median','swir2_median_wet','nddi_median_dry','ri_median_wet','mbi_median','green_median_dry','gvmi_median','iia_median_wet','mbi_median_dry','rvi_median_wet','brba_median','red_median_wet','red_edge_4_median','lai_median','cvi_median_dry','dswi5_median_dry','ndwi_median_'+ano,'gvmi_median_1','afvi_median_wet','afvi_median','red_edge_4_stdDev','nir_median',

  // ALL 143 BANDS TO FEATURE IMPORTANCE
  //    'blue_median','afvi_median','afvi_median_dry','afvi_median_wet','avi_median','avi_median_dry','avi_median_wet','awei_median','awei_median_dry','awei_median_wet','blue_median_dry','blue_median_wet','blue_stdDev','brba_median','brba_median_dry','brba_median_wet','brightness_median','brightness_median_dry','brightness_median_wet','bsi_median','bsi_median_1','bsi_median_2','clusters_2023','co2flux_median','cvi_median','cvi_median_dry','cvi_median_wet','dswi5_median','dswi5_median_dry','dswi5_median_wet','evi_median','evi_median_dry','evi_median_wet','gcvi_median','gcvi_median_dry','gcvi_median_wet','gemi_median','gemi_median_dry','gemi_median_wet','gli_median','gli_median_dry','gli_median_wet','green_median','green_median_dry','green_median_texture','green_median_texture_2023','green_median_wet','green_min','green_stdDev','gvmi_median','gvmi_median_1','gvmi_median_dry','gvmi_median_dry_1','gvmi_median_wet','gvmi_median_wet_1','iia_median','iia_median_dry','iia_median_wet','lai_median','latitude','longitude','lswi_median','lswi_median_dry','lswi_median_wet','mbi_median','mbi_median_dry','mbi_median_wet','msi_median','msi_median_dry','msi_median_wet','nddi_median','nddi_median_dry','nddi_median_wet','ndvi_median','ndvi_median_dry','ndvi_median_dry_2023','ndvi_median_wet','ndvi_median_wet_2023','ndwi_median','ndwi_median_2023','ndwi_median_dry','ndwi_median_wet','nir_median','nir_median_contrast','nir_median_dry','nir_median_dry_contrast','nir_median_wet','nir_stdDev','osavi_median','osavi_median_dry','osavi_median_wet','ratio_median','ratio_median_dry','ratio_median_wet','red_edge_1_median','red_edge_1_median_dry','red_edge_1_median_wet','red_edge_1_stdDev','red_edge_2_median','red_edge_2_median_dry','red_edge_2_median_wet','red_edge_2_stdDev','red_edge_3_median','red_edge_3_median_dry','red_edge_3_median_wet','red_edge_3_stdDev','red_edge_4_median','red_edge_4_median_dry','red_edge_4_median_wet','red_edge_4_stdDev','red_median','red_median_contrast','red_median_dry','red_median_dry_contrast','red_median_wet','red_min','red_stdDev','ri_median','ri_median_dry','ri_median_wet','rvi_median','rvi_median_1','rvi_median_wet','shape_median','shape_median_dry','shape_median_wet','spri_median','spri_median_1','spri_median_wet','swir1_median','swir1_median_dry','swir1_median_wet','swir1_stdDev','swir2_median','swir2_median_dry','swir2_median_wet','swir2_stdDev','ui_median','ui_median_dry','ui_median_wet','wetness_median','wetness_median_dry','wetness_median_wet',
  ])

  // Load the Sentinel-2 mosaics for the current year
  var collection = ee.ImageCollection(asset)
        // Filter the collection by version and year
        .filter(ee.Filter.eq('version', '3'))
        .filter(ee.Filter.eq('year', ano))
        // Filter the collection by biome
        .filter(ee.Filter.inList('biome', [
            'MATAATLANTICA',
        ])); 

  // Create a mosaic of the Sentinel-2 images
  var mosaicoTotal = collection.mosaic()

  // Import the function to add indices for the Caatinga biome
  var addIndexCaatinga = require('users/marcosrosaUSP/MapBiomas_col9_MataAtlan:Mata_Atlantica_SENTINEL2/processa_Bandas_Sentinel2_CAATINGA');

  // Add the Caatinga indices to the mosaic
  mosaicoTotal = addIndexCaatinga.get(mosaicoTotal);

  // Add the Sentinel-2 clusters bands to the mosaic
  mosaicoTotal = mosaicoTotal.addBands(S2_cluster.select([
    'clusters_'+ano, 'ndvi_median_dry_'+ano,'ndvi_median_wet_'+ano,'ndwi_median_'+ano, 'green_median_texture_'+ano
    ]))
    
  // Add the mosaic layer to the map (commented out)
  Map.addLayer(mosaicoTotal, {'bands': ['swir1_median', 'nir_median', 'red_median'],
    'gain': [0.08, 0.07, 0.2],'gamma': 0.85}, 'Sentinel 2 '+ano, false);

  // Print the mosaic (commented out)
  //print(mosaicoTotal)

  // Load the training data (commented out)
  //var BDamostras = ee.FeatureCollection('projects/mapbiomas-workspace/AMOSTRAS/col9/MATA_ATLANTICA/teste/REGIONs_'+regiaoID+'_'+ano)

  // Load the training data
  var BDamostras = ee.FeatureCollection('projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/pontos_train_v1_'+ano)
                    // Filter the training data by region
                    .filterMetadata('reg_id', 'equals', regiaoID)
                    
   // Filter the training data by reference class (forest)
   var BDflo = BDamostras.filterMetadata("reference", "equals", 3)
   // Filter the training data by reference class (savanna)
   var BDsav = BDamostras.filterMetadata("reference", "equals", 4)//.limit(100)
   // Filter the training data by reference class (reflorestamento)
   var BDreflo = BDamostras.filterMetadata("reference", "equals", 9)
   // Filter the training data by reference class (varzea)
   var BDvarzea = BDamostras.filterMetadata("reference", "equals", 11)
   // Filter the training data by reference class (campo)
   var BDcampo = BDamostras.filterMetadata("reference", "equals", 12)
   // Filter the training data by reference class (other non-forest)
   var BDOutroNFlo = BDamostras.filterMetadata("reference", "equals", 13)
   // Filter the training data by reference class (agriculture)
   var BDagro = BDamostras.filterMetadata("reference", "equals", 21)

   // Shuffle the agriculture training data (commented out)
   // BDagro = shuffle(BDagro, 2).limit(2500)
   // Filter the training data by reference class (non-vegetation)
   var BDNaoVeg = BDamostras.filterMetadata("reference", "equals", 22)
   // Filter the training data by reference class (aflora)
   var BDAflora = BDamostras.filterMetadata("reference", "equals", 29)
   // Filter the training data by reference class (water)
   var BDagua = BDamostras.filterMetadata("reference", "equals", 33)

  // Complementary samples
  // Merge the training data for different classes (commented out)
  var amostraTotal = savana.merge(campo).merge(flo).merge(agro).merge(savana).merge(varzea) //flo.merge(agr).merge(agua)
  
  // Convert the training data to an image
  var amostraTotalimg = amostraTotal.reduceToImage({properties: ['reference'],reducer: ee.Reducer.first()})

  // Rename the band
  amostraTotalimg = amostraTotalimg.select([0],['reference'])

  // Sample the mosaic for the forest class
  var training_flo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 800, 'region': flo.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the non-forest class (commented out)
  // var training_nflo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 300, 'region': nao_flo.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the savanna class
  var training_sav = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 2600, 'region': savana.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the aflora class (commented out)
  // var training_afl = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 1000, 'region': aflora.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the varzea class
  var training_var = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 200, 'region': varzea.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the water class (commented out)
  // var training_agu = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 100, 'region': agua.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the campo class
  var training_cam = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 1000, 'region': campo.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the restinga class (commented out)
  // var training_nflo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 500, 'region': restinga.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the agriculture class
  var training_agr = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 800, 'region': agro.filterBounds(limite), 'scale': 10, 'seed': 1});

// If collecting data, print the size of the training data
if (coleta) {
// print('BDflo',BDflo.size())
// print('BDsav',BDsav.size())
print('BDvar',BDvarzea.size())
// print('BDcam',BDcampo.size())
// print('BDOut',BDOutroNFlo.size())
// print('BDAfl',BDAflora.size())
// print('BDagr',BDagro.size())
// print('BDNao',BDNaoVeg.size())
// print('BDagu',BDagua.size())
print('training_flo',training_flo.size())
print('training_var',training_var.size())
// print('training_nflo',training_nflo.size())
//print('training_cam',training_cam.size())
print('training_sav',training_sav.size())
//print('training_afl',training_afl.size())
//print('training_cam',training_cam.size())
print('training_agr',training_agr.size())
}

  // Merge the training data for all classes
  var training = BDflo.merge(BDreflo).merge(BDcampo).merge(BDvarzea)//.merge(BDsav).merge(BDOutroNFlo).merge(BDAflora)
                      .merge(BDagro).merge(BDNaoVeg).merge(BDagua)
                      // Add the complementary samples
                      .merge(training_cam)
                      .merge(training_sav).merge(training_agr).merge(training_flo).merge(training_var)
                      // .merge(training_nflo)
                      // //.merge(training_agu).merge(training_agr)

  // Train a Random Forest classifier
  var classifierRF = ee.Classifier.smileRandomForest({numberOfTrees: RFtrees, variablesPerSplit:1}).train(training, 'reference', bandNames);

  // Print the classifier explanation (if collecting data)
  if (coleta) {print(classifierRF.explain())}

  // Train a Gradient Tree Boost classifier
  var classifierGTB = ee.Classifier.smileGradientTreeBoost({numberOfTrees: 30, shrinkage: 0.1, samplingRate: 0.8, loss: 'LeastSquares'}).train(training, 'reference', bandNames);

  // Print the classifier explanation (commented out)
  // print(classifier.explain())

  // Classify the mosaic using the Random Forest classifier
  var classifiedRF = mosaicoTotal.classify(classifierRF).mask(mosaicoTotal.select('blue_median'));

  // Classify the mosaic using the Gradient Tree Boost classifier
  var classifiedGTB = mosaicoTotal.classify(classifierGTB).mask(mosaicoTotal.select('blue_median'));

  // Rename the classification band and clip the image to the region
  classifiedRF = classifiedRF.select(['classification'],['classification_'+ano]).clip(limite.geometry()).toInt8()
  // classifiedGTB = classifiedGTB.select(['classification'],['classification_'+ano]).clip(limite.geometry()).toInt8()

  // Add the classification layers to the map (if collecting data)
  if (coleta) {  
    Map.addLayer(classifiedRF, vis, 'RF'+ano+"_"+regiaoID, false);
    // Map.addLayer(classifiedGTB, vis, 'GTB'+ano+"_"+regiaoID, false);
  }

// Add the outline layer to the map
Map.addLayer(outline, visPar, regiaoID, false);

// Add the Atlantic Forest biome layer to the map (commented out)
//Map.addLayer(bioma250mil_MA,({'palette':'000000','opacity': 0.3}),'layer bioma',false)

// Create a blank image
var blank = ee.Image(0).mask(0);
// Outline the biomes in red
var outline = blank.paint(bioma250mil, 'AA0000', 1.5); 
// Define the visualization parameters for the outline
var visPar = {'palette':'000000','opacity': 0.6};
// Add the outline layer to the map
Map.addLayer(outline, visPar, 'bioma250mil', false);

  // If this is the first year, initialize the classification image
  if (i_ano == 0){ var classified16a23RF = classifiedRF;}//  var classified16a23GTB = classifiedGTB}  
  // Otherwise, add the current year's classification to the image
  else {classified16a23RF = classified16a23RF.addBands(classifiedRF);}// classified16a23GTB = classified16a23GTB.addBands(classifiedGTB)}
}

// If collecting data, do nothing
if (coleta) {}
   // Otherwise, export the classification image to an asset
   else 
   {
     // Set the metadata for the classification image
     classified16a23RF = classified16a23RF
     .set('territory', 'BRAZIL')
     .set('biome', 'MATA ATNTICA')
     .set('source', 'arcplan')
     .set('version', '1')
     .set('collection_id',versao_out)

//     classified16a23GTB = classified16a23GTB
//     .set('territory', 'BRAZIL')
//     .set('biome', 'MATA ATNTICA')
//     .set('source', 'arcplan')
//     .set('version', '1')
//     .set('collection_id',versao_out)
     
    // Export the Random Forest classification image to an asset
    Export.image.toAsset({
       "image": classified16a23RF.toInt8(),
       "description": regiaoID+'-'+'RF_SENTINEL2_v'+versao_out,
       "assetId": dirout + regiaoID+'-'+'RF_SENTINEL2_v'+versao_out,
       "scale": 10,
       "pyramidingPolicy": {
           '.default': 'mode'
       },
       "maxPixels": 1e13,
       "region": limite
     });    
     
//    // Export the Gradient Tree Boost classification image to an asset (commented out)
//    Export.image.toAsset({
//       "image": classified16a23GTB.toInt8(),
//       "description": regiaoID+'-'+'GTB_SENTINEL2_v'+versao_out,
//       "assetId": dirout + regiaoID+'-'+'GTB_SENTINEL2_v'+versao_out,
//       "scale": 10,
//       "pyramidingPolicy": {
//           '.default': 'mode'
//       },
//       "maxPixels": 1e13,
//       "region": limite
//     });    
}
