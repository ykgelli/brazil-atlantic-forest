var agro = /* color: #d62b0a */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.44141882538213, -13.902711963019652],
                  [-39.442534624332325, -13.90512812275746],
                  [-39.44631117462529, -13.907210998837751],
                  [-39.4426204550208, -13.908544029690088],
                  [-39.43910139679326, -13.90212874826973]]]),
            {
              "reference": 21,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.395842729801075, -13.95311282279461],
                  [-39.398331819766895, -13.952113243254159],
                  [-39.400048433536426, -13.952862928315675],
                  [-39.397816835636036, -13.954778779066855]]]),
            {
              "reference": 21,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.446997820133106, -14.002170187428026],
                  [-39.441247164005176, -14.001837065731893],
                  [-39.44090384125127, -14.000004887770414],
                  [-39.44287794708623, -13.998755667148476],
                  [-39.446053682559864, -14.000587855070053]]]),
            {
              "reference": 21,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.46252487815411, -14.039260542738862],
                  [-39.46003578818829, -14.039343809626152],
                  [-39.46012161887677, -14.036179646638455],
                  [-39.458748327861144, -14.03393139902051],
                  [-39.460979925761535, -14.033098709121372],
                  [-39.46364067710431, -14.034347742835765],
                  [-39.46467064536603, -14.037012325344723]]]),
            {
              "reference": 21,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.36652076060494, -14.130649034394349],
                  [-39.363688347885216, -14.132979562862836],
                  [-39.36377417857369, -14.118413368482548],
                  [-39.36583411509713, -14.118080416004457],
                  [-39.36686408335885, -14.126237611599322]]]),
            {
              "reference": 21,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.45114981944283, -14.145713814632067],
                  [-39.45295226390084, -14.143216958718902],
                  [-39.454840539047325, -14.143882789643516],
                  [-39.45097815806588, -14.147877734241543]]]),
            {
              "reference": 21,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.50196158702096, -14.178824786198424],
                  [-39.49938666636666, -14.170086944461419],
                  [-39.50281989390572, -14.170419820788684],
                  [-39.504279015609825, -14.177326894375954]]]),
            {
              "reference": 21,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.4794739466401, -14.154149919214847],
                  [-39.482048867294395, -14.156563430931872],
                  [-39.48376548106393, -14.159309809623895],
                  [-39.48196303660592, -14.161223932709083],
                  [-39.47990310008248, -14.156563430931872],
                  [-39.477070687362755, -14.156563430931872],
                  [-39.476813195297325, -14.154649268570358]]]),
            {
              "reference": 21,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.54779517466744, -14.132343927528128],
                  [-39.5494259577485, -14.133093022988085],
                  [-39.545220254013145, -14.133592418591368]]]),
            {
              "reference": 21,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.376582383558684, -14.504006261862816],
                  [-39.37546658460849, -14.502593637671813],
                  [-39.37864232008212, -14.501762678056966],
                  [-39.37864232008212, -14.50375697589554]]]),
            {
              "reference": 21,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.38919949476474, -14.513395828933657],
                  [-39.392289399549895, -14.511817080019293],
                  [-39.39349102918857, -14.513395828933657],
                  [-39.38962864820712, -14.516387111783242]]]),
            {
              "reference": 21,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.26826405470126, -14.530927493914215],
                  [-39.26912236158603, -14.52951504157568],
                  [-39.26800656263583, -14.525028368409522],
                  [-39.27006649915927, -14.523117350342979],
                  [-39.272898911879, -14.530678238274952],
                  [-39.26955151502841, -14.532755360014074]]]),
            {
              "reference": 21,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.25722307084811, -14.576377850049456],
                  [-39.255678118455535, -14.570895290074207],
                  [-39.2579955470444, -14.569483093446403],
                  [-39.2605704676987, -14.57172598974657],
                  [-39.259883822190886, -14.576959325682408]]]),
            {
              "reference": 21,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.22804063676608, -14.617256137713282],
                  [-39.225723208177214, -14.618751079868503],
                  [-39.2261523616196, -14.61509675886329],
                  [-39.227439821946746, -14.613186521421186],
                  [-39.2290706050278, -14.614598437653289],
                  [-39.22881311296237, -14.618668027793436]]]),
            {
              "reference": 21,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.23610042488963, -14.669153684673555],
                  [-39.23996280587107, -14.66633054545613],
                  [-39.240649451378886, -14.672973168008173]]]),
            {
              "reference": 21,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.70215312274439, -15.387473488271954],
                  [-39.70550051959498, -15.388466533345548],
                  [-39.70515719684107, -15.390287103677124],
                  [-39.70120898517115, -15.391362887752111]]]),
            {
              "reference": 21,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.530899087596026, -15.462620837936962],
                  [-39.53227237861165, -15.460635452142332],
                  [-39.53484729926595, -15.460387277580018],
                  [-39.53553394477376, -15.462703561932088],
                  [-39.533903161692706, -15.464027141360834]]]),
            {
              "reference": 21,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.572612802195636, -15.491572217237644],
                  [-39.573127786326495, -15.487022983082998],
                  [-39.575101892161456, -15.491572217237644]]]),
            {
              "reference": 21,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.68655052408898, -12.026835695973842],
                  [-37.68552055582726, -12.023309910850744],
                  [-37.69170036539757, -12.026499908905762]]]),
            {
              "reference": 21,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.68277397379601, -12.018944589057112],
                  [-37.67934074625695, -12.016761901604884],
                  [-37.68105736002648, -12.015082899212764]]]),
            {
              "reference": 21,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.65582313761437, -12.02700358935066],
                  [-37.65702476725304, -12.022806223489173],
                  [-37.665951158854604, -12.026332015214503]]]),
            {
              "reference": 21,
              "system:index": "20"
            })]),
    restinga = /* color: #ff1551 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.9758248640984, -15.592276860115534],
                  [-38.98475125569996, -15.603189276256032],
                  [-38.9758248640984, -15.599221192064457]]]),
            {
              "reference": 13,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.99175561850154, -13.825236016242886],
                  [-38.99055398886287, -13.82140215616408],
                  [-38.99330057089412, -13.819401856284559]]]),
            {
              "reference": 13,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.00857843344295, -13.796230464686786],
                  [-39.00926507895076, -13.791062430282494],
                  [-39.01183999960506, -13.796897299498982]]]),
            {
              "reference": 13,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.934636530800844, -13.527408678826362],
                  [-38.93600982181647, -13.533416973153546],
                  [-38.93231910221199, -13.531664569637064],
                  [-38.931332059649584, -13.527867644258905]]]),
            {
              "reference": 13,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.98406424028451, -15.756300725943541],
                  [-38.98183264238412, -15.769434596736406],
                  [-38.98114599687631, -15.767369579022665],
                  [-38.982948441334315, -15.759026693536198]]]),
            {
              "reference": 13,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.925356049366535, -15.762991671972118],
                  [-38.92947592241342, -15.754979031513908],
                  [-38.934797425098964, -15.754070361603864],
                  [-38.93333830339486, -15.757952831883548]]]),
            {
              "reference": 13,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.954710144825526, -15.784715074435086],
                  [-38.95368017656381, -15.789670657709527],
                  [-38.95359434587533, -15.7868625087324]]]),
            {
              "reference": 13,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.90348492726045, -15.768586323614867],
                  [-38.903141604506544, -15.781471613186467],
                  [-38.89833508595186, -15.78081084902202]]]),
            {
              "reference": 13,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.891125308119825, -15.799972135113169],
                  [-38.89421521290498, -15.81582838011295],
                  [-38.88803540333467, -15.808891425797546]]]),
            {
              "reference": 13,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.872929202162794, -15.824416660595318],
                  [-38.867436038100294, -15.832343980286032],
                  [-38.867436038100294, -15.826398519668656]]]),
            {
              "reference": 13,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.987204103253596, -15.324931406457047],
                  [-38.987719087384455, -15.332878016790065],
                  [-38.98411419846844, -15.327083643252129]]]),
            {
              "reference": 13,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.99801877000164, -15.315659979331574],
                  [-39.002481965802424, -15.324600291137465],
                  [-39.001451997540705, -15.333540220679572],
                  [-38.996988801739924, -15.32145466945012]]]),
            {
              "reference": 13,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.943292390140165, -13.908406008668585],
                  [-38.937284241946806, -13.910988735630049],
                  [-38.93359352234231, -13.908156065819645]]]),
            {
              "reference": 13,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.94260574463235, -13.90149082359755],
                  [-38.93599678161966, -13.901657456992377],
                  [-38.93539596680032, -13.898408084159554],
                  [-38.94294906738626, -13.899324578550274]]]),
            {
              "reference": 13,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.015218507083524, -13.778982923340637],
                  [-39.01006866577493, -13.776648814090562],
                  [-39.01659179809915, -13.771647072907937]]]),
            {
              "reference": 13,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.93270076440246, -13.522291742668042],
                  [-38.92918170617492, -13.520539257288865],
                  [-38.93124164269836, -13.517201154243836]]]),
            {
              "reference": 13,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.911495308679285, -13.400845271873994],
                  [-38.91140947799081, -13.403350070725763],
                  [-38.91012201766366, -13.401596714269091]]]),
            {
              "reference": 13,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.906517128747645, -13.422385688935378],
                  [-38.90831957320565, -13.426226025509123],
                  [-38.905744652551356, -13.425975570648879]]]),
            {
              "reference": 13,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.96618145737061, -13.277291392839407],
                  [-38.96343487533936, -13.270357770007074],
                  [-38.97442120346436, -13.276873710320352]]]),
            {
              "reference": 13,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.00238796317, -13.315349428581465],
                  [-38.994834862584064, -13.321279511654424],
                  [-38.999555550450275, -13.310588552538283]]]),
            {
              "reference": 13,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.996827316317265, -13.2885847784618],
                  [-38.99030418399305, -13.287665918727473],
                  [-38.99047584537, -13.283656308255102]]]),
            {
              "reference": 13,
              "system:index": "20"
            })]),
    sav = /* color: #0b4a8b */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.21147278524411, -15.07459823125909],
                  [-40.20851162649167, -15.077871850938621],
                  [-40.20855454183591, -15.073230754955864]]]),
            {
              "reference": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.188427245388155, -15.080979671096625],
                  [-40.185895240078096, -15.08371451526129],
                  [-40.181947028408175, -15.081642666851769],
                  [-40.185938155422335, -15.08064817244382]]]),
            {
              "reference": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.26628999865349, -15.018780043129231],
                  [-40.27058153307732, -15.017785255297834],
                  [-40.26826410448845, -15.022013071576145]]]),
            {
              "reference": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.384951575786104, -15.0286726823749],
                  [-40.386668189555635, -15.029791761284319],
                  [-40.38512323716306, -15.03406078618531]]]),
            {
              "reference": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.41078661301755, -15.03920008146983],
                  [-40.408168777019014, -15.039738871383703],
                  [-40.40855501511716, -15.038661290194627]]]),
            {
              "reference": 4,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.481036162996105, -15.008623432472001],
                  [-40.48193738522511, -15.00621923965466],
                  [-40.482795692109875, -15.006882467960729]]]),
            {
              "reference": 4,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.51485345425587, -14.982922040309191],
                  [-40.51360890927296, -14.98462174383865],
                  [-40.512750602388195, -14.983336603389994]]]),
            {
              "reference": 4,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.38256121612359, -14.956192142351112],
                  [-40.38376284576226, -14.956109219295538],
                  [-40.38307620025445, -14.958223747198138]]]),
            {
              "reference": 4,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.34745646453668, -14.988529688095289],
                  [-40.34707022643853, -14.99047807654575],
                  [-40.34608317352105, -14.99035371185557],
                  [-40.346512326963435, -14.988488232829145]]]),
            {
              "reference": 4,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.25926188038933, -15.02931675682287],
                  [-40.25831774281609, -15.0316377958329],
                  [-40.254927430621265, -15.029150967356092]]]),
            {
              "reference": 4,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.17524832270916, -14.945071894220874],
                  [-40.17001265071209, -14.942501131374101],
                  [-40.17567747615154, -14.937691234343795]]]),
            {
              "reference": 4,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.27862318683879, -15.010443643302924],
                  [-40.28514631916301, -15.008702693620393],
                  [-40.280082308542895, -15.01193587459829]]]),
            {
              "reference": 4,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.92147733275954, -15.13313123302114],
                  [-39.909546867061295, -15.12824277661593],
                  [-39.91272260253493, -15.123105633124844],
                  [-39.91667081420485, -15.12915419229509],
                  [-39.919503226924576, -15.123188491265713]]]),
            {
              "reference": 4,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.81392131008741, -15.042717760382255],
                  [-39.82181773342725, -15.037412766823644],
                  [-39.81666789211866, -15.0447070989371]]]),
            {
              "reference": 4,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.81460795559522, -15.0236523248653],
                  [-39.81512293972608, -15.016854670759477],
                  [-39.819242812772956, -15.025310256450782]]]),
            {
              "reference": 4,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.74235799924813, -14.899854756076914],
                  [-39.746477872295, -14.892389596486998],
                  [-39.74802282468758, -14.898859416414663]]]),
            {
              "reference": 4,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.056394855396505, -14.574461700285005],
                  [-40.0520174902842, -14.573714080000975],
                  [-40.0575106543467, -14.57288338782186]]]),
            {
              "reference": 4,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.97746040546248, -14.508804243433412],
                  [-39.97621586047957, -14.511837134506651],
                  [-39.97471382343123, -14.508014854011092]]]),
            {
              "reference": 4,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.82161724240068, -14.480864815639302],
                  [-39.81936418682817, -14.48418894877512],
                  [-39.81638157040361, -14.480864815639302]]]),
            {
              "reference": 4,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.805477941469576, -14.481529646251452],
                  [-39.80734475894394, -14.47918195424833],
                  [-39.81090673251572, -14.482734646657603]]]),
            {
              "reference": 4,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.77302735891546, -14.467740858178523],
                  [-39.770516811277524, -14.464769696379818],
                  [-39.77244800176825, -14.464250258417042]]]),
            {
              "reference": 4,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.76289933767523, -14.449227587143435],
                  [-39.76538842764105, -14.451554817067976],
                  [-39.763500152494565, -14.457705236020033]]]),
            {
              "reference": 4,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.757492004301206, -14.454131364639897],
                  [-39.75963777151312, -14.451637931971897],
                  [-39.75895112600531, -14.456790995323402]]]),
            {
              "reference": 4,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.675867019559995, -14.503597706141942],
                  [-39.6787852629682, -14.502600558750105],
                  [-39.67698281851019, -14.506007460471663]]]),
            {
              "reference": 4,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.71294587698187, -14.491299241321329],
                  [-39.709083496000424, -14.49354293107372],
                  [-39.710628448393, -14.49071754027108]]]),
            {
              "reference": 4,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.6857772479622, -14.533108894588635],
                  [-39.69058376651689, -14.534604407761956],
                  [-39.68672138553544, -14.536099910814954]]]),
            {
              "reference": 4,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.68833872033219, -14.64672416971178],
                  [-39.69357439232926, -14.644731165292445],
                  [-39.69134279442887, -14.647720665127261]]]),
            {
              "reference": 4,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.770324808540614, -14.699846230088582],
                  [-39.771783930244716, -14.69262325621241],
                  [-39.77341471332577, -14.697604643064196]]]),
            {
              "reference": 4,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.68843304400195, -15.252703838716943],
                  [-39.677275054499994, -15.253614716984869],
                  [-39.68817555193652, -15.250716454244541]]]),
            {
              "reference": 4,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.712036483333, -15.26222646178073],
                  [-39.72147785906542, -15.268519436568154],
                  [-39.71177899126757, -15.265124565707323]]]),
            {
              "reference": 4,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.67315518145312, -15.235727657798648],
                  [-39.67538677935351, -15.239205816260066],
                  [-39.67186772112597, -15.239785503745026]]]),
            {
              "reference": 4,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.59367454390667, -15.418664807283713],
                  [-40.594361189414485, -15.424787591215122],
                  [-40.58972633223675, -15.421478000692113]]]),
            {
              "reference": 4,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.61976707320355, -15.384903516744663],
                  [-40.620110395957454, -15.389868756036382],
                  [-40.6170204911723, -15.386062083171032]]]),
            {
              "reference": 4,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.995258375186566, -13.856117875458432],
                  [-39.99122433282817, -13.856992870638821],
                  [-39.99195389368022, -13.855784543094137],
                  [-39.995043798465375, -13.855451210251527]]]),
            {
              "reference": 4,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.97478538441817, -13.831654505821987],
                  [-39.972167548419634, -13.833279665247582],
                  [-39.97444206166426, -13.830404375463806]]]),
            {
              "reference": 4,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.957420356199144, -13.807545061053055],
                  [-39.960424430295824, -13.808711964111323],
                  [-39.95694828741252, -13.808670289102677]]]),
            {
              "reference": 4,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.39126169044573, -15.619713101706612],
                  [-40.39435159523089, -15.615084035677233],
                  [-40.395124071427176, -15.62012640608944]]]),
            {
              "reference": 4,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.4624153311928, -15.607478914574298],
                  [-40.46576272804339, -15.605329590104771],
                  [-40.46524774391253, -15.609214890973037]]]),
            {
              "reference": 4,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.50593149025042, -15.60301490779891],
                  [-40.500009172745536, -15.602353565200596],
                  [-40.504300707169364, -15.60094820510142]]]),
            {
              "reference": 4,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.512674319260626, -15.54864043479169],
                  [-40.51473425578406, -15.550211530498514],
                  [-40.51250265788367, -15.552692183522401]]]),
            {
              "reference": 4,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.50733971381332, -15.527127401958275],
                  [-40.50974297309067, -15.525059936694275],
                  [-40.50845551276352, -15.527706288518015]]]),
            {
              "reference": 4,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.48363703274872, -15.486601307783928],
                  [-40.479431329013366, -15.484698867214956],
                  [-40.480461297275085, -15.481969248005676],
                  [-40.483980355502624, -15.484947012629497]]]),
            {
              "reference": 4,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.45428293728973, -15.46137186946296],
                  [-40.45067804837372, -15.460627347530854],
                  [-40.45479792142059, -15.457483780985104]]]),
            {
              "reference": 4,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.42389887356903, -15.442923482485195],
                  [-40.422010598422546, -15.443750799571816],
                  [-40.41969316983368, -15.441599768282442]]]),
            {
              "reference": 4,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.41425248211163, -15.410508488559056],
                  [-40.41674157207745, -15.414645686908583],
                  [-40.41270752971905, -15.413983740707172]]]),
            {
              "reference": 4,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.42850037639874, -15.406950432116872],
                  [-40.43313523357647, -15.405047260651752],
                  [-40.430817804987605, -15.409184567694648]]]),
            {
              "reference": 4,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.474763117487605, -15.4005788765838],
                  [-40.477509699518855, -15.400247881352383],
                  [-40.47690888469952, -15.403061324029746]]]),
            {
              "reference": 4,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.44811105912673, -15.354642182583326],
                  [-40.44467783158767, -15.352324693988905],
                  [-40.452745916304465, -15.35149701325368],
                  [-40.45137262528884, -15.35306960384394]]]),
            {
              "reference": 4,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.431924867230926, -15.335538387965284],
                  [-40.43098072965768, -15.330737408131665],
                  [-40.43329815824655, -15.334710640691277]]]),
            {
              "reference": 4,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.43578724821237, -15.330075195360793],
                  [-40.43484311063913, -15.32345295226751],
                  [-40.437675523358855, -15.328833540760304]]]),
            {
              "reference": 4,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.51288674670158, -15.315102770340278],
                  [-40.51571915942131, -15.313281544015773],
                  [-40.51468919115959, -15.31667563486268]]]),
            {
              "reference": 4,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.52859376269279, -15.308645623665287],
                  [-40.53219865160881, -15.308562838440068],
                  [-40.52962373095451, -15.310218536723042]]]),
            {
              "reference": 4,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.583010419186934, -15.306244838841575],
                  [-40.580006345090254, -15.307321056133008],
                  [-40.581722958859785, -15.303430090538422]]]),
            {
              "reference": 4,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.60189692108648, -15.312786651820435],
                  [-40.60018030731695, -15.311793246612696],
                  [-40.60043779938238, -15.310220345389556]]]),
            {
              "reference": 4,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.62833277313726, -15.342586613860904],
                  [-40.632195154118705, -15.343662644103837],
                  [-40.629706064152884, -15.344986981406324]]]),
            {
              "reference": 4,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.57992426483648, -15.385375230915946],
                  [-40.577778497624564, -15.383471862104443],
                  [-40.57880846588628, -15.38272706087722]]]),
            {
              "reference": 4,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.558405430882544, -15.123409921998345],
                  [-40.56050828275022, -15.123037060498843],
                  [-40.55853417691526, -15.124362787295508]]]),
            {
              "reference": 4,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.01231007970809, -15.95250568166108],
                  [-40.01488500036238, -15.946068602120958],
                  [-40.01866155065535, -15.95002990629748]]]),
            {
              "reference": 4,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.697526029720294, -15.982583908186914],
                  [-39.6993284741783, -15.983491548475266],
                  [-39.698212675228106, -15.985224304862115]]]),
            {
              "reference": 4,
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.15745521376273, -14.943188661954581],
                  [-40.15951515028617, -14.950154506360079],
                  [-40.15264869520804, -14.949822804610433]]]),
            {
              "reference": 4,
              "system:index": "59"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.94347902221487, -15.246284551202868],
                  [-39.94262071167845, -15.25075628163138],
                  [-39.93094773804564, -15.24015658241405],
                  [-39.94296403443236, -15.241812820643863]]]),
            {
              "reference": 4,
              "system:index": "60"
            })]),
    limite2 = 
    /* color: #ffc82d */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-39.424260688093675, -15.994822836643834],
          [-39.443486762312425, -15.336332114799717],
          [-39.759343695906175, -15.333683322042416],
          [-39.781316352156175, -16.01066372369023]]]),
    umida = /* color: #d615cc */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.89754119058813, -13.036365976502491],
                  [-38.895652915441644, -13.042553674190415],
                  [-38.89307799478735, -13.037871106399686]]]),
            {
              "reference": 11,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.86801543375219, -13.089625273329903],
                  [-38.861148978674066, -13.091464478543635],
                  [-38.86458220621313, -13.087953256677732]]]),
            {
              "reference": 11,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.85514083048071, -13.085445210430311],
                  [-38.85136428018774, -13.090962878483223],
                  [-38.8493043436643, -13.085110802335786]]]),
            {
              "reference": 11,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.88706984659399, -13.074075080778094],
                  [-38.887928153478754, -13.070898039104948],
                  [-38.890159751379144, -13.072737384006784],
                  [-38.88844313760961, -13.076750452561443]]]),
            {
              "reference": 11,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.89719786783422, -13.129081570113971],
                  [-38.89771285196508, -13.132257861011015],
                  [-38.89479460855688, -13.129583092459974]]]),
            {
              "reference": 11,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.90217604776586, -13.144126794925562],
                  [-38.9042359842893, -13.148305860364811],
                  [-38.899601127111566, -13.145965592489611]]]),
            {
              "reference": 11,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.978806621287276, -13.188863946353742],
                  [-38.98189652607243, -13.189866745361016],
                  [-38.978806621287276, -13.192707986876536]]]),
            {
              "reference": 11,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.961640483591964, -13.190869540255004],
                  [-38.95769227192204, -13.195716324247309],
                  [-38.95769227192204, -13.192707986876536]]]),
            {
              "reference": 11,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.937607890818526, -13.184852709197559],
                  [-38.934174663279464, -13.189699612478778],
                  [-38.93434632465642, -13.184518436464629]]]),
            {
              "reference": 11,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.90430558368962, -13.177331462221309],
                  [-38.9058505360822, -13.181175684009782],
                  [-38.90276063129704, -13.185688389031066]]]),
            {
              "reference": 11,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.89400590107243, -13.161118210476657],
                  [-38.89761078998845, -13.1649626868389],
                  [-38.89211762592595, -13.164294086587894]]]),
            {
              "reference": 11,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.92971146747868, -13.168974250018515],
                  [-38.92473328754704, -13.171481443635624],
                  [-38.92576325580876, -13.168472808214512],
                  [-38.927651530955245, -13.167135625050841]]]),
            {
              "reference": 11,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.00851911868645, -13.228451871640422],
                  [-39.01281065311028, -13.237099474866199],
                  [-39.0048713144262, -13.232420616540034]]]),
            {
              "reference": 11,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.0022963937719, -13.237559000748114],
                  [-38.99731821384026, -13.241360499788177],
                  [-38.99813360538079, -13.236431072035812]]]),
            {
              "reference": 11,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.98487276401116, -13.247835443923378],
                  [-38.98753351535393, -13.249339277267625],
                  [-38.98384279574944, -13.249589915254806]]]),
            {
              "reference": 11,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.99628824557854, -13.249924098836138],
                  [-38.99697489108635, -13.253934266009939],
                  [-38.99234003390862, -13.254435532258734]]]),
            {
              "reference": 11,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.02074999179436, -13.272563967033182],
                  [-39.01783174838616, -13.274819484129464],
                  [-39.016630118747486, -13.271561508267222]]]),
            {
              "reference": 11,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.029161399265064, -13.281168234586964],
                  [-39.026157325168384, -13.281669444657318],
                  [-39.02821726169182, -13.279915204883352]]]),
            {
              "reference": 11,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.02959055270745, -13.290774580715503],
                  [-39.030878013034595, -13.289688665003668],
                  [-39.03001970614983, -13.293614644975909]]]),
            {
              "reference": 11,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.00448720279673, -13.483598824328407],
                  [-38.99882237735728, -13.482764173751553],
                  [-38.999423192176614, -13.480009806165626]]]),
            {
              "reference": 11,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.969468281898294, -13.491110548309155],
                  [-38.96586339298228, -13.494782860718416],
                  [-38.96251599613169, -13.493447480922429]]]),
            {
              "reference": 11,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.96526257816294, -13.463649878120313],
                  [-38.96637837711314, -13.469576307843324],
                  [-38.96457593265513, -13.467155671183432]]]),
            {
              "reference": 11,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.98174755738087, -13.436724809072988],
                  [-38.98380749390431, -13.441149274856683],
                  [-38.9805459277422, -13.44098231536606]]]),
            {
              "reference": 11,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.9450120227129, -13.435723031900988],
                  [-38.94432537720509, -13.441232754558396],
                  [-38.9435529010088, -13.438895311923103]]]),
            {
              "reference": 11,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.05299413614039, -14.126752919446675],
                  [-39.04973256997828, -14.13557565955387],
                  [-39.04698598794703, -14.128917019432112]]]),
            {
              "reference": 11,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.0258716385818, -14.164205590374225],
                  [-39.029648188874766, -14.164704917620403],
                  [-39.024670008943126, -14.172361131179974]]]),
            {
              "reference": 11,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.04904592447047, -14.147893629966104],
                  [-39.050934199616954, -14.144398057526384],
                  [-39.053680781648204, -14.145396797993815],
                  [-39.05007589273219, -14.150889792129117]]]),
            {
              "reference": 11,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.00475728921656, -14.140735971612271],
                  [-39.00475728921656, -14.145729710507943],
                  [-39.002182368562266, -14.141401809801488]]]),
            {
              "reference": 11,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.03205144815211, -14.198823009216468],
                  [-39.03102147989039, -14.203649056254989],
                  [-39.02878988199, -14.201485668579567]]]),
            {
              "reference": 11,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.18884941042894, -15.98518167086122],
                  [-39.1783780664348, -15.960096490500739],
                  [-39.18919273318285, -15.970163947084625]]]),
            {
              "reference": 11,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.124891169080364, -15.890814792324012],
                  [-39.11905468226396, -15.897748930582443],
                  [-39.12454784632646, -15.87859691986248]]]),
            {
              "reference": 11,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.05914486170732, -15.775045523850673],
                  [-39.04936016322099, -15.771906775430827],
                  [-39.051420099744426, -15.76893317949761]]]),
            {
              "reference": 11,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.08420742274247, -15.773723951488504],
                  [-39.09244716883622, -15.780166535410293],
                  [-39.08352077723466, -15.787930402988726]]]),
            {
              "reference": 11,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.08403576136552, -15.80246620617558],
                  [-39.08798397303544, -15.799658234590417],
                  [-39.090387232312786, -15.809238212693714]]]),
            {
              "reference": 11,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.03305233241044, -15.787434845858764],
                  [-39.02790249110185, -15.795198434979609],
                  [-39.0280741524788, -15.790738537166593]]]),
            {
              "reference": 11,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.99630272305136, -15.694806703754235],
                  [-38.99544441616659, -15.69943396485859],
                  [-38.99424278652792, -15.69745086581671]]]),
            {
              "reference": 11,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.08612570350509, -15.664252312551646],
                  [-39.09161886756759, -15.671690044477064],
                  [-39.085267396620324, -15.669706675777162]]]),
            {
              "reference": 11,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.03651556556564, -15.591182884488976],
                  [-39.03823217933517, -15.595316465738646],
                  [-39.03497061317306, -15.594489756146901]]]),
            {
              "reference": 11,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.0179761368547, -15.579443060048844],
                  [-39.02226767127853, -15.585561080449029],
                  [-39.01728949134689, -15.582915472363]]]),
            {
              "reference": 11,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.0344556290422, -15.534173775533871],
                  [-39.02939161842208, -15.534504556747331],
                  [-39.03291067664962, -15.530535147153557]]]),
            {
              "reference": 11,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.04458365028243, -15.54351814045713],
                  [-39.046557756117394, -15.543931598140885],
                  [-39.04921850746017, -15.546991159206467],
                  [-39.04458365028243, -15.545337348057966]]]),
            {
              "reference": 11,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.0633805710588, -15.542525838630324],
                  [-39.06569799964767, -15.542608530631792],
                  [-39.06586966102462, -15.54608156471817]]]),
            {
              "reference": 11,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.29307948567219, -15.604969123966852],
                  [-39.29608355976887, -15.599182359072683],
                  [-39.29943095661945, -15.603067776361604]]]),
            {
              "reference": 11,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.21037448333378, -15.636354531904837],
                  [-39.20985949920292, -15.64197494334266],
                  [-39.206769594417764, -15.639660674972033]]]),
            {
              "reference": 11,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.22290576385136, -15.646934001713806],
                  [-39.22960055755253, -15.644785091177402],
                  [-39.22410739349003, -15.649248187815378]]]),
            {
              "reference": 11,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.986987029455314, -15.506719631572112],
                  [-38.9943684686643, -15.515817132342486],
                  [-38.98750201358617, -15.512508996630977]]]),
            {
              "reference": 11,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.24766742442251, -12.645284518126624],
                  [-38.269916473378615, -12.651291982528535],
                  [-38.24828713988252, -12.652966913284457]]]),
            {
              "reference": 11,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.236957489003615, -12.675242446517705],
                  [-38.2223662719626, -12.668878207044319],
                  [-38.230949340810255, -12.666365963503258]]]),
            {
              "reference": 11,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.248474246023804, -12.72372934766405],
                  [-38.245727663992554, -12.73612004599466],
                  [-38.24229443645349, -12.724566576077189]]]),
            {
              "reference": 11,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.267185336111694, -12.755709508756105],
                  [-38.27456677532068, -12.752360990014056],
                  [-38.270446902273804, -12.75855571485523]]]),
            {
              "reference": 11,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.9618142012134, -12.023403513929889],
                  [-37.953917777873556, -12.029573605414848],
                  [-37.95310238633303, -12.028566253209092],
                  [-37.957093555154124, -12.025334327428384]]]),
            {
              "reference": 11,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.69488220600205, -12.047128692067115],
                  [-37.68818741230088, -12.040077607990355],
                  [-37.69093399433213, -12.039406066519057]]]),
            {
              "reference": 11,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.67943268207627, -12.052165067320804],
                  [-37.67943268207627, -12.05770497092871],
                  [-37.677029422798924, -12.056026224340066]]]),
            {
              "reference": 11,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.6430145049967, -12.978967415662728],
                  [-38.64782102355139, -12.968596095378476],
                  [-38.64919431456701, -12.97194172982206]]]),
            {
              "reference": 11,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.90624775325398, -12.369410113793505],
                  [-37.908822673908276, -12.358678593330092],
                  [-37.909852642169994, -12.362535284214195]]]),
            {
              "reference": 11,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.90049410940978, -12.368686652762069],
                  [-37.898777495640246, -12.363153252226466],
                  [-37.90135241629454, -12.36365629347988]]]),
            {
              "reference": 11,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.938259612339465, -12.4516735710339],
                  [-37.941006194370715, -12.451841194575055],
                  [-37.94083453299376, -12.455193642656123]]]),
            {
              "reference": 11,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.3479120448741, -12.757355415761287],
                  [-38.34638855015364, -12.765768318860813],
                  [-38.34198972736922, -12.760431808297307]]]),
            {
              "reference": 11,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.99750052403514, -13.24292905658513],
                  [-38.997843846789046, -13.24961282394836],
                  [-38.99475394200389, -13.248944455471767]]]),
            {
              "reference": 11,
              "system:index": "58"
            })]),
    flo = /* color: #d6ab22 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.876764376808815, -14.918271974910043],
                  [-39.87586315457981, -14.918313443746941],
                  [-39.87530525510471, -14.916074115112655],
                  [-39.87646396939915, -14.915866768689398]]]),
            {
              "reference": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.85221679990452, -14.911968618733503],
                  [-39.85569294278782, -14.908899812698424],
                  [-39.85586460416477, -14.90997804683315],
                  [-39.85273178403538, -14.912258908930314]]]),
            {
              "reference": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.82552345578831, -14.911056275565107],
                  [-39.82586677854221, -14.907116567466167],
                  [-39.82646759336155, -14.910475691534655]]]),
            {
              "reference": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.85788622781841, -14.851420203847255],
                  [-39.85647002145855, -14.852000946915478],
                  [-39.85822955057232, -14.849885375367556]]]),
            {
              "reference": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.82288862045191, -14.844463322568453],
                  [-39.82190156753443, -14.844255907275103],
                  [-39.823317773894296, -14.842223226869226]]]),
            {
              "reference": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.042057858129, -14.720850237942475],
                  [-40.04021249832675, -14.720559691108882],
                  [-40.04252992691562, -14.718940923092811]]]),
            {
              "reference": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.878434616772786, -14.68841705296045],
                  [-39.875988442151204, -14.691405956231765],
                  [-39.88010831519808, -14.68061250174822]]]),
            {
              "reference": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.87783380195345, -14.724848269986662],
                  [-39.87560220405306, -14.725968926455183],
                  [-39.877747971264974, -14.722357901655212]]]),
            {
              "reference": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.873995403893595, -14.77975192047043],
                  [-39.876227001793985, -14.785478214312255],
                  [-39.87365208113969, -14.78149472153963]]]),
            {
              "reference": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.787690720090545, -14.68628941903323],
                  [-39.78889234972922, -14.697331660147565],
                  [-39.78760488940207, -14.693595625988166]]]),
            {
              "reference": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.79704626513449, -14.667275531688407],
                  [-39.79404219103781, -14.671510208577716],
                  [-39.79464300585715, -14.668853165987636]]]),
            {
              "reference": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.7149921269509, -14.649007359442802],
                  [-39.71147306872336, -14.651498563538578],
                  [-39.71318968249289, -14.649007359442802]]]),
            {
              "reference": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.26126081300946, -15.591961652711909],
                  [-40.26374990297528, -15.588076025196695],
                  [-40.26314908815594, -15.592953716038997]]]),
            {
              "reference": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.25688344789715, -15.586422544380873],
                  [-40.25902921510907, -15.58567847367102],
                  [-40.258085077535824, -15.588076025196695]]]),
            {
              "reference": 3,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.1853006537077, -15.56732387656326],
                  [-40.18650228334637, -15.564678033742274],
                  [-40.18873388124676, -15.566993148071987]]]),
            {
              "reference": 3,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.099337675267456, -15.560378466574592],
                  [-40.099337675267456, -15.559138190117123],
                  [-40.1017409345448, -15.560047726916912]]]),
            {
              "reference": 3,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.70405202146993, -15.681980310943146],
                  [-39.702592899765826, -15.685616253570368],
                  [-39.70216374632344, -15.682476125116187]]]),
            {
              "reference": 3,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.695383121933794, -15.682145582468006],
                  [-39.69727139708028, -15.67991440558999],
                  [-39.69701390501485, -15.681649767491912]]]),
            {
              "reference": 3,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.40583722826613, -13.01937422638286],
                  [-39.40600888964308, -13.020921271471938],
                  [-39.40463559862746, -13.019290602048821]]]),
            {
              "reference": 3,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.43476217028273, -13.031666696406162],
                  [-39.43635003801955, -13.032753756223846],
                  [-39.4359637999214, -13.033715382083125],
                  [-39.43420427080763, -13.032084796900978]]]),
            {
              "reference": 3,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.35011165377272, -13.124363159356221],
                  [-39.35189264055861, -13.126076722720674],
                  [-39.351549317804704, -13.12647376618525],
                  [-39.34993999239577, -13.12488558847745]]]),
            {
              "reference": 3,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.09973356608374, -15.793287833064525],
                  [-40.10179350260718, -15.79824320665062],
                  [-40.09698698405249, -15.797912852183659]]]),
            {
              "reference": 3,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.94725041784285, -15.976436599667151],
                  [-39.9470787564659, -15.974951315590967],
                  [-39.94948201574324, -15.971980714372089],
                  [-39.94913869298934, -15.974786283346525]]]),
            {
              "reference": 3,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.97111134923934, -15.949039587590725],
                  [-39.96819310583113, -15.946068602120958],
                  [-39.97008138097762, -15.944748150004536]]]),
            {
              "reference": 3,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.6843081036949, -15.940415355432242],
                  [-39.68439393438338, -15.939755111851355],
                  [-39.68559556402205, -15.940828006566768]]]),
            {
              "reference": 3,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.68362145818709, -15.937856899452399],
                  [-39.683020643367755, -15.938021962113098],
                  [-39.68241982854842, -15.936783988847852]]]),
            {
              "reference": 3,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.68593888677596, -15.94272619085186],
                  [-39.686539701595294, -15.943881598578066],
                  [-39.68593888677596, -15.94421171384869]]]),
            {
              "reference": 3,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.69436722187119, -12.035041006042034],
                  [-37.69711380390244, -12.03688777105179],
                  [-37.69453888324814, -12.039406066519057]]]),
            {
              "reference": 3,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.63000489107048, -13.287352766879481],
                  [-39.625541695269696, -13.284345561355476],
                  [-39.62897492280876, -13.279667612027733]]]),
            {
              "reference": 3,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-37.7913390658828, -11.99606746662639],
                  [-37.79854884371483, -12.007149471299531],
                  [-37.79185405001366, -12.010675468114421]]]),
            {
              "reference": 3,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.62442245707238, -12.248963425467302],
                  [-38.62442245707238, -12.251647467757637],
                  [-38.61807098612511, -12.251144211907771]]]),
            {
              "reference": 3,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.541853334757924, -12.258860696107567],
                  [-38.54142419374023, -12.261796241722694],
                  [-38.540823366496205, -12.264899526241711],
                  [-38.53704681620324, -12.26288659823417]]]),
            {
              "reference": 3,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.6509763997, -12.289515660783149],
                  [-38.652113656322314, -12.287880310843814],
                  [-38.65316508225615, -12.28876088515148]]]),
            {
              "reference": 3,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.65003226212676, -12.285343401716835],
                  [-38.64872334412749, -12.28456764776111],
                  [-38.64988205842192, -12.284274118640889]]]),
            {
              "reference": 3,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.648337106029345, -12.287880310843814],
                  [-38.64792941025908, -12.289117307247453],
                  [-38.64589093140776, -12.288320598366134]]]),
            {
              "reference": 3,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.57250564775608, -12.36351003050341],
                  [-38.570681745625954, -12.368121199457985],
                  [-38.567935163594704, -12.366255781816863]]]),
            {
              "reference": 3,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.329996373004384, -12.53297762814282],
                  [-38.324503208941884, -12.529458615132205],
                  [-38.32759311372704, -12.527280154435044]]]),
            {
              "reference": 3,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.34853580171532, -12.525269251302639],
                  [-38.34733417207665, -12.528620747811479],
                  [-38.344244267291494, -12.524934099256145]]]),
            {
              "reference": 3,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.43513521592823, -12.524830030438125],
                  [-38.43015703599659, -12.51846205624901],
                  [-38.43290361802784, -12.516618665967092]]]),
            {
              "reference": 3,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.449898094346196, -12.524159724768113],
                  [-38.44921144883838, -12.527343661184597],
                  [-38.44200167100635, -12.524830030438125]]]),
            {
              "reference": 3,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.32750353257862, -12.521813641205489],
                  [-38.32286867540088, -12.529186974826203],
                  [-38.32149538438526, -12.523824571279848]]]),
            {
              "reference": 3,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.42105898301807, -12.549797674829527],
                  [-38.42380556504932, -12.562196813222872],
                  [-38.42105898301807, -12.563034571286494]]]),
            {
              "reference": 3,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.44972643296924, -12.554908202912927],
                  [-38.4473231736919, -12.552227282803827],
                  [-38.44560655992237, -12.549211214296022],
                  [-38.45247301500049, -12.550551693551968]]]),
            {
              "reference": 3,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.52315821651672, -12.783011956811626],
                  [-38.519252920191036, -12.780218341224986],
                  [-38.52014341358398, -12.780092784742724],
                  [-38.52169909481262, -12.78000908038654]]]),
            {
              "reference": 3,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.527524852792965, -12.780846122700181],
                  [-38.52540054325317, -12.77703755777261],
                  [-38.52766432766174, -12.776901536534709]]]),
            {
              "reference": 3,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-38.51808347706054, -12.77968995727411],
                  [-38.51895251278137, -12.775944154211825],
                  [-38.5211197376654, -12.776833525888295]]]),
            {
              "reference": 3,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.61582036530394, -15.307099604354594],
                  [-39.61813779389281, -15.297992966088575],
                  [-39.62028356110472, -15.297992966088575],
                  [-39.625433402413314, -15.303043059861206]]]),
            {
              "reference": 3,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.62800832306761, -15.317778702705816],
                  [-39.62560506379027, -15.314053497737595],
                  [-39.630411582344955, -15.31421906381132]]]),
            {
              "reference": 3,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-39.57603784119505, -15.281889805043432],
                  [-39.583247619027084, -15.266116615597328],
                  [-39.586680846566146, -15.26831085730297]]]),
            {
              "reference": 3,
              "system:index": "48"
            })]);

// Define the region ID (reg_02)
var regiaoID = 'reg_02'; // old 11

// Define whether to collect data (false)
var coleta = false;   // true or false

// Define the years to process (2016-2023)
var anos = [2016,2017,2018,2019,2020,2021,2022,2023]

// If collecting data, only process 2023
if (coleta) {var anos = [2023]}

// Define the number of trees for the Random Forest classifier (100)
var RFtrees = 100;

// If collecting data, use 200 trees
if (coleta) {var RFtrees = 200}

// Define the output version (1)
var versao_out = 1;

// Define the version of the point data (S2_v1)
var versao_pt = 'S2_v1';

// Define the stable version (3)
var versao_estavel = '3'

// Define the input directory for point data
var dir_pt_in = 'projects/mapbiomas-workspace/AMOSTRAS/col9/MATA_ATLANTICA/teste/';

// Load the 250k biome collection
var bioma250mil = ee.FeatureCollection('projects/mapbiomas-workspace/AUXILIAR/biomas_IBGE_250mil');

// Filter the collection to only include the Mata Atlntica biome
var bioma250mil_MA_vetor = bioma250mil.filterMetadata('Bioma','equals', 'Mata Atlntica');

// Load the biome raster
var biomes = ee.Image('projects/mapbiomas-workspace/AUXILIAR/biomas-raster-41');

// Mask the biome raster to only include the Mata Atlntica biome
var bioma250mil_MA = biomes.mask(biomes.eq(2));

// Add the Mata Atlntica biome layer to the map
Map.addLayer(bioma250mil_MA,{},'layer bioma',false)

// Import the palettes module
var palettes = require('users/mapbiomas/modules:Palettes.js');

// Define the visualization parameters for the classification
var vis = {
    'min': 0,
    'max': 62,
    'palette': palettes.get('classification7')
};

// Load the regions collection
var regioesCollection = ee.FeatureCollection('projects/mapbiomas-workspace/AUXILIAR/Mata_Atlantica_col6_PLANET');

// Define the visualization parameters for the median composite
var visParMedian2 = {bands: ['swir1_median', 'nir_median', 'red_median'],gain: [0.08, 0.06, 0.2],gamma: 0.85}

// Define the biome name (MATAATLANTICA)
var bioma = "MATAATLANTICA";

// Define the output directory
var dirout = 'projects/mapbiomas-workspace/COLECAO7/classificacao-ma/';

// Load the S2 cluster image
var S2_cluster = ee.Image('projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/mosaicos_MA_S2_clusters_2106_2023')

// Filter the regions collection to only include the specified region ID
var limite = regioesCollection.filterMetadata('reg_id', "equals", regiaoID);

// Load the stable map from collection 6
var mapa_estavel_col6 = ee.Image('projects/mapbiomas-workspace/AMOSTRAS/col7/MATA_ATLANTICA/MA_amostras_estaveis85a20_col6_v1')

// Add the stable map layer to the map
Map.addLayer(mapa_estavel_col6, vis, 'mapa_estavel_col6', false);
// Create a blank image
var blank = ee.Image(0).mask(0);
// Outline the region boundary
var outline = blank.paint(limite, 'AA0000', 2); 
// Define the visualization parameters for the outline
var visPar = {'palette':'000000','opacity': 0.6};
// Add the outline layer to the map
Map.addLayer(outline, visPar, regiaoID, false);

// Define a function to shuffle a feature collection
var shuffle = function (collection, seed) {
    // Add a random column to the collection
    collection = collection.randomColumn('random', seed || 1)
        // Sort the collection by the random column
        .sort('random', true)
        // Map over the collection and set a new ID based on the random column
        .map(function (feature) {
                var rescaled = ee.Number(feature.get('random')).multiply(1000000000).round();
                return feature.set('new_id', rescaled)});
    // Get a list of the new IDs
    var randomIdList = ee.List(collection.reduceColumns(ee.Reducer.toList(), ['new_id']).get('list'));
    // Create a sequential list of IDs
    var sequentialIdList = ee.List.sequence(1, collection.size());
    // Remap the collection using the new and sequential IDs
    var shuffled = collection.remap(randomIdList, sequentialIdList, 'new_id');
    // Return the shuffled collection
    return shuffled;
};

// Define the visualization parameters for the hand-labeled data
var vis_hand = {
    'min': 0,
    'max': 60,
    'palette': 'blue,white,green,orange,red,brown'
};

// Loop through the years
for (var i_ano=0;i_ano<anos.length; i_ano++){
  // Get the current year
  var ano = anos[i_ano];
  // Define the asset path for the Sentinel 2 mosaics
  var asset = 'projects/mapbiomas-mosaics/assets/SENTINEL/BRAZIL/mosaics-3';
  // Define the band names to use for classification
  var bandNames = ee.List([
  // THE 60 MOST IMPORTANT BANDS FOR THIS REGION
  'longitude','latitude','ndvi_median_wet_'+ano,'ndwi_median_'+ano,'swir1_stdDev','rvi_median_wet','mbi_median_dry','green_median_texture_'+ano,
  'red_edge_2_stdDev','lswi_median_wet','afvi_median_wet','nddi_median','iia_median_wet','green_median_texture','cvi_median_wet','red_median',
  'rvi_median','nir_median_dry','blue_median_dry','ratio_median_wet','lswi_median','wetness_median','nir_median','brightness_median','swir2_median',
  'ratio_median','ndvi_median_dry','blue_median','red_edge_1_median','gvmi_median_1','green_median','avi_median','ui_median','red_stdDev',
  'red_edge_3_median','afvi_median','spri_median','ndwi_median','swir2_stdDev','evi_median','ri_median_dry','red_edge_3_median_wet','bsi_median_1',
  'dswi5_median_dry','red_edge_2_median_wet','spri_median_1','ndvi_median_wet','lai_median','ndvi_median_dry_'+ano,'gvmi_median_dry','swir1_median',
  'co2flux_median','bsi_median','red_edge_4_stdDev','green_median_wet','gvmi_median_wet_1','gemi_median_dry','ri_median_wet','awei_median','red_median_dry',

  // ALL 143 BANDS TO FEATURE IMPORTANCE
  //    'blue_median','afvi_median','afvi_median_dry','afvi_median_wet','avi_median','avi_median_dry','avi_median_wet','awei_median','awei_median_dry','awei_median_wet','blue_median_dry','blue_median_wet','blue_stdDev','brba_median','brba_median_dry','brba_median_wet','brightness_median','brightness_median_dry','brightness_median_wet','bsi_median','bsi_median_1','bsi_median_2','clusters_2023','co2flux_median','cvi_median','cvi_median_dry','cvi_median_wet','dswi5_median','dswi5_median_dry','dswi5_median_wet','evi_median','evi_median_dry','evi_median_wet','gcvi_median','gcvi_median_dry','gcvi_median_wet','gemi_median','gemi_median_dry','gemi_median_wet','gli_median','gli_median_dry','gli_median_wet','green_median','green_median_dry','green_median_texture','green_median_texture_2023','green_median_wet','green_min','green_stdDev','gvmi_median','gvmi_median_1','gvmi_median_dry','gvmi_median_dry_1','gvmi_median_wet','gvmi_median_wet_1','iia_median','iia_median_dry','iia_median_wet','lai_median','latitude','longitude','lswi_median','lswi_median_dry','lswi_median_wet','mbi_median','mbi_median_dry','mbi_median_wet','msi_median','msi_median_dry','msi_median_wet','nddi_median','nddi_median_dry','nddi_median_wet','ndvi_median','ndvi_median_dry','ndvi_median_dry_2023','ndvi_median_wet','ndvi_median_wet_2023','ndwi_median','ndwi_median_2023','ndwi_median_dry','ndwi_median_wet','nir_median','nir_median_contrast','nir_median_dry','nir_median_dry_contrast','nir_median_wet','nir_stdDev','osavi_median','osavi_median_dry','osavi_median_wet','ratio_median','ratio_median_dry','ratio_median_wet','red_edge_1_median','red_edge_1_median_dry','red_edge_1_median_wet','red_edge_1_stdDev','red_edge_2_median','red_edge_2_median_dry','red_edge_2_median_wet','red_edge_2_stdDev','red_edge_3_median','red_edge_3_median_dry','red_edge_3_median_wet','red_edge_3_stdDev','red_edge_4_median','red_edge_4_median_dry','red_edge_4_median_wet','red_edge_4_stdDev','red_median','red_median_contrast','red_median_dry','red_median_dry_contrast','red_median_wet','red_min','red_stdDev','ri_median','ri_median_dry','ri_median_wet','rvi_median','rvi_median_1','rvi_median_wet','shape_median','shape_median_dry','shape_median_wet','spri_median','spri_median_1','spri_median_wet','swir1_median','swir1_median_dry','swir1_median_wet','swir1_stdDev','swir2_median','swir2_median_dry','swir2_median_wet','swir2_stdDev','ui_median','ui_median_dry','ui_median_wet','wetness_median','wetness_median_dry','wetness_median_wet',
  ])
  // Filter the Sentinel 2 collection by version, year, and biome
  var collection = ee.ImageCollection(asset)
        .filter(ee.Filter.eq('version', '3'))
        .filter(ee.Filter.eq('year', ano))
        .filter(ee.Filter.inList('biome', [
            'MATAATLANTICA',
        ])); 

  // Create a mosaic of the filtered collection
  var mosaicoTotal = collection.mosaic()

  // Import the function to add indices for the Caatinga biome
  var addIndexCaatinga = require('users/marcosrosaUSP/MapBiomas_col9_MataAtlan:Mata_Atlantica_SENTINEL2/processa_Bandas_Sentinel2_CAATINGA');

  // Add the Caatinga indices to the mosaic
  mosaicoTotal = addIndexCaatinga.get(mosaicoTotal);

  // Add bands from the S2 cluster image to the mosaic
  mosaicoTotal = mosaicoTotal.addBands(S2_cluster.select([
    'clusters_'+ano, 'ndvi_median_dry_'+ano,'ndvi_median_wet_'+ano,'ndwi_median_'+ano, 'green_median_texture_'+ano
    ]))
    
  // Add the mosaic layer to the map
  Map.addLayer(mosaicoTotal, {'bands': ['swir1_median', 'nir_median', 'red_median'],
    'gain': [0.08, 0.07, 0.2],'gamma': 0.85}, 'Sentinel 2 '+ano, false);
  // Print the mosaic
  //print(mosaicoTotal)

  // Load the training data
  //var BDamostras = ee.FeatureCollection('projects/mapbiomas-workspace/AMOSTRAS/col9/MATA_ATLANTICA/teste/REGIONs_'+regiaoID+'_'+ano)
  var BDamostras = ee.FeatureCollection('projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/pontos_train_v1_'+ano)
                    .filterMetadata('reg_id', 'equals', regiaoID)

  // Filter the training data by reference class
  var BDflo = BDamostras.filterMetadata("reference", "equals", 3)
  var BDsav = BDamostras.filterMetadata("reference", "equals", 4)//.limit(100)
  var BDreflo = BDamostras.filterMetadata("reference", "equals", 9)
  var BDvarzea = BDamostras.filterMetadata("reference", "equals", 11)
  var BDcampo = BDamostras.filterMetadata("reference", "equals", 12)
  var BDOutroNFlo = BDamostras.filterMetadata("reference", "equals", 13)
  var BDagro = BDamostras.filterMetadata("reference", "equals", 21)
  var BDNaoVeg = BDamostras.filterMetadata("reference", "equals", 22)
  var BDAflora = BDamostras.filterMetadata("reference", "equals", 29)
  var BDagua = BDamostras.filterMetadata("reference", "equals", 33)

  // Complementary samples
  // Merge the training data sets for different land cover classes
  var amostraTotal = restinga.merge(agro).merge(sav).merge(umida).merge(flo).merge(restinga)
  
  // Convert the merged training data to an image with the 'reference' property as the band
  var amostraTotalimg = amostraTotal.reduceToImage({properties: ['reference'],reducer: ee.Reducer.first()})
  // Rename the band to 'reference'
  amostraTotalimg = amostraTotalimg.select([0],['reference'])

  // Sample the mosaic for the 'floresta' class, using the merged training data image
  var training_flo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 1000, 'region': flo.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the 'savana' class, using the merged training data image
  var training_sav = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 1200, 'region': sav.filterBounds(limite), 'scale': 10, 'seed': 1});
//var training_afl = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': sampleComplementar, 'region': aflora_r23.filterBounds(limite), 'scale': 10, 'seed': 1});
//var training_cam = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 500, 'region': campo.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the 'restinga' class, using the merged training data image
  var training_nflo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 500, 'region': restinga.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the 'agricultura' class, using the merged training data image
  var training_agr = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 600, 'region': agro.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the 'umida' class, using the merged training data image
  var training_umd = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 1200, 'region': umida.filterBounds(limite), 'scale': 10, 'seed': 1});
//var training_agu = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels':250, 'region': agua.filterBounds(limite), 'scale': 10, 'seed': 1});

  // If collecting data, print the size of each training set
  if (coleta) {
//print('BDflo',BDflo.size())
//print('BDsav',BDsav.size())
print('BDvar',BDvarzea.size())
//print('BDcam',BDcampo.size())
//print('BDOut',BDOutroNFlo.size())
//print('BDAfl',BDAflora.size())
//print('BDagr',BDagro.size())
//print('BDNao',BDNaoVeg.size())
//print('BDagu',BDagua.size())
//  print('training_agr',training_agr.size())
//  print('training_cam',training_cam.size())
print('training_flo',training_flo.size())
//print('training_agr',training_agr.size())
//print(training_sav.size())
//print(training_afl.size())
//print('training_cam',training_cam.size())
print('training_umd',training_umd.size())
//print('training_nflo',training_nflo.size())
//print('training_agu',training_agu.size())
}

  // Merge the training data sets
  var training = BDflo.merge(BDreflo).merge(BDcampo)//.merge(BDsav).merge(BDOutroNFlo).merge(BDAflora)
                      .merge(BDagro).merge(BDNaoVeg).merge(BDagua)
                      //complementares
                      .merge(training_flo).merge(training_umd).merge(training_agr).merge(training_sav).merge(training_nflo)//.merge(training_agr)
                      //.merge(training_agu)
                      //.merge(training_cam)

  // Train the Random Forest classifier
  var classifierRF = ee.Classifier.smileRandomForest({numberOfTrees: RFtrees, variablesPerSplit:1}).train(training, 'reference', bandNames);

  // If collecting data, print the classifier explanation
  if (coleta) {print(classifierRF.explain())}

  // Train the Gradient Tree Boost classifier
  var classifierGTB = ee.Classifier.smileGradientTreeBoost({numberOfTrees: 20, shrinkage: 0.1, samplingRate: 0.8, loss: 'LeastSquares'}).train(training, 'reference', bandNames);

  // Classify the mosaic using the Random Forest classifier
  var classifiedRF = mosaicoTotal.classify(classifierRF).mask(mosaicoTotal.select('blue_median'));

  // Classify the mosaic using the Gradient Tree Boost classifier
  var classifiedGTB = mosaicoTotal.classify(classifierGTB).mask(mosaicoTotal.select('blue_median'));

  // Rename the classification band and clip the classified image to the region boundary
  classifiedRF = classifiedRF.select(['classification'],['classification_'+ano]).clip(limite.geometry()).toInt8()
  classifiedGTB = classifiedGTB.select(['classification'],['classification_'+ano]).clip(limite.geometry()).toInt8()

  // If collecting data, add the classified layers to the map
  if (coleta) {  
    Map.addLayer(classifiedRF, vis, 'RF'+ano+"_"+regiaoID, false);
    Map.addLayer(classifiedGTB, vis, 'GTB'+ano+"_"+regiaoID, false);
  }

  // If this is the first year, initialize the classified images
  if (i_ano == 0){ var classified16a23RF = classifiedRF;  var classified16a23GTB = classifiedGTB}  
  // Otherwise, add the classified images for the current year to the existing images
  else {classified16a23RF = classified16a23RF.addBands(classifiedRF); classified16a23GTB = classified16a23GTB.addBands(classifiedGTB)}
}

// If collecting data, do nothing
if (coleta) {}
// Otherwise, export the classified images to assets
   else 
   {
     // Set metadata for the classified images
     classified16a23RF = classified16a23RF
     .set('territory', 'BRAZIL')
     .set('biome', 'MATA ATNTICA')
     .set('source', 'arcplan')
     .set('version', '1')
     .set('collection_id',versao_out)

     classified16a23GTB = classified16a23GTB
     .set('territory', 'BRAZIL')
     .set('biome', 'MATA ATNTICA')
     .set('source', 'arcplan')
     .set('version', '1')
     .set('collection_id',versao_out)
     
    // Export the Random Forest classified image to an asset
    Export.image.toAsset({
       "image": classified16a23RF.toInt8(),
       "description": regiaoID+'-'+'RF_SENTINEL2_v'+versao_out,
       "assetId": dirout + regiaoID+'-'+'RF_SENTINEL2_v'+versao_out,
       "scale": 10,
       "pyramidingPolicy": {
           '.default': 'mode'
       },
       "maxPixels": 1e13,
       "region": limite
     });    
     
    // Export the Gradient Tree Boost classified image to an asset
    Export.image.toAsset({
       "image": classified16a23GTB.toInt8(),
       "description": regiaoID+'-'+'GTB_SENTINEL2_v'+versao_out,
       "assetId": dirout + regiaoID+'-'+'GTB_SENTINEL2_v'+versao_out,
       "scale": 10,
       "pyramidingPolicy": {
           '.default': 'mode'
       },
       "maxPixels": 1e13,
       "region": limite
     });    
}
