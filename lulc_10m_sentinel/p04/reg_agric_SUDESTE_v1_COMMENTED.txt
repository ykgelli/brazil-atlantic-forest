var rev01_2000_agric = /* color: #dcff28 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.38587469061151, -21.326892870807892],
                  [-44.387247981627134, -21.331929826928025],
                  [-44.38510221441522, -21.331929826928025],
                  [-44.383986415465024, -21.3277723517958]]]),
            {
              "reference": 19,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.4045857806994, -21.329451346317853],
                  [-44.406474055845884, -21.331450124270955],
                  [-44.40381330450311, -21.333688723251466],
                  [-44.402954997618345, -21.331130321628223]]]),
            {
              "reference": 19,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.39703268011346, -21.329771152620083],
                  [-44.397719325621274, -21.326173291533767],
                  [-44.399950923521665, -21.325613616325725],
                  [-44.399178447325376, -21.32985110408674]]]),
            {
              "reference": 19,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.41351217230096, -21.31545913839346],
                  [-44.41248220403924, -21.31809777106816],
                  [-44.41050809820428, -21.316818439935606],
                  [-44.41050809820428, -21.314339704145652]]]),
            {
              "reference": 19,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.411194743712095, -21.31250061507005],
                  [-44.41256803472772, -21.311541081192306],
                  [-44.41522878607049, -21.311541081192306],
                  [-44.41256803472772, -21.313779983821618]]]),
            {
              "reference": 19,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.39977926214471, -21.30034605613999],
                  [-44.39729017217889, -21.303944550082182],
                  [-44.39583105047479, -21.303544721773886],
                  [-44.39806264837518, -21.30082586042388]]]),
            {
              "reference": 19,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.29427782631816, -21.392385075356305],
                  [-44.29256121254863, -21.399257803660145],
                  [-44.28741137124003, -21.399577457580154],
                  [-44.29101626015605, -21.391426064333086]]]),
            {
              "reference": 19,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.291187921533, -21.376240885330294],
                  [-44.28552309609355, -21.374162790902464],
                  [-44.289127985009564, -21.372724092864082]]]),
            {
              "reference": 19,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.30801073647441, -21.44863604209205],
                  [-44.30818239785136, -21.451192389242802],
                  [-44.306122461327924, -21.45183146902836],
                  [-44.30526415444316, -21.44767740035759]]]),
            {
              "reference": 19,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.20140902138652, -21.366009981764],
                  [-44.20278231240214, -21.362812677809263],
                  [-44.20484224892558, -21.36425147322595]]]),
            {
              "reference": 19,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.2388312015623, -21.31292570498754],
                  [-44.24655596352519, -21.31868275992727],
                  [-44.23951784707011, -21.315484423938223]]]),
            {
              "reference": 19,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.47932879067363, -21.29421371799077],
                  [-44.479843774804486, -21.300131441598193],
                  [-44.47658220864238, -21.300291376767134],
                  [-44.47744051552714, -21.2959730661131]]]),
            {
              "reference": 19,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.491860071191205, -21.282537510601063],
                  [-44.49203173256816, -21.27965830328787],
                  [-44.49477831459941, -21.279498345673673],
                  [-44.494606653222455, -21.285576612734072]]]),
            {
              "reference": 19,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.538839349445965, -22.09184398210237],
                  [-41.53257357437735, -22.0852030584294],
                  [-41.53214455574479, -22.080470850419484],
                  [-41.54973984688249, -22.098047122311538]]]),
            {
              "reference": 19,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.6018685526651, -22.06431819082056],
                  [-41.581097526053775, -22.067340856528457],
                  [-41.583844251827806, -22.06392065159723],
                  [-41.597577018241275, -22.062409105491007]]]),
            {
              "reference": 19,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.46088149612526, -21.706457660610123],
                  [-41.43650558059792, -21.711401735365758],
                  [-41.451783443146745, -21.707255103510526]]]),
            {
              "reference": 19,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.320961593714806, -21.553796415923877],
                  [-41.30036222848043, -21.560821181031447],
                  [-41.31083357247457, -21.55619126043655]]]),
            {
              "reference": 19,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.22500288399801, -21.544695646205394],
                  [-41.21298658761129, -21.557308841010183],
                  [-41.218823074427696, -21.546451979549325]]]),
            {
              "reference": 19,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.28745588922029, -21.476182079687135],
                  [-41.282821032042555, -21.48736365337027],
                  [-41.28179105991943, -21.4852072371177],
                  [-41.28316435479646, -21.48049507412949]]]),
            {
              "reference": 19,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.15556229020369, -21.45439620133323],
                  [-41.1368512001158, -21.457112211393667],
                  [-41.14131439591658, -21.454236434459784],
                  [-41.14929664604156, -21.45335786426974]]]),
            {
              "reference": 19,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.07641779604827, -21.29449311366519],
                  [-41.05847918215667, -21.313205065081856],
                  [-41.06144056775519, -21.30848724367299],
                  [-41.07418619814788, -21.29529281844759]]]),
            {
              "reference": 19,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.212306460980535, -21.25363699813521],
                  [-41.20029016459382, -21.251557167994978],
                  [-41.217284640912176, -21.252037131402776]]]),
            {
              "reference": 19,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.91191957773401, -21.062497965351884],
                  [-40.89046190561487, -21.07619379376507],
                  [-40.89226458624358, -21.073831191847617],
                  [-40.903851493017214, -21.065701780907453]]]),
            {
              "reference": 19,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.90629119642527, -21.14136379191507],
                  [-40.90560455091746, -21.13592003920294],
                  [-40.90783614881785, -21.143445173923244]]]),
            {
              "reference": 19,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.02142805216256, -21.22961993604621],
                  [-41.00477689859811, -21.233140155272135],
                  [-41.014904919838344, -21.22961993604621]]]),
            {
              "reference": 19,
              "system:index": "24"
            })]),
    rev_agric = 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-48.40556778449581, -24.36599731473524],
          [-48.50169272779935, -24.68582947247846],
          [-48.4152122384805, -24.731992462594896],
          [-48.3506346988925, -24.80056845139384],
          [-48.42753576657546, -24.902747682102454],
          [-48.424788549166315, -24.999863647098522],
          [-47.96886388770847, -25.027666354727415],
          [-47.710700377712364, -24.99737038441274],
          [-47.018587040754056, -24.458524987462372],
          [-47.04526550479658, -24.282560526775406],
          [-46.90872971653059, -23.977608892046955],
          [-46.75268748306781, -23.962782168094527],
          [-46.540468850577334, -23.88749253850744],
          [-46.304501211302544, -23.781718166675493],
          [-45.90900609077073, -23.630832241143594],
          [-45.79948591615602, -23.56357427011748],
          [-45.77928616691829, -23.516429125558428],
          [-45.78285024380543, -23.4750259712273],
          [-45.747432579509976, -23.466513375157195],
          [-45.72194741035477, -23.444447451079533],
          [-45.683382335772976, -23.422979386467873],
          [-45.47085067666693, -23.188357161307515],
          [-45.03287525796909, -22.737095771189047],
          [-44.90104341877857, -22.623060092419742],
          [-44.079839226887565, -22.645873656798504],
          [-43.56349443754996, -22.57997609826693],
          [-42.885454063994914, -22.75896653939956],
          [-41.923800043962146, -22.55716689553634],
          [-40.98176279243009, -22.20161024435415],
          [-40.838957599387676, -21.13725194394749],
          [-40.6206095758008, -20.84685355268958],
          [-40.42423322238386, -20.64715964822262],
          [-40.26081268815607, -20.35904007386697],
          [-40.14545639890078, -20.083281641094477],
          [-40.05207991656128, -19.812201476171033],
          [-40.02324212978501, -19.557484285015946],
          [-39.99577387420374, -19.424140653852067],
          [-39.95868828574264, -19.32827870903325],
          [-39.88864957357225, -19.14675485780577],
          [-39.84516133245232, -18.959402123050488],
          [-39.79390182964916, -18.695149258843553],
          [-39.77467623625617, -18.561120509500245],
          [-39.771930389954036, -18.390497333041015],
          [-39.74583889551104, -18.25622259706443],
          [-39.86806083845191, -18.1844820743315],
          [-40.0656911525181, -18.086135084940672],
          [-40.23335224636099, -17.970337569763203],
          [-40.2882832257472, -17.96249759945782],
          [-40.53822195960544, -17.891938794352182],
          [-40.887037516277076, -17.97816997817267],
          [-40.78541315973956, -18.111354356361918],
          [-40.77991955867559, -18.163554579394187],
          [-40.996899728186904, -18.17399205955945],
          [-41.1225551052455, -18.256172993424943],
          [-41.169756567946415, -18.429696682771255],
          [-41.193622592269655, -18.49629692154112],
          [-41.248210659727704, -18.609237006660436],
          [-41.267479385858934, -18.641824669187788],
          [-41.24409089771025, -18.70551818908911],
          [-41.16306571786757, -18.741929178109167],
          [-41.20250464338218, -18.969296212684394],
          [-41.246833289064575, -19.02129262709047],
          [-41.370431990409486, -18.9758398916617],
          [-41.53659162411731, -18.952459074039517],
          [-41.63408633851574, -19.08619290781743],
          [-41.69450304603584, -19.18609393981196],
          [-42.12570646896338, -19.478948956975376],
          [-42.40997370469365, -19.932734098300134],
          [-42.517089344836904, -20.179117758389943],
          [-42.971641608828584, -20.37491501458994],
          [-43.35066710380248, -20.418667253549277],
          [-43.53192485829789, -20.56788519887991],
          [-43.661007491088995, -20.701551489457405],
          [-44.23777470648298, -20.544751073833282],
          [-44.57284904842615, -20.490733573207375],
          [-44.699188427154056, -20.547323489566395],
          [-45.10567134440307, -20.799150600359624],
          [-45.20729100690302, -21.263151907704607],
          [-45.27320639404048, -21.56231225054021],
          [-45.451729101656035, -21.633815465320176],
          [-45.94747561884635, -21.444128882793176],
          [-45.959448805107215, -21.42544324456514],
          [-46.004379669840624, -21.437432497763965],
          [-46.02831819277486, -21.420499970531598],
          [-46.058338813689026, -21.4173070018675],
          [-46.07717562236543, -21.408358040736434],
          [-46.13789834598984, -21.41536877566065],
          [-46.15331318648502, -21.412776847947036],
          [-46.15723678196478, -21.387005341562865],
          [-46.16187746279547, -21.3714684454833],
          [-46.180249214395175, -21.36360382432072],
          [-46.19639115635083, -21.356825637387598],
          [-46.231416845829166, -21.35221642543525],
          [-46.26164319813118, -21.36345275790181],
          [-46.28878838386392, -21.36381556042449],
          [-46.304948104658614, -21.36929124914028],
          [-46.32799466728106, -21.359775610514973],
          [-46.34500996214127, -21.355016174780495],
          [-46.36202459700632, -21.354092010948108],
          [-46.369773546988675, -21.332628338945955],
          [-46.382437013288495, -21.339973409992012],
          [-46.39647464191748, -21.342200842698414],
          [-46.415318854171524, -21.332274952735325],
          [-46.42729560063151, -21.33258109541738],
          [-46.440266525811744, -21.351737216868557],
          [-46.463920067895465, -21.34980305347163],
          [-46.48070838576395, -21.360656681600954],
          [-46.500291761695934, -21.35809397458601],
          [-46.517814065916944, -21.351051985643377],
          [-46.53241122927899, -21.35584375002195],
          [-46.54426105978224, -21.34272798345629],
          [-46.56109274799036, -21.33568031880038],
          [-46.59543796419033, -21.31390331719735],
          [-46.62565654170799, -21.304913497569398],
          [-46.638274529028244, -21.308428680380135],
          [-46.64814598272769, -21.30554599754636],
          [-46.666515548350034, -21.304896594065955],
          [-46.67166798123384, -21.29847929166983],
          [-46.6957033913468, -21.290758341558934],
          [-46.70669585796475, -21.294506832738787],
          [-46.702283630694765, -21.336632897455253],
          [-46.715037429319764, -21.355732084394706],
          [-46.72544218162075, -21.396490788378408],
          [-46.74076432614986, -21.405116225426077],
          [-46.75334906960813, -21.465522843148666],
          [-46.77418197960985, -21.478636608911778],
          [-46.80038107684512, -21.508701291715383],
          [-46.82710914690317, -21.550420495252066],
          [-46.82919758972961, -21.556913166377353],
          [-46.83403291692054, -21.563086457471993],
          [-46.83992848853619, -21.590439362538607],
          [-46.850203586596386, -21.59769001997754],
          [-46.854642983690496, -21.605898008054442],
          [-46.877642406185515, -21.621346499826295],
          [-46.89085934754286, -21.61987656832659],
          [-46.90118967625195, -21.632232304644894],
          [-46.90877521252228, -21.64873638075953],
          [-46.914817622734404, -21.658539050920222],
          [-46.92601173197172, -21.679828076315957],
          [-46.970809519980584, -21.736579622492375],
          [-47.00276463762362, -21.75696939393339],
          [-47.05960487940866, -21.77337949710336],
          [-47.062797869212375, -21.788277443735264],
          [-47.058043289683944, -21.797161497734784],
          [-47.0582407375801, -21.802878947203272],
          [-47.067537121676885, -21.82580908253822],
          [-47.04602527373226, -21.944410483771613],
          [-47.02791423313907, -22.058551204497878],
          [-47.002478357649466, -22.09613158432366],
          [-47.00041992826405, -22.11997945307982],
          [-46.99470749841984, -22.146253412017284],
          [-46.98041569455403, -22.208443727358507],
          [-46.97723985590047, -22.22726695803532],
          [-46.97578397331358, -22.253711713891132],
          [-46.97192667660094, -22.26712363338267],
          [-46.973464242361864, -22.276993405683715],
          [-46.964713074227426, -22.30813659810654],
          [-46.95470606755147, -22.345881012181803],
          [-46.96859031705426, -22.359989363044672],
          [-46.97142079078753, -22.40053781535196],
          [-46.9848534713297, -22.4373153746125],
          [-46.980435179924825, -22.456321624579225],
          [-46.980753721763065, -22.488913684349868],
          [-46.98208307611104, -22.498897293274428],
          [-46.988185283927116, -22.513790892811215],
          [-46.99009707367954, -22.52518493523611],
          [-46.9966822206363, -22.546074818152462],
          [-46.99749988255476, -22.55741680963169],
          [-46.99983053925118, -22.569959746851325],
          [-47.00312460136616, -22.576659228349353],
          [-47.00353971066679, -22.587528294802595],
          [-47.00643659893512, -22.59532180320856],
          [-47.00500043723474, -22.628055641786613],
          [-47.00192602483632, -22.635104352746126],
          [-47.0042761629383, -22.642582827378746],
          [-47.000041578291324, -22.672757045276438],
          [-47.0102040937733, -22.688385603168886],
          [-47.01117271795333, -22.69424008483499],
          [-47.0128553644268, -22.72759569609523],
          [-47.01829087557951, -22.741097592430478],
          [-47.019573612269156, -22.775703038202337],
          [-47.02970551625835, -22.789189588422364],
          [-47.03101101857091, -22.80526782785498],
          [-47.03472513119109, -22.821956164557232],
          [-47.03152669212819, -22.831905808240215],
          [-47.037848904045454, -22.84418613590456],
          [-47.074406135312216, -22.926324236088234],
          [-47.09104508756235, -22.951469870534773],
          [-47.10134052719066, -22.97663027662409],
          [-47.11061544827297, -23.002734935977607],
          [-47.116798402960065, -23.016357929272438],
          [-47.13229365076728, -23.03487566311102],
          [-47.13508622068512, -23.04628565932785],
          [-47.15714336333932, -23.06721608893488],
          [-47.17345060473823, -23.082843462812868],
          [-47.1881386558375, -23.095020458344905],
          [-47.20663389325371, -23.110017144763635],
          [-47.22167786537839, -23.121683715432994],
          [-47.23614422260749, -23.132187223724106],
          [-47.249298078296235, -23.146434302250718],
          [-47.260681009508964, -23.159239124634734],
          [-47.26588443180168, -23.16793904724342],
          [-47.271110997255995, -23.176927884105517],
          [-47.280598202928346, -23.190664293067986],
          [-47.29059966119987, -23.206289915072066],
          [-47.297213127446526, -23.21796940529039],
          [-47.30056373247494, -23.22522237638452],
          [-47.303954593982645, -23.23137053966241],
          [-47.30556365536739, -23.24343431080125],
          [-47.303449613170145, -23.2497806063241],
          [-47.30316523981945, -23.26068131547249],
          [-47.2908660248797, -23.279149503474816],
          [-47.301047898813465, -23.297415414544215],
          [-47.302733969069315, -23.31102989241981],
          [-47.298981800283585, -23.31965596662469],
          [-47.29935011659891, -23.323435406386263],
          [-47.30375269812591, -23.33336253430458],
          [-47.30775254761557, -23.355383881288557],
          [-47.30537549222967, -23.359460345211158],
          [-47.30602574728466, -23.361425020810987],
          [-47.307534339919336, -23.363232100074242],
          [-47.31080917373961, -23.36905243208627],
          [-47.32113065844593, -23.371922674314117],
          [-47.325873580534676, -23.375737879822154],
          [-47.326262381129595, -23.383045964663275],
          [-47.334634178418234, -23.40154064208865],
          [-47.34120428741815, -23.412472201547107],
          [-47.3457151113674, -23.41710236349759],
          [-47.39203795196864, -23.44938378458789],
          [-47.422503085508794, -23.469455685822638],
          [-47.44001268478795, -23.478895244747836],
          [-47.4878610941822, -23.53438583269246],
          [-47.49965330639278, -23.536901557368864],
          [-47.50457970090505, -23.535325823007074],
          [-47.51134341953427, -23.52713801437502],
          [-47.516290047855826, -23.524926830040567],
          [-47.52261256349642, -23.52570601081466],
          [-47.53212550023934, -23.521688341094716],
          [-47.53614662948064, -23.514837357960992],
          [-47.55347559510836, -23.509206705893433],
          [-47.55883803655898, -23.508607982974002],
          [-47.57965203861664, -23.516194140711562],
          [-47.592914741006865, -23.51890022958847],
          [-47.60023322125176, -23.51741986887386],
          [-47.60532072607052, -23.51751366208359],
          [-47.61146805163014, -23.522448987832018],
          [-47.619503275378264, -23.52832802300427],
          [-47.63213997198614, -23.53316036644027],
          [-47.64695560786053, -23.543051874749064],
          [-47.657308202280866, -23.544444575151044],
          [-47.66891555343532, -23.546914950241575],
          [-47.677339705590974, -23.547289708467844],
          [-47.686959071767454, -23.544801806560276],
          [-47.69383185677899, -23.54420229942273],
          [-47.69900707456027, -23.542905896500066],
          [-47.70455102283046, -23.542044161962732],
          [-47.70825745390348, -23.540950100337227],
          [-47.71258021806874, -23.537502966934788],
          [-47.718479019067615, -23.536903687282475],
          [-47.72300447501041, -23.535045038181472],
          [-47.72732721255281, -23.53584685812508],
          [-47.737829820419364, -23.53822236006173],
          [-47.74694728974017, -23.54316992842565],
          [-47.754348156448664, -23.54497012417325],
          [-47.75850675981667, -23.5469968635851],
          [-47.76184579429694, -23.551364481600586],
          [-47.76937271308746, -23.55226969476673],
          [-47.78427985357209, -23.553803058912802],
          [-47.793838438470445, -23.555924184115565],
          [-47.80128284999107, -23.557019560229236],
          [-47.81308193933951, -23.55952482616609],
          [-47.82466420032825, -23.556352796432538],
          [-47.83581320878335, -23.55882060823011],
          [-47.84781238708843, -23.561867025127594],
          [-47.88176770098254, -23.568274232073065],
          [-47.90367392751575, -23.57259153629719],
          [-47.92723183013886, -23.57996637745357],
          [-47.94653954608565, -23.582759533427232],
          [-47.951854443251435, -23.594325140849072],
          [-47.96161807471314, -23.59635074537861],
          [-47.98337422093032, -23.59269116609797],
          [-48.02985332789372, -23.59814559445994],
          [-48.082334949719126, -23.6183791343358],
          [-48.11819833319473, -23.63855828378914],
          [-48.11227290717986, -23.663744298383968],
          [-48.10497266113888, -23.668804134134838],
          [-48.116766367065836, -23.748521118051034],
          [-48.13364791661662, -23.76827044836381],
          [-48.09917360507591, -23.78757223328524],
          [-48.08563339414576, -23.81315330783149],
          [-48.06170774283822, -23.83567503365081],
          [-48.02129236322576, -23.854421573743327],
          [-48.01792570847358, -23.864137718999284],
          [-48.007691512348096, -23.875109447318966],
          [-48.00939744360967, -23.890471141464428],
          [-48.00802676716816, -23.90331530910575],
          [-48.01490222624742, -23.91142490820207],
          [-48.022479201562, -23.923877566967196],
          [-48.024591112239406, -23.93434756540071],
          [-48.02195097930037, -23.94399335726488],
          [-48.02285358491765, -23.9519905494971],
          [-48.020359838122225, -23.96877374726719],
          [-48.01722425685775, -23.9715194052631],
          [-48.017372829005026, -23.97571573139138],
          [-48.01401388263148, -23.9770298875728],
          [-48.01205818235964, -23.983553684358693],
          [-48.01662573398951, -23.98882274298416],
          [-48.01444639683521, -23.992241497151298],
          [-48.013983580748345, -23.997855849580766],
          [-48.01437904304507, -24.00394059731385],
          [-48.01546121172215, -24.00845718004094],
          [-48.01329328429442, -24.012220504286994],
          [-48.01549764124682, -24.01959011942353],
          [-48.01564218771781, -24.026018944352277],
          [-48.01269646422583, -24.03385954612419],
          [-48.00744657851603, -24.039818139752157],
          [-48.00241793855268, -24.04232721181563],
          [-47.99801508019246, -24.051106373328487],
          [-47.99323851017715, -24.055809485711386],
          [-47.99351086394689, -24.059963696111364],
          [-47.99755988150463, -24.062550398260306],
          [-47.997604637027436, -24.071881130623986],
          [-47.99387247029048, -24.088421446204293],
          [-48.22018934375054, -24.233753619617467]]]),
    geometry = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-56.05851880152852, -30.04613371617718],
          [-49.20305005152852, -30.841736663987348],
          [-41.46867505152852, -23.861579784474333],
          [-34.17375317652852, -8.163484389272043],
          [-34.26164380152852, -4.801825741437062],
          [-35.66789380152852, -4.582835761516412],
          [-49.07121411402852, -16.947367124654484],
          [-56.10246411402852, -21.01873071079243]]]),
    rev01_1985_agric = /* color: #d63000 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.21213640414605, -21.38633193494914],
                  [-44.2084885998858, -21.385492765924198],
                  [-44.20548452578912, -21.38341480286216],
                  [-44.21222223483453, -21.383854374432445]]]),
            {
              "reference": 19,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.32633413516412, -21.347605267949763],
                  [-44.32805074893365, -21.34216912701153],
                  [-44.33148397647271, -21.34824480069077]]]),
            {
              "reference": 19,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.44958700381646, -21.29451433092071],
                  [-44.45542349063287, -21.29163535809746],
                  [-44.4571401044024, -21.29515409500234],
                  [-44.448213712800836, -21.297393247359924]]]),
            {
              "reference": 19,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.49181570254693, -21.3050700821623],
                  [-44.491472379793024, -21.301551582661865],
                  [-44.49662222110162, -21.301231714893053],
                  [-44.49524893008599, -21.306669372262572]]]),
            {
              "reference": 19,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.50554861270318, -21.30251118179061],
                  [-44.50932516299615, -21.30411049974551],
                  [-44.50383199893365, -21.305709800291606]]]),
            {
              "reference": 19,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.24530996524224, -21.371905550116924],
                  [-44.244966642488336, -21.374782948142915],
                  [-44.24119009219537, -21.376381478164546],
                  [-44.23810018741021, -21.3744632400439],
                  [-44.23913015567193, -21.372225263801376]]]),
            {
              "reference": 19,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.23913015567193, -21.32841798867023],
                  [-44.24355043612847, -21.3276584405601],
                  [-44.24084676944146, -21.33257544550887]]]),
            {
              "reference": 19,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.23273577292187, -21.34156954499698],
                  [-44.236297738632096, -21.34416773008621],
                  [-44.2341519781592, -21.34420770137812]]]),
            {
              "reference": 19,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.73008169375787, -21.412183973676868],
                  [-44.727678434480524, -21.416658669160633],
                  [-44.720125333894586, -21.416978285021976],
                  [-44.72046865664849, -21.412503599327938]]]),
            {
              "reference": 19,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.700899259675836, -21.400357333117473],
                  [-44.706392423738336, -21.392365818098785],
                  [-44.71051229678521, -21.39396415604083],
                  [-44.70604910098443, -21.39971802798875]]]),
            {
              "reference": 19,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.382295744050836, -21.457563812385033],
                  [-44.38950552188287, -21.45660522934653],
                  [-44.38813223086724, -21.46075904365286]]]),
            {
              "reference": 19,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.90954735854932, -24.401408693673126],
                  [-47.91452553848096, -24.414695829327137],
                  [-47.90508416274854, -24.409537460363023]]]),
            {
              "reference": 19,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.895127802885256, -24.395468110209084],
                  [-47.892381220854006, -24.40641107356266],
                  [-47.8865447340376, -24.40312828411031]]]),
            {
              "reference": 19,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.86388543227979, -24.401408693673126],
                  [-47.86834862808057, -24.40641107356266],
                  [-47.863713770902834, -24.407817957202706]]]),
            {
              "reference": 19,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.82938149551221, -24.412820083183185],
                  [-47.83006814102002, -24.42079181177832],
                  [-47.82629159072705, -24.412507456115954]]]),
            {
              "reference": 19,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.83487465957471, -24.437046325155734],
                  [-47.83401635268994, -24.448767029809915],
                  [-47.83006814102002, -24.439390553266303]]]),
            {
              "reference": 19,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.837964564359865, -24.4700177937078],
                  [-47.84311440566846, -24.45908034828694],
                  [-47.84328606704541, -24.47017403604541]]]),
            {
              "reference": 19,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.97563698867627, -24.451267305748367],
                  [-47.975293665922365, -24.4476731434878],
                  [-47.98216012100049, -24.44642297606504]]]),
            {
              "reference": 19,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.99022820571729, -24.44501652289178],
                  [-47.99160149673291, -24.453455006498945],
                  [-47.9883399305708, -24.44642297606504]]]),
            {
              "reference": 19,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.02490380386182, -24.466267919437282],
                  [-48.025762110746584, -24.471736448756875],
                  [-48.02215722183057, -24.472205168789106],
                  [-48.018209010160646, -24.461736672366765]]]),
            {
              "reference": 19,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.801634974610856, -24.4896998515334],
                  [-47.804381556642106, -24.501103248487706],
                  [-47.799403376710465, -24.495479784706006]]]),
            {
              "reference": 19,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.75185317529445, -24.49657325569427],
                  [-47.755973048341325, -24.498603962302088],
                  [-47.75253982080226, -24.50360248498815]]]),
            {
              "reference": 19,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.69366117541205, -24.53025327911755],
                  [-47.70069929186713, -24.535406703973788],
                  [-47.69657941882026, -24.536968306099926]]]),
            {
              "reference": 19,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.948059831590825, -24.420951052293027],
                  [-47.943081651659185, -24.41376089705105],
                  [-47.95149305912989, -24.41673079343663]]]),
            {
              "reference": 19,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.95938948246973, -24.428609680073556],
                  [-47.96488264653223, -24.425952657798],
                  [-47.96488264653223, -24.431891806792073]]]),
            {
              "reference": 19,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.04691732143816, -24.345735145856423],
                  [-48.05017888760027, -24.350739728672693],
                  [-48.04837644314226, -24.35214723194666],
                  [-48.0464023373073, -24.349332209749953]]]),
            {
              "reference": 19,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.07541311001238, -24.327670084570247],
                  [-48.07481229519304, -24.331658696308295],
                  [-48.07326734280046, -24.328217548516385]]]),
            {
              "reference": 19,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.10038984035906, -24.289640213658767],
                  [-48.10159146999773, -24.283224965615947],
                  [-48.10433805202898, -24.28619792573852],
                  [-48.102964761013354, -24.293551791187742]]]),
            {
              "reference": 19,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.00374448513445, -24.254587103013588],
                  [-47.99962461208757, -24.25646519333743],
                  [-48.0009979031032, -24.251456890834973]]]),
            {
              "reference": 19,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.039278390163744, -24.240344015440606],
                  [-48.032755257839526, -24.240187489136662],
                  [-48.034300210232104, -24.235804674459068]]]),
            {
              "reference": 19,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.94623792385515, -24.27023700801426],
                  [-47.94623792385515, -24.272427840947493],
                  [-47.94400630988783, -24.27172364623753],
                  [-47.9434913418239, -24.26945455852677]]]),
            {
              "reference": 19,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.88223136901566, -24.584894641284794],
                  [-47.87811149596879, -24.591138467872476],
                  [-47.87811149596879, -24.586923919076607]]]),
            {
              "reference": 19,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.85167564391801, -24.57365496893855],
                  [-47.846010818478554, -24.574903871222116],
                  [-47.84910072326371, -24.571937707972488]]]),
            {
              "reference": 19,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.054751052853554, -24.71844447980155],
                  [-48.06281913757035, -24.713298595489416],
                  [-48.06676734924027, -24.717664814034503]]]),
            {
              "reference": 19,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.04015983581254, -24.708308443925148],
                  [-48.03706993102738, -24.71049165984381],
                  [-48.03569664001176, -24.704253798523226]]]),
            {
              "reference": 19,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-48.02196372985551, -24.701134750694788],
                  [-48.02488197326371, -24.705345446810142],
                  [-48.020247116085976, -24.704721648960717]]]),
            {
              "reference": 19,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.98900474548051, -24.672279856691155],
                  [-47.986086502072304, -24.671031926842065],
                  [-47.98848976134965, -24.67056394992982]]]),
            {
              "reference": 19,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.18285158034448, -23.7213684187765],
                  [-47.18594148512964, -23.722782834523052],
                  [-47.18267991896753, -23.72451154404276]]]),
            {
              "reference": 19,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.09581926222925, -23.69889286598607],
                  [-47.09702089186792, -23.695749123433828],
                  [-47.098394182883546, -23.698735680656576]]]),
            {
              "reference": 19,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.21237733718042, -23.69614209539317],
                  [-47.214523104392335, -23.697006629539842],
                  [-47.21194818373804, -23.698342716504758]]]),
            {
              "reference": 19,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.210746554099366, -23.696928035763086],
                  [-47.20834329482202, -23.697792564704788],
                  [-47.209029940329835, -23.696928035763086]]]),
            {
              "reference": 19,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.23392083998804, -23.689068419153376],
                  [-47.230745104514405, -23.690954770287174],
                  [-47.23229005690698, -23.688989820598135]]]),
            {
              "reference": 19,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.178817537986085, -23.70832363933239],
                  [-47.1783883845437, -23.711624248980016],
                  [-47.17727258559351, -23.709109506346255]]]),
            {
              "reference": 19,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.171092776023194, -23.728990366619385],
                  [-47.17315271254663, -23.731426152887867],
                  [-47.17040613051538, -23.730404699672228]]]),
            {
              "reference": 19,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.20594003554468, -23.774712690769103],
                  [-47.20817163344507, -23.78091774762338],
                  [-47.20362260695581, -23.781074833827507],
                  [-47.20516755934839, -23.77541961092373]]]),
            {
              "reference": 19,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.228513506614014, -23.77306319546616],
                  [-47.22619607802515, -23.772434810800817],
                  [-47.226968554221436, -23.770235440566577],
                  [-47.22954347487573, -23.771020934204696]]]),
            {
              "reference": 19,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.245507982932374, -23.756252860336808],
                  [-47.24593713637476, -23.753424740125496],
                  [-47.244220522605225, -23.753031940792706],
                  [-47.24413469191675, -23.751460731610965],
                  [-47.246709612571046, -23.75208921755895],
                  [-47.24713876601343, -23.75570295288523]]]),
            {
              "reference": 19,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.25615098830347, -23.749575255565464],
                  [-47.2538335597146, -23.74847538193102],
                  [-47.25580766554956, -23.746275606793553]]]),
            {
              "reference": 19,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.288944985784966, -23.70289611981627],
                  [-47.2921207212586, -23.702031624677563],
                  [-47.292979028143364, -23.70313189022389],
                  [-47.290489938177544, -23.703917788506292]]]),
            {
              "reference": 19,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.28328016034551, -23.704860860197815],
                  [-47.28139188519903, -23.705096627055784],
                  [-47.27958944074102, -23.70368201951851],
                  [-47.28379514447637, -23.70368201951851]]]),
            {
              "reference": 19,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-47.27916028729864, -23.698730772385026],
                  [-47.279246117987114, -23.697394689391984],
                  [-47.2825935148377, -23.697473282887778],
                  [-47.281220223822075, -23.69928092023078]]]),
            {
              "reference": 19,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.084812315999294, -23.592036938678582],
                  [-46.087558898030544, -23.588340016104645],
                  [-46.08747306734207, -23.592980817110345]]]),
            {
              "reference": 19,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.130731734334255, -23.612171538710992],
                  [-46.131504210530544, -23.611070507691387],
                  [-46.13467994600418, -23.61248611730353],
                  [-46.13330665498855, -23.613901711626323]]]),
            {
              "reference": 19,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.13382163911941, -23.608711124363378],
                  [-46.13528076082351, -23.60572251118713],
                  [-46.137941512166286, -23.606666291129354],
                  [-46.13665405183914, -23.609733529019493]]]),
            {
              "reference": 19,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.136739882527614, -23.59211559547393],
                  [-46.137941512166286, -23.593531409726104],
                  [-46.13467994600418, -23.592902160833738]]]),
            {
              "reference": 19,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.056574019490505, -23.60761006427758],
                  [-46.05322662263992, -23.606902235053354],
                  [-46.05339828401687, -23.60501467177204],
                  [-46.05648818880203, -23.605250618668336]]]),
            {
              "reference": 19,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.118483860897975, -23.6622037822369],
                  [-46.11505063335891, -23.65937362270175],
                  [-46.1169389085054, -23.659295006284765],
                  [-46.12080128948684, -23.662125167521378]]]),
            {
              "reference": 19,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.11565144817825, -23.656700638011504],
                  [-46.112475712704615, -23.656936491799325],
                  [-46.11359151165481, -23.655285506353195]]]),
            {
              "reference": 19,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.142945607113795, -23.661653478235635],
                  [-46.14208730022903, -23.664876654441475],
                  [-46.14114316265579, -23.66149624809561]]]),
            {
              "reference": 19,
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.255812962460475, -23.683035015625208],
                  [-46.25641377727981, -23.68696506462499],
                  [-46.25298054974075, -23.684528448174817]]]),
            {
              "reference": 19,
              "system:index": "59"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.2641385392427, -23.68602186364949],
                  [-46.2641385392427, -23.68798685799508],
                  [-46.26164944927688, -23.687672460886514]]]),
            {
              "reference": 19,
              "system:index": "60"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.267056782650904, -23.692722372879658],
                  [-46.2655976609468, -23.69657353635947],
                  [-46.264567692685084, -23.691307631235073]]]),
            {
              "reference": 19,
              "system:index": "61"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.2476590470552, -23.69335114202357],
                  [-46.250577290463404, -23.69311535394943],
                  [-46.24989064495559, -23.696809318188027]]]),
            {
              "reference": 19,
              "system:index": "62"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.02825549993265, -23.583755395636103],
                  [-46.02499393377054, -23.589025629289978],
                  [-46.02473644170511, -23.583676733829268]]]),
            {
              "reference": 19,
              "system:index": "63"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.6144470199203, -22.88730394685605],
                  [-46.61856689296717, -22.886038766936892],
                  [-46.613760374412486, -22.891573842009496]]]),
            {
              "reference": 19,
              "system:index": "64"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.573076628074595, -22.89853190177633],
                  [-46.57736816249842, -22.89299711053779],
                  [-46.57719650112147, -22.898848168740944]]]),
            {
              "reference": 19,
              "system:index": "65"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.67727508388514, -22.951496329742678],
                  [-46.66852035366053, -22.944857148960978],
                  [-46.6748718246078, -22.945963701711214],
                  [-46.68002166591639, -22.949125231142727]]]),
            {
              "reference": 19,
              "system:index": "66"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.66525878749842, -22.90738709802434],
                  [-46.66285552822108, -22.909126443626263],
                  [-46.660452268943736, -22.909442685883825],
                  [-46.661997221336314, -22.90707085097218]]]),
            {
              "reference": 19,
              "system:index": "67"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.688433073387095, -22.87765665212614],
                  [-46.68980636440272, -22.872121009586692],
                  [-46.69375457607264, -22.878131125272663]]]),
            {
              "reference": 19,
              "system:index": "68"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.70577087245936, -22.891415700140374],
                  [-46.710920713767955, -22.893787808824843],
                  [-46.70731582485194, -22.89457850250398]]]),
            {
              "reference": 19,
              "system:index": "69"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.61067046962733, -22.938059555023578],
                  [-46.61496200405116, -22.937901467382265],
                  [-46.61290206752772, -22.93995659232073]]]),
            {
              "reference": 19,
              "system:index": "70"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.649465940818736, -22.949915601959454],
                  [-46.65169753871913, -22.94501522847922],
                  [-46.65238418422694, -22.94817678006878]]]),
            {
              "reference": 19,
              "system:index": "71"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.20644661692219, -22.60533205713734],
                  [-46.203871696267896, -22.60976924071511],
                  [-46.198378532205396, -22.60755066681284]]]),
            {
              "reference": 19,
              "system:index": "72"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.178465812478834, -22.584094983804505],
                  [-46.177950828347974, -22.588374359103796],
                  [-46.175719230447584, -22.586947915443734]]]),
            {
              "reference": 19,
              "system:index": "73"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.182414024148756, -22.565549488159625],
                  [-46.18361565378743, -22.568561319563223],
                  [-46.181212394510084, -22.569195380948234]]]),
            {
              "reference": 19,
              "system:index": "74"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.193400352273756, -22.54684295710492],
                  [-46.18979546335774, -22.54684295710492],
                  [-46.19151207712727, -22.54557462589824]]]),
            {
              "reference": 19,
              "system:index": "75"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.38449055203099, -22.86166403358656],
                  [-45.36097294338841, -22.856444105104192],
                  [-45.3767657900681, -22.85312222805608]]]),
            {
              "reference": 19,
              "system:index": "76"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.424830975614974, -22.89013284032765],
                  [-45.43839222439427, -22.900886169216008],
                  [-45.410583081327864, -22.88918397627256]]]),
            {
              "reference": 19,
              "system:index": "77"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.45281178005833, -22.883332501339495],
                  [-45.461223187529036, -22.871628794801445],
                  [-45.46242481716771, -22.875108380491803]]]),
            {
              "reference": 19,
              "system:index": "78"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.28157026130476, -22.865509768163975],
                  [-45.29341489631452, -22.872469163907883],
                  [-45.27607709724226, -22.868356836789168]]]),
            {
              "reference": 19,
              "system:index": "79"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.554534456361395, -22.917996768857925],
                  [-45.55899765216218, -22.93001266945938],
                  [-45.55110122882233, -22.922423803591833]]]),
            {
              "reference": 19,
              "system:index": "80"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.59487487994538, -22.95261864503956],
                  [-45.59556152545319, -22.959257444970387],
                  [-45.588008424867255, -22.950879857885646]]]),
            {
              "reference": 19,
              "system:index": "81"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.610496065248114, -22.999083398986397],
                  [-45.62354232989655, -23.014568098537914],
                  [-45.610496065248114, -23.004771862445804],
                  [-45.598994752992255, -22.991024332062626]]]),
            {
              "reference": 19,
              "system:index": "82"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.64122345172272, -22.984071025081686],
                  [-45.645171663392645, -22.996081057730432],
                  [-45.636931917298895, -22.981858534158242]]]),
            {
              "reference": 19,
              "system:index": "83"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.66213854081648, -23.044889648939805],
                  [-45.66814668900984, -23.05405116415381],
                  [-45.65561540849226, -23.045047611379143]]]),
            {
              "reference": 19,
              "system:index": "84"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.76465705664188, -23.096991102648268],
                  [-45.77135185034305, -23.102517536620226],
                  [-45.755044019532505, -23.098570106983015]]]),
            {
              "reference": 19,
              "system:index": "85"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.83217553370169, -23.14874607108906],
                  [-45.79595498316458, -23.129172424076224],
                  [-45.81432275049856, -23.135644671953585]]]),
            {
              "reference": 19,
              "system:index": "86"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.85552148096731, -23.131698216506027],
                  [-45.85998467676809, -23.137538929316317],
                  [-45.849341671397, -23.13201393721544]]]),
            {
              "reference": 19,
              "system:index": "87"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.15709046171501, -22.729879967162866],
                  [-45.16086701200798, -22.7316215815647],
                  [-45.15760544584587, -22.734471448198708],
                  [-45.15503052519157, -22.73288819628991]]]),
            {
              "reference": 19,
              "system:index": "88"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.04975192418676, -22.681874544108133],
                  [-45.05318515172582, -22.690743823170855],
                  [-45.04494540563207, -22.68076584387333]]]),
            {
              "reference": 19,
              "system:index": "89"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.638339247742174, -20.306056780633824],
                  [-41.63464852813768, -20.30662025514143],
                  [-41.634305205383775, -20.305332310396754],
                  [-41.637309279480455, -20.30388335975405]]]),
            {
              "reference": 19,
              "system:index": "90"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.62468236251024, -20.298064429537334],
                  [-41.6263131455913, -20.295085876524613],
                  [-41.62657063765673, -20.29733992191316],
                  [-41.6277722672954, -20.300076932935873],
                  [-41.625883992148914, -20.30023793207817]]]),
            {
              "reference": 19,
              "system:index": "91"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.6316990212932, -20.280997349980613],
                  [-41.63041156096605, -20.282929566530655],
                  [-41.62792247100023, -20.282366005857718],
                  [-41.628780777885, -20.279870212539542]]]),
            {
              "reference": 19,
              "system:index": "92"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.666394517303125, -20.305933326487597],
                  [-41.66373376596035, -20.304162391845512],
                  [-41.66622285592617, -20.302552433687154],
                  [-41.66828279244961, -20.306013823035553]]]),
            {
              "reference": 19,
              "system:index": "93"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.70664911019863, -20.306335808808882],
                  [-41.7104256604916, -20.308428700014424],
                  [-41.70579080331387, -20.309716619002014]]]),
            {
              "reference": 19,
              "system:index": "94"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.59791185367659, -20.316797670072916],
                  [-41.60074426639632, -20.321546561447594],
                  [-41.5971393774803, -20.320822163709693],
                  [-41.59705354679183, -20.31832698998531]]]),
            {
              "reference": 19,
              "system:index": "95"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.94937328035137, -19.71825614733181],
                  [-40.95151904756328, -19.71680177956056],
                  [-40.95100406343242, -19.720356877419917]]]),
            {
              "reference": 19,
              "system:index": "96"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.931949650590624, -19.703631069133223],
                  [-40.93409541780254, -19.703631069133223],
                  [-40.93229297334453, -19.705408774344363]]]),
            {
              "reference": 19,
              "system:index": "97"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.92647674892828, -19.692340390330152],
                  [-40.92690590237066, -19.68918873295088],
                  [-40.9289658388941, -19.69193633515897]]]),
            {
              "reference": 19,
              "system:index": "98"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.98612907741949, -19.63959513834408],
                  [-40.98818901394293, -19.637008316761456],
                  [-40.99007728908941, -19.63991848811154]]]),
            {
              "reference": 19,
              "system:index": "99"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.34456200116777, -19.003309661836298],
                  [-40.34542030805254, -19.00103736523067],
                  [-40.34730858319902, -19.002985049935532]]]),
            {
              "reference": 19,
              "system:index": "100"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.341987080513476, -18.997791173392258],
                  [-40.345506138741015, -18.998196950835148],
                  [-40.34464783185625, -18.999738896094485]]]),
            {
              "reference": 19,
              "system:index": "101"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.324775220995974, -18.983700831228337],
                  [-40.322286131030154, -18.980941284854605],
                  [-40.32511854374988, -18.979236836314904],
                  [-40.32589101994617, -18.980373137279066]]]),
            {
              "reference": 19,
              "system:index": "102"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.32546186650379, -18.968198080810964],
                  [-40.330010892993045, -18.965357106326174],
                  [-40.33189916813953, -18.9673863787555],
                  [-40.327006818896365, -18.969496795878744]]]),
            {
              "reference": 19,
              "system:index": "103"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.34053810983935, -18.95223515630958],
                  [-40.33950814157763, -18.948419757146386],
                  [-40.34379967600146, -18.950611592860472]]]),
            {
              "reference": 19,
              "system:index": "104"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.28586396127978, -18.95962217051455],
                  [-40.28260239511767, -18.959297473467124],
                  [-40.28260239511767, -18.95475164843421],
                  [-40.284233178198726, -18.957349277908286]]]),
            {
              "reference": 19,
              "system:index": "105"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.2678395166997, -18.97131084314822],
                  [-40.269041146338374, -18.974801051763343],
                  [-40.26646622568408, -18.974963385268765],
                  [-40.265522088110835, -18.971473180053426]]]),
            {
              "reference": 19,
              "system:index": "106"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.540156377737915, -20.290255175799118],
                  [-41.54075719255725, -20.28912810567142],
                  [-41.542130483572876, -20.290818707789178]]]),
            {
              "reference": 19,
              "system:index": "107"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.71265419572148, -20.370086215171344],
                  [-41.711667142804, -20.371092001488357],
                  [-41.7105513438538, -20.370086215171344],
                  [-41.71140965073857, -20.36928158139761]]]),
            {
              "reference": 19,
              "system:index": "108"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.70836266129765, -20.369362044963797],
                  [-41.70750435441288, -20.370408067506055],
                  [-41.706731878216594, -20.37012644674989],
                  [-41.70741852372441, -20.368879262937423]]]),
            {
              "reference": 19,
              "system:index": "109"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.86507723179652, -20.424736188435883],
                  [-41.86576387730433, -20.423851404913048],
                  [-41.86748049107386, -20.424253579872342],
                  [-41.866708014877574, -20.426747041156215]]]),
            {
              "reference": 19,
              "system:index": "110"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.89734957066371, -20.414601090753553],
                  [-41.896662925155894, -20.41669251476738],
                  [-41.89546129551722, -20.415003289886048],
                  [-41.896405433090464, -20.413796689336166]]]),
            {
              "reference": 19,
              "system:index": "111"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.50017508855001, -20.675315624753186],
                  [-42.50146254887716, -20.678206500495513],
                  [-42.49914512028829, -20.6772428813646],
                  [-42.499273866321005, -20.6744322906301]]]),
            {
              "reference": 19,
              "system:index": "112"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.50613776325809, -20.818825831212155],
                  [-42.50665274738895, -20.820269905117044],
                  [-42.50540820240604, -20.821473289465438],
                  [-42.5048073875867, -20.820831485675733],
                  [-42.50515071034061, -20.81806367551605]]]),
            {
              "reference": 19,
              "system:index": "113"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.592140113111604, -20.940198016780048],
                  [-42.59351340412723, -20.93915590830389],
                  [-42.5947150337659, -20.940358340517232],
                  [-42.59282675861942, -20.941801246426632]]]),
            {
              "reference": 19,
              "system:index": "114"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.077314504600736, -21.063680635743516],
                  [-43.07688535115835, -21.061998618327948],
                  [-43.077829488731595, -21.061117553997146],
                  [-43.07903111837027, -21.061598135188024],
                  [-43.079116949058744, -21.06352044442803],
                  [-43.07791531942007, -21.065362634141657]]]),
            {
              "reference": 19,
              "system:index": "115"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.04744542501089, -21.065923296048062],
                  [-43.04581464192984, -21.0665640499249],
                  [-43.04332555196402, -21.065763107147582],
                  [-43.044870504356595, -21.06504225496064],
                  [-43.047102102256986, -21.06448158973355]]]),
            {
              "reference": 19,
              "system:index": "116"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.14529240987417, -21.055110158146153],
                  [-43.14529240987417, -21.04950303657178],
                  [-43.14735234639761, -21.04870200196301],
                  [-43.148725637413236, -21.05302753764595]]]),
            {
              "reference": 19,
              "system:index": "117"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.22832418627269, -21.085165244811254],
                  [-43.23124242968089, -21.082602533380314],
                  [-43.23381735033519, -21.083083045139833],
                  [-43.23072744555003, -21.0866067505698]]]),
            {
              "reference": 19,
              "system:index": "118"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.35211186664756, -21.106547224148468],
                  [-43.35606007831748, -21.105986715500144],
                  [-43.35691838520225, -21.10726787501486],
                  [-43.35297017353233, -21.108308808978155]]]),
            {
              "reference": 19,
              "system:index": "119"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.599316217902604, -22.792812031232405],
                  [-46.59691295862526, -22.790912938302444],
                  [-46.59940204859108, -22.788064249316566],
                  [-46.59991703272194, -22.7917833591786]]]),
            {
              "reference": 19,
              "system:index": "120"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.432698821548755, -22.708718893817586],
                  [-46.4325271601718, -22.71164841288278],
                  [-46.429437255386645, -22.71133171114121],
                  [-46.42952308607512, -22.709510661908844],
                  [-46.43132553053313, -22.708164653429275]]]),
            {
              "reference": 19,
              "system:index": "121"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.44208040955415, -22.646461335327363],
                  [-46.4404496264731, -22.644243353546184],
                  [-46.44242373230806, -22.643451208515064],
                  [-46.443453700569776, -22.646065269779285]]]),
            {
              "reference": 19,
              "system:index": "122"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.493411708276, -22.56548219371081],
                  [-46.492295909325804, -22.569048830726686],
                  [-46.489549327294554, -22.56873180006169],
                  [-46.49023597280237, -22.567146635800675]]]),
            {
              "reference": 19,
              "system:index": "123"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.334431575455156, -22.517981901523104],
                  [-46.33134167067, -22.51964691647581],
                  [-46.33237163893172, -22.51623757862861]]]),
            {
              "reference": 19,
              "system:index": "124"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.88780958543175, -22.624675004089386],
                  [-45.88643629441612, -22.627447870589723],
                  [-45.88514883408897, -22.625863382295417]]]),
            {
              "reference": 19,
              "system:index": "125"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.819992486086406, -22.52201516019747],
                  [-45.81613010510496, -22.523362991650956],
                  [-45.81887668713621, -22.5193987439619]]]),
            {
              "reference": 19,
              "system:index": "126"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.539484319925336, -22.343090823365156],
                  [-45.5458357908726, -22.34547240912899],
                  [-45.54068594956401, -22.348965327975062]]]),
            {
              "reference": 19,
              "system:index": "127"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.36364091752093, -22.571393925319278],
                  [-46.364842547159604, -22.569253990586205],
                  [-46.365357531290464, -22.571473181523256]]]),
            {
              "reference": 19,
              "system:index": "128"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.36552919266742, -22.558791609296772],
                  [-46.362610949259214, -22.559187926082906],
                  [-46.363812578897885, -22.55681000828442]]]),
            {
              "reference": 19,
              "system:index": "129"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-46.278213652904824, -22.485671199062732],
                  [-46.27641120844682, -22.48622633594656],
                  [-46.27581039362748, -22.484402306396703]]]),
            {
              "reference": 19,
              "system:index": "130"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.92948931953558, -20.595861579662174],
                  [-41.92845935127386, -20.599236024565457],
                  [-41.92588443061956, -20.599477053486115],
                  [-41.92485446235784, -20.596263303210087],
                  [-41.92665690681585, -20.595058129390935]]]),
            {
              "reference": 19,
              "system:index": "131"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.90494174263128, -20.59176393901627],
                  [-41.90116519233831, -20.59168359202055],
                  [-41.903053467484796, -20.588067933401845],
                  [-41.905800049516046, -20.58734479139251]]]),
            {
              "reference": 19,
              "system:index": "132"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.83384737752615, -22.617784835762723],
                  [-44.83427653096853, -22.622934658538213],
                  [-44.832645747887476, -22.62198393654258],
                  [-44.83195910237966, -22.618339441328224]]]),
            {
              "reference": 19,
              "system:index": "133"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.72127504422516, -22.75920802937944],
                  [-45.72230501248688, -22.76221561300509],
                  [-45.71973009183258, -22.76087012325521]]]),
            {
              "reference": 19,
              "system:index": "134"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-45.75009599652992, -22.63686312824633],
                  [-45.74966684308754, -22.638605924865583],
                  [-45.747521075875625, -22.639477314884694],
                  [-45.74855104413734, -22.637180002003277]]]),
            {
              "reference": 19,
              "system:index": "135"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-44.02819793382232, -21.552864281689182],
                  [-44.029313732772515, -21.555179313565493],
                  [-44.025537182479546, -21.555578453258054],
                  [-44.02652424784391, -21.553103768387825]]]),
            {
              "reference": 19,
              "system:index": "136"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.91850985215945, -21.540238696230617],
                  [-43.918166529405546, -21.53888147332077],
                  [-43.91962565110965, -21.538402450440532],
                  [-43.92228640245242, -21.53936049462032],
                  [-43.92177141832156, -21.541116892527732]]]),
            {
              "reference": 19,
              "system:index": "137"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.911601164683155, -21.37440206301541],
                  [-43.91091451917534, -21.373123223102937],
                  [-43.91426191602593, -21.373522861775605],
                  [-43.91520605359917, -21.375281258975036],
                  [-43.91306028638726, -21.37616044965428]]]),
            {
              "reference": 19,
              "system:index": "138"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.143021534051364, -21.175719418297263],
                  [-43.14057535942978, -21.179561055118555],
                  [-43.13963122185654, -21.175719418297263],
                  [-43.141776989068454, -21.174318796716957]]]),
            {
              "reference": 19,
              "system:index": "139"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.088067868658335, -21.0968656688007],
                  [-43.085321286627085, -21.09558441952368],
                  [-43.083604672857554, -21.09222108758397],
                  [-43.08918366760853, -21.095504341076865]]]),
            {
              "reference": 19,
              "system:index": "140"
            })]);

// Set initial variables
var coleta = false; // Flag to indicate if data is being collected
var regiaoID = 'agric_SE'; // Region ID

// Define years for analysis
var anos = [2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023];

// If data is being collected, only use the current year
if (coleta) {
  var anos = [2023];
}

// Set number of trees for Random Forest classifier
var RFtrees = 100;
if (coleta) {
  var RFtrees = 20;
}

// Define version information
var versao_out = 1; // Output version
var versao_pt = 'S2_v1'; // Version for point data
var versao_estavel = '3'; // Stable version
var dir_pt_in = 'projects/mapbiomas-workspace/AMOSTRAS/col9/MATA_ATLANTICA/teste/'; // Directory for point data input

// Load and define relevant data
var bioma250mil = ee.FeatureCollection('projects/mapbiomas-workspace/AUXILIAR/biomas_IBGE_250mil'); // Biome data
var bioma250mil_MA_vetor = bioma250mil.filterMetadata('Bioma', 'equals', 'Mata Atlântica'); // Filter for Mata Atlântica
var biomes = ee.Image('projects/mapbiomas-workspace/AUXILIAR/biomas-raster-41'); // Biome raster
var bioma250mil_MA = biomes.mask(biomes.eq(2)); // Mask for Mata Atlântica
Map.addLayer(bioma250mil_MA, {}, 'layer bioma', false); // Add layer to map

// Define visualization parameters
var palettes = require('users/mapbiomas/modules:Palettes.js'); // Import palettes
var vis = {
  'min': 0,
  'max': 69,
  'palette': palettes.get('classification9')
}; // Visualization parameters

// Load the collection of regions for the Mata Atlântica biome from collection 6.
var regioesCollection = ee.FeatureCollection('projects/mapbiomas-workspace/AUXILIAR/Mata_Atlantica_col6_PLANET'); 
// Define visualization parameters for median bands (SWIR1, NIR, RED) for better visualization.
var visParMedian2 = {bands: ['swir1_median', 'nir_median', 'red_median'], gain: [0.08, 0.06, 0.2], gamma: 0.85}; 
// Define the biome name for reference.
var bioma = "MATAATLANTICA"; 
// Define the output directory for the classified images.
var dirout = 'projects/mapbiomas-workspace/COLECAO7/classificacao-ma/'; 
// Load the Sentinel 2 cluster data for the Mata Atlântica biome.
var S2_cluster = ee.Image('projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/mosaicos_MA_S2_clusters_2106_2023');

// Define region of interest
//var limite = regioesCollection.filterMetadata('reg_id', "equals", regiaoID); // Filter region by ID
var limite = rev_agric; // Use a different region definition

// Load and visualize stable map from collection 6
var mapa_estavel_col6 = ee.Image('projects/mapbiomas-workspace/AMOSTRAS/col7/MATA_ATLANTICA/MA_amostras_estaveis85a20_col6_v1');
Map.addLayer(mapa_estavel_col6, vis, 'mapa_estavel_col6', false);

// Create a blank image and outline the region of interest
var blank = ee.Image(0).mask(0);
var outline = blank.paint(limite, 'AA0000', 2);
var visPar = {'palette': '000000', 'opacity': 0.6};
Map.addLayer(outline, visPar, regiaoID, false);

// Define a function to shuffle a feature collection
var shuffle = function (collection, seed) {
  collection = collection.randomColumn('random', seed || 1)
    .sort('random', true)
    .map(function (feature) {
      var rescaled = ee.Number(feature.get('random')).multiply(1000000000).round();
      return feature.set('new_id', rescaled);
    });
  var randomIdList = ee.List(collection.reduceColumns(ee.Reducer.toList(), ['new_id']).get('list'));
  var sequentialIdList = ee.List.sequence(1, collection.size());
  var shuffled = collection.remap(randomIdList, sequentialIdList, 'new_id');
  return shuffled;
};

// Define visualization parameters for hand-labeled data
var vis_hand = {
  'min': 0,
  'max': 60,
  'palette': 'blue,white,green,orange,red,brown'
};

// Loop through each year
for (var i_ano = 0; i_ano < anos.length; i_ano++) {
  var ano = anos[i_ano]; // Current year

  // Define asset path for Sentinel 2 mosaics
  var asset = 'projects/mapbiomas-mosaics/assets/SENTINEL/BRAZIL/mosaics-3';

  // Define band names for analysis
  var bandNames = ee.List([
    // 60 most important bands for this region
    'green_median_texture_' + ano, 'ndvi_median', 'longitude', 'red_edge_1_median', 'ndvi_median_dry_' + ano, 'green_median_dry', 'green_median', 'blue_median', 'afvi_median_wet', 'nddi_median_wet', 'ui_median_wet', 'ndvi_median_wet_' + ano, 'blue_median_wet', 'ndwi_median_wet', 'gli_median_dry', 'ri_median', 'dswi5_median_wet', 'afvi_median', 'swir1_median_wet', 'blue_median_dry', 'brba_median_wet', 'green_median_texture', 'lai_median', 'swir2_median_wet', 'red_median', 'brba_median', 'red_median_dry', 'red_edge_1_median_dry', 'evi_median_dry', 'red_median_wet', 'brightness_median_dry', 'brba_median_dry', 'msi_median_wet', 'green_min', 'wetness_median_wet', 'mbi_median_wet', 'ui_median', 'red_edge_4_median_wet', 'gcvi_median', 'latitude', 'green_median_wet', 'awei_median_dry', 'osavi_median_dry', 'gli_median_wet', 'swir2_median_dry', 'ri_median_dry', 'msi_median', 'awei_median_wet', 'bsi_median', 'iia_median_dry', 'gvmi_median_wet_1', 'swir1_stdDev', 'gvmi_median_dry', 'red_edge_4_stdDev', 'spri_median_1', 'red_edge_2_median_wet', 'dswi5_median_dry', 'red_edge_1_median_wet', 'ndwi_median', 'nddi_median_dry', 'afvi_median_dry', 'iia_median',
    // All 143 bands for feature importance
    //      'blue_median','afvi_median','afvi_median_dry','afvi_median_wet','avi_median','avi_median_dry','avi_median_wet','awei_median','awei_median_dry','awei_median_wet','blue_median_dry','blue_median_wet','blue_stdDev','brba_median','brba_median_dry','brba_median_wet','brightness_median','brightness_median_dry','brightness_median_wet','bsi_median','bsi_median_1','bsi_median_2','clusters_2023','co2flux_median','cvi_median','cvi_median_dry','cvi_median_wet','dswi5_median','dswi5_median_dry','dswi5_median_wet','evi_median','evi_median_dry','evi_median_wet','gcvi_median','gcvi_median_dry','gcvi_median_wet','gemi_median','gemi_median_dry','gemi_median_wet','gli_median','gli_median_dry','gli_median_wet','green_median','green_median_dry','green_median_texture','green_median_texture_2023','green_median_wet','green_min','green_stdDev','gvmi_median','gvmi_median_1','gvmi_median_dry','gvmi_median_dry_1','gvmi_median_wet','gvmi_median_wet_1','iia_median','iia_median_dry','iia_median_wet','lai_median','latitude','longitude','lswi_median','lswi_median_dry','lswi_median_wet','mbi_median','mbi_median_dry','mbi_median_wet','msi_median','msi_median_dry','msi_median_wet','nddi_median','nddi_median_dry','nddi_median_wet','ndvi_median','ndvi_median_dry','ndvi_median_dry_2023','ndvi_median_wet','ndvi_median_wet_2023','ndwi_median','ndwi_median_2023','ndwi_median_dry','ndwi_median_wet','nir_median','nir_median_contrast','nir_median_dry','nir_median_dry_contrast','nir_median_wet','nir_stdDev','osavi_median','osavi_median_dry','osavi_median_wet','ratio_median','ratio_median_dry','ratio_median_wet','red_edge_1_median','red_edge_1_median_dry','red_edge_1_median_wet','red_edge_1_stdDev','red_edge_2_median','red_edge_2_median_dry','red_edge_2_median_wet','red_edge_2_stdDev','red_edge_3_median','red_edge_3_median_dry','red_edge_3_median_wet','red_edge_3_stdDev','red_edge_4_median','red_edge_4_median_dry','red_edge_4_median_wet','red_edge_4_stdDev','red_median','red_median_contrast','red_median_dry','red_median_dry_contrast','red_median_wet','red_min','red_stdDev','ri_median','ri_median_dry','ri_median_wet','rvi_median','rvi_median_1','rvi_median_wet','shape_median','shape_median_dry','shape_median_wet','spri_median','spri_median_1','spri_median_wet','swir1_median','swir1_median_dry','swir1_median_wet','swir1_stdDev','swir2_median','swir2_median_dry','swir2_median_wet','swir2_stdDev','ui_median','ui_median_dry','ui_median_wet','wetness_median','wetness_median_dry','wetness_median_wet',
  ]);

  // Filter Sentinel 2 collection
  var collection = ee.ImageCollection(asset)
    .filter(ee.Filter.eq('version', '3'))
    .filter(ee.Filter.eq('year', ano))
    .filter(ee.Filter.inList('biome', [
      'MATAATLANTICA',
    ]));

  // Create a mosaic from the filtered collection
  var mosaicoTotal = collection.mosaic();

  // Add indices for Caatinga region
  var addIndexCaatinga = require('users/marcosrosaUSP/MapBiomas_col9_MataAtlan:Mata_Atlantica_SENTINEL2/processa_Bandas_Sentinel2_CAATINGA');
  mosaicoTotal = addIndexCaatinga.get(mosaicoTotal);

  // Add additional bands from Sentinel 2 cluster data
  mosaicoTotal = mosaicoTotal.addBands(S2_cluster.select([
    'clusters_' + ano, 'ndvi_median_dry_' + ano, 'ndvi_median_wet_' + ano, 'ndwi_median_' + ano, 'green_median_texture_' + ano
  ]));

  // Visualize the mosaic
  Map.addLayer(mosaicoTotal, {'bands': ['swir1_median', 'nir_median', 'red_median'],
    'gain': [0.08, 0.07, 0.2], 'gamma': 0.85}, 'Sentinel 2 ' + ano, false);

  // Load training data
  //var BDamostras = ee.FeatureCollection('projects/mapbiomas-workspace/AMOSTRAS/col9/MATA_ATLANTICA/teste/REGIONs_' + regiaoID + '_' + ano);
  var BDamostras = ee.FeatureCollection('projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/pontos_train_v1_' + ano)
    //.filterMetadata('reg_id', 'equals', regiaoID)
    .filterBounds(limite);

  // Filter training data by reference class
  var BDflo = BDamostras.filterMetadata("reference", "equals", 3);
  BDflo = shuffle(BDflo, 2).limit(1500);
  var BDsav = BDamostras.filterMetadata("reference", "equals", 4);//.limit(100);
  var BDreflo = BDamostras.filterMetadata("reference", "equals", 9);
  var BDvarzea = BDamostras.filterMetadata("reference", "equals", 11);
  var BDcampo = BDamostras.filterMetadata("reference", "equals", 12);
  var BDOutroNFlo = BDamostras.filterMetadata("reference", "equals", 13);
  var BDagro = BDamostras.filterMetadata("reference", "equals", 21);
  BDagro = shuffle(BDagro, 2).limit(2500);
  var BDNaoVeg = BDamostras.filterMetadata("reference", "equals", 22);
  var BDAflora = BDamostras.filterMetadata("reference", "equals", 29);
  var BDagua = BDamostras.filterMetadata("reference", "equals", 33);
  BDagua = shuffle(BDagua, 2).limit(1000);

  // Define number of agricultural samples
  var num_agric = 2500;

  // Load and prepare additional training data
  var amostraTotal = rev01_2000_agric.merge(rev01_1985_agric);
  var amostraTotalimg = amostraTotal.reduceToImage({properties: ['reference'], reducer: ee.Reducer.first()});
  amostraTotalimg = amostraTotalimg.select([0], ['reference']);

  // Sample training data from different classes
  //   var training_flo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 300, 'region': flo.filterBounds(limite), 'scale': 30, 'seed': 1});
  //   var training_afl = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 300, 'region': aflora.filterBounds(limite), 'scale': 30, 'seed': 1});
  //   var training_sav = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 500, 'region': sav.filterBounds(limite), 'scale': 30, 'seed': 1});
  // //  var training_afl = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': sampleComplementar, 'region': aflora_r23.filterBounds(limite), 'scale': 30, 'seed': 1});
  //     var training_cam = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 500, 'region': campo.filterBounds(limite), 'scale': 30, 'seed': 1});
  var training_agr = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': num_agric, 'region': amostraTotal.filterBounds(limite), 'scale': 30, 'seed': 1});

  // Print training data sizes if collecting data
  if (coleta) {
    //print('BDflo', BDflo.size());
    // print('BDsav', BDsav.size());
    // print('BDvar', BDvarzea.size());
    // print('BDcam', BDcampo.size());
    // print('BDOut', BDOutroNFlo.size());
    //print('BDAfl', BDAflora.size());
    //print('BDagr', BDagro.size());
    //print('BDNao', BDNaoVeg.size());
    //print('BDagu', BDagua.size());
    // //  print('training_agr',training_agr.size())
    // //  print('training_cam',training_cam.size())
    // print('training_flo', training_flo.size());
    // print('training_sav', training_sav.size());
    // //print(training_afl.size())
    // //print(training_cam.size())
    print("training_agr", training_agr.size());
  }

  // Combine training data from different sources
  var training = BDflo//.merge(BDreflo).merge(BDcampo)//.merge(BDsav).merge(BDOutroNFlo).merge(BDAflora)
    .merge(BDagro).merge(BDAflora).merge(BDagua).merge(BDNaoVeg)
    //complementares
    .merge(training_agr)//.merge(training_agr).merge(training_afl).merge(training_sav).merge(training_flo)

  // Print training data size
  //print('training', training.size());

  // Train a Random Forest classifier
  var classifier = ee.Classifier.smileRandomForest({numberOfTrees: RFtrees, variablesPerSplit: 1}).train(training, 'reference', bandNames);
  //print(classifier.explain());

  // Classify the mosaic using the trained classifier
  var classifiedRF = mosaicoTotal.classify(classifier).mask(mosaicoTotal.select('green_median'));
  classifiedRF = classifiedRF.select(['classification'], ['classification_' + ano]).clip(limite).toInt8();

  // Visualize the classified image if collecting data
  if (coleta) {
    Map.addLayer(classifiedRF, vis, 'RF' + ano + "_" + regiaoID, false);
  }

  // Calculate probabilities for each class
  //  var classifier_prob = classifier.setOutputMode('MULTIPROBABILITY')
  //  var classified_prob = mosaicoTotal.classify(classifier_prob)
  //  var max_prob = classified_prob.arrayReduce(ee.Reducer.max(), [0])
  //  var img_max_prop = max_prob.arrayFlatten([['prob_'+ano]]).multiply(100)

  // Combine classified images from different years
  if (i_ano == 0) {
    var classified16a23RF = classifiedRF;
  } //  var classified16a23GTB = classifiedGTB}
  else {
    classified16a23RF = classified16a23RF.addBands(classifiedRF);
  } // classified16a23GTB = classified16a23GTB.addBands(classifiedGTB)}
}

// Export the classified image if not collecting data
if (coleta) {
} else {
  classified16a23RF = classified16a23RF
    .set('territory', 'BRAZIL')
    .set('biome', 'MATA ATÂNTICA')
    .set('source', 'arcplan')
    .set('version', '1')
    .set('collection_id', versao_out);

  //     classified16a23GTB = classified16a23GTB
  //     .set('territory', 'BRAZIL')
  //     .set('biome', 'MATA ATÂNTICA')
  //     .set('source', 'arcplan')
  //     .set('version', '1')
  //     .set('collection_id',versao_out)

  Export.image.toAsset({
    "image": classified16a23RF.toInt8(),
    "description": regiaoID + '-' + 'RF_SENTINEL2_v' + versao_out,
    "assetId": dirout + regiaoID + '-' + 'RF_SENTINEL2_v' + versao_out,
    "scale": 10,
    "pyramidingPolicy": {
      '.default': 'mode'
    },
    "maxPixels": 1e13,
    "region": limite
  });
}
