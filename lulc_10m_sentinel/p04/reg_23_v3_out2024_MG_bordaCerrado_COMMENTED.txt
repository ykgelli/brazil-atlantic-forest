var aflora = /* color: #0000ff */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.51525345394807, -18.773016391715252],
                  [-43.52692642758088, -18.75091097844091],
                  [-43.53791275570588, -18.770740968246542]]]),
            {
              "reference": 29,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.59009781429963, -18.691081821089004],
                  [-43.59593430111604, -18.70311438444067],
                  [-43.58082809994416, -18.70343957698565]]]),
            {
              "reference": 29,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.66047897885041, -18.650424948908956],
                  [-43.6652854974051, -18.641967095276545],
                  [-43.66871872494416, -18.657255984616572]]]),
            {
              "reference": 29,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.60211411068635, -18.78276785864776],
                  [-43.59009781429963, -18.766190029176883],
                  [-43.606233983733226, -18.774641675388022]]]),
            {
              "reference": 29,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.5773948724051, -18.837040701919282],
                  [-43.573274999358226, -18.814618716055392],
                  [-43.58632126400666, -18.81884337686581],
                  [-43.58632126400666, -18.83281649853933]]]),
            {
              "reference": 29,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.57361832211213, -18.965990115006377],
                  [-43.55610886166291, -18.96826288983761],
                  [-43.570528417326976, -18.956574003529138]]]),
            {
              "reference": 29,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.396178215159594, -19.007084772435867],
                  [-43.402873008860766, -18.9839551145459],
                  [-43.40355965436858, -18.99604786295046]]]),
            {
              "reference": 29,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.38974091352385, -19.044409036813498],
                  [-43.38605019391936, -19.051142924853686],
                  [-43.38562104047698, -19.04302977302069]]]),
            {
              "reference": 29,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.343203947208316, -19.100002064724965],
                  [-43.333247587345035, -19.105436051668836],
                  [-43.33616583075324, -19.10097532923879]]]),
            {
              "reference": 29,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.367923185489566, -19.08767355210836],
                  [-43.36654989447394, -19.092540179942276],
                  [-43.362430021427066, -19.095703411311764]]]),
            {
              "reference": 29,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.795713276714714, -18.950918302305713],
                  [-42.79056343540612, -18.95773715008708],
                  [-42.79116425022546, -18.954895997382252],
                  [-42.795713276714714, -18.9484017523665]]]),
            {
              "reference": 29,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.86799070764952, -15.982935102803072],
                  [-40.86369917322569, -15.982935102803072],
                  [-40.8643858187335, -15.980294675911727],
                  [-40.86816236902647, -15.979799591990007]]]),
            {
              "reference": 29,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.816148971809675, -16.017587473205097],
                  [-40.81546232630186, -16.02204234179002],
                  [-40.81271574427061, -16.02303229908014],
                  [-40.812372421516706, -16.021052379588117],
                  [-40.813402406171214, -16.018989943292908]]]),
            {
              "reference": 29,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.81649229456358, -16.00702738754275],
                  [-40.81632063318663, -16.010162471267165],
                  [-40.814947342171, -16.00983246477184],
                  [-40.81477568079405, -16.008347428793883]]]),
            {
              "reference": 29,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.78576490808897, -16.076565165318538],
                  [-40.78524992395811, -16.081018714930536],
                  [-40.78404829431944, -16.080523881012233]]]),
            {
              "reference": 29,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.434644912971784, -16.218204985732577],
                  [-41.43258497644835, -16.21869947544481],
                  [-41.433614944710065, -16.21227101236967]]]),
            {
              "reference": 29,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.37087063578273, -16.312465206419326],
                  [-41.37052731302882, -16.308346387791715],
                  [-41.372758910929214, -16.30884065060154]]]),
            {
              "reference": 29,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.13815887484801, -16.642017233975437],
                  [-42.13970382724059, -16.637576466503905],
                  [-42.141248779633166, -16.639056733757236]]]),
            {
              "reference": 29,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.420708915860864, -17.619812602874198],
                  [-41.4198506089761, -17.617358465219883],
                  [-41.42328383651516, -17.61768568550255]]]),
            {
              "reference": 29,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.42225419722252, -18.22279132417234],
                  [-43.4237991496151, -18.229150242614374],
                  [-43.42053758345299, -18.235508928631905],
                  [-43.41212617598229, -18.23355243461675]]]),
            {
              "reference": 29,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.38002549849205, -18.25344243118101],
                  [-43.37281572066002, -18.261756427102597],
                  [-43.37401735029869, -18.25442056900433]]]),
            {
              "reference": 29,
              "system:index": "20"
            })]),
    savana = 
    /* color: #999900 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.7533101125676, -15.122860505078622],
                  [-41.75142183742111, -15.089051644454221],
                  [-41.760863213153534, -15.118883271639278]]]),
            {
              "reference": 4,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.55862689851591, -15.263895492474083],
                  [-41.55948520540068, -15.229363853137402],
                  [-41.56437755464384, -15.264061098173945]]]),
            {
              "reference": 4,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.512042474151244, -15.433082251914058],
                  [-41.525517892242064, -15.427456141400832],
                  [-41.52568955361902, -15.44466494034182]]]),
            {
              "reference": 4,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.40198035296325, -15.4126984059896],
                  [-41.404126120175164, -15.428419155743255],
                  [-41.40026373919372, -15.428750106106204],
                  [-41.39717383440856, -15.41724927168814]]]),
            {
              "reference": 4,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.424038839901726, -15.423537576614512],
                  [-41.428072882260125, -15.409636858449247],
                  [-41.432793570126336, -15.427674515497708]]]),
            {
              "reference": 4,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.39594796566587, -15.392297282408174],
                  [-41.38513329891782, -15.412405055259214],
                  [-41.37646439938169, -15.408350557975519]]]),
            {
              "reference": 4,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.33144851508915, -15.493842614984883],
                  [-41.33325095954716, -15.488052726818763],
                  [-41.33513923469364, -15.493842614984883]]]),
            {
              "reference": 4,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.38543601814091, -15.471178413904632],
                  [-41.378483732374306, -15.477630519586008],
                  [-41.38140197578251, -15.469193110154588]]]),
            {
              "reference": 4,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.35998895486189, -15.550783321848003],
                  [-41.35749986489607, -15.557563683802],
                  [-41.35578325112654, -15.549625676756776]]]),
            {
              "reference": 4,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.46947681769052, -15.572518995828979],
                  [-41.46321117743173, -15.578471867288494],
                  [-41.46200954779306, -15.569129089219611]]]),
            {
              "reference": 4,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.5528069174125, -15.617462418253105],
                  [-41.54817206023476, -15.621843450413749],
                  [-41.546112123711325, -15.618619681133259],
                  [-41.54842955230019, -15.61597449923488]]]),
            {
              "reference": 4,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.59656551602649, -15.650377713849146],
                  [-41.589098246129026, -15.657650659515202],
                  [-41.59304645779895, -15.649055332299923]]]),
            {
              "reference": 4,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.74485291036461, -15.693375743358697],
                  [-41.747084508265, -15.688748344778249],
                  [-41.7485436299691, -15.693541005651907]]]),
            {
              "reference": 4,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.81770470356569, -15.677757852491352],
                  [-41.81264069294557, -15.682013639653679],
                  [-41.812554862257095, -15.674782880621313]]]),
            {
              "reference": 4,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.86251786794519, -15.720437825294438],
                  [-41.854964767359256, -15.724981885861819],
                  [-41.85788301076746, -15.718702793588962]]]),
            {
              "reference": 4,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.82064173113374, -15.75640188771947],
                  [-41.810513709893506, -15.752354173379919],
                  [-41.81248781572847, -15.749875941115752]]]),
            {
              "reference": 4,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.65602612328437, -15.787124969207081],
                  [-41.66383671593574, -15.778452510038987],
                  [-41.662120102166206, -15.790841623824736]]]),
            {
              "reference": 4,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.740855020313816, -15.913268104916815],
                  [-41.73510436418589, -15.931013737417581],
                  [-41.72497634294565, -15.928785302224837]]]),
            {
              "reference": 4,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.868690101828264, -15.867154052018199],
                  [-41.86448439809291, -15.877969172262393],
                  [-41.85753211232631, -15.880115615631054],
                  [-41.86096533986537, -15.869135491521707]]]),
            {
              "reference": 4,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.153382583646035, -16.243758032907593],
                  [-42.14625863650248, -16.246806970444712],
                  [-42.14308290102885, -16.239802584040383]]]),
            {
              "reference": 4,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.20264939883158, -16.256942287783623],
                  [-42.20187692263529, -16.25150388980126],
                  [-42.20840005495951, -16.2524927006283]]]),
            {
              "reference": 4,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.19835247921746, -16.31197181984589],
                  [-42.19869580197137, -16.320209217893673],
                  [-42.19397511410516, -16.311230437018867]]]),
            {
              "reference": 4,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.148055695770196, -16.33956573813934],
                  [-42.15191807675164, -16.345331139673778],
                  [-42.1454807751159, -16.34401334860689]]]),
            {
              "reference": 4,
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.169389739109405, -16.377029442745304],
                  [-42.166385665012726, -16.378923444164606],
                  [-42.158660903049835, -16.378594053935224],
                  [-42.165870680881866, -16.374311930309773]]]),
            {
              "reference": 4,
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.176857009006866, -16.380488040153274],
                  [-42.174625411106476, -16.38559347654568],
                  [-42.174539580418, -16.376205958128175]]]),
            {
              "reference": 4,
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.20968238899693, -16.43694072328318],
                  [-42.21526138374791, -16.442456281766116],
                  [-42.2134589392899, -16.44443196609329],
                  [-42.20556251595006, -16.435623551816573]]]),
            {
              "reference": 4,
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.30604828136538, -16.409487494605404],
                  [-42.3059624506769, -16.41632114346601],
                  [-42.30278671520327, -16.41047550687644]]]),
            {
              "reference": 4,
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.341421597854634, -16.42583287432637],
                  [-42.33755921687319, -16.431101772137204],
                  [-42.33858918513491, -16.42484494008295]]]),
            {
              "reference": 4,
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.303656094924946, -16.43645285022412],
                  [-42.31009339656069, -16.442215384825616],
                  [-42.30159615840151, -16.437440725443352]]]),
            {
              "reference": 4,
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.34792916874507, -16.465911804425236],
                  [-42.348014999433545, -16.4725788521388],
                  [-42.34492509464839, -16.467228770298235]]]),
            {
              "reference": 4,
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.31737344364741, -16.480315632285002],
                  [-42.31848924259761, -16.476118055868795],
                  [-42.31917588810542, -16.480480241271213]]]),
            {
              "reference": 4,
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.236136197299295, -16.508141437323783],
                  [-42.233132123202616, -16.512667482466867],
                  [-42.23347544595652, -16.507071629351504]]]),
            {
              "reference": 4,
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.229870557040506, -16.503286107458393],
                  [-42.22772478982859, -16.50896436250487],
                  [-42.22686648294383, -16.50139331872242]]]),
            {
              "reference": 4,
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.25424647256785, -16.532909950446356],
                  [-42.252358197421366, -16.539245571419123],
                  [-42.25201487466746, -16.533239078735456]]]),
            {
              "reference": 4,
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.26298216582646, -16.597995021949462],
                  [-42.263067996514934, -16.60062714294691],
                  [-42.259548938287395, -16.599969116076853]]]),
            {
              "reference": 4,
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.26186636687626, -16.643147348363303],
                  [-42.26864699126591, -16.647916918855262],
                  [-42.26598623992314, -16.650383891491852],
                  [-42.26040724517216, -16.64528544636678]]]),
            {
              "reference": 4,
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.22693497767977, -16.623000345400275],
                  [-42.22744996181063, -16.624645211076675],
                  [-42.225733348041096, -16.63319828528561],
                  [-42.22487504115633, -16.62357604999074]]]),
            {
              "reference": 4,
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.240496226459065, -16.65490822180346],
                  [-42.23483140101961, -16.64824748008521],
                  [-42.23654801478914, -16.642655567501826],
                  [-42.24015290370516, -16.652276845342428]]]),
            {
              "reference": 4,
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.15500886073641, -16.638461525998345],
                  [-42.15269143214754, -16.632458130475126],
                  [-42.15715462794832, -16.632869327944697]]]),
            {
              "reference": 4,
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.1442421384745, -16.65104337518273],
                  [-42.14664539775185, -16.654661531795945],
                  [-42.14252552470497, -16.655483830585375]]]),
            {
              "reference": 4,
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.0904262967997, -16.666173393506494],
                  [-42.09231457194618, -16.673326844482865],
                  [-42.08733639201454, -16.66831123446018]]]),
            {
              "reference": 4,
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.06612023928741, -16.68500201742205],
                  [-42.0727292023001, -16.6836043230133],
                  [-42.073673339873345, -16.691003765476207]]]),
            {
              "reference": 4,
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.05526764037571, -16.700375981268227],
                  [-42.04848701598606, -16.709665530744328],
                  [-42.04805786254368, -16.703335532817636]]]),
            {
              "reference": 4,
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.02153617980442, -16.7028422774115],
                  [-42.025656052851296, -16.694045675387066],
                  [-42.02402526977024, -16.70506191670422]]]),
            {
              "reference": 4,
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.98246801236827, -16.703582160042874],
                  [-41.979635599648546, -16.702760068053248],
                  [-41.98221052030284, -16.697745230275054]]]),
            {
              "reference": 4,
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.000149134194444, -16.673902397878603],
                  [-41.999634150063585, -16.68195996356734],
                  [-41.997660044228624, -16.67595793158388]]]),
            {
              "reference": 4,
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.94191116114432, -16.675883578138723],
                  [-41.93890708704764, -16.680570114204986],
                  [-41.93470138331229, -16.68015901914554]]]),
            {
              "reference": 4,
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.920539319713654, -16.669799131935935],
                  [-41.921740949352326, -16.66511233199616],
                  [-41.923800885875764, -16.672430267554795]]]),
            {
              "reference": 4,
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.865484096803705, -16.728949610507847],
                  [-41.86728654126171, -16.726237054186228],
                  [-41.87080559948925, -16.73018257789461]]]),
            {
              "reference": 4,
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.656047279301724, -18.928474726075486],
                  [-42.656991416874966, -18.933183640889602],
                  [-42.65518897241696, -18.934157882554047]]]),
            {
              "reference": 4,
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.65435021317478, -18.8757253030376],
                  [-42.652976922159155, -18.878892655350015],
                  [-42.64937203324314, -18.87791809178453],
                  [-42.649457863931616, -18.876537450363685],
                  [-42.65229027665134, -18.876943522550675]]]),
            {
              "reference": 4,
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.64078896439548, -18.846327755461232],
                  [-42.63787072098728, -18.846205911668218],
                  [-42.639458588724096, -18.843200403445405],
                  [-42.64207642472263, -18.84177886054336]]]),
            {
              "reference": 4,
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.97871004608771, -15.30195437403073],
                  [-41.97459017304084, -15.295827983180343],
                  [-41.98128496674201, -15.295331240934027]]]),
            {
              "reference": 4,
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.79554735687873, -15.235382374351822],
                  [-41.79949556854865, -15.227432068891405],
                  [-41.80395876434943, -15.23356045588221]]]),
            {
              "reference": 4,
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.818378320013494, -15.243166757326472],
                  [-41.81546007660529, -15.250122770622426],
                  [-41.81168352631232, -15.246810412046393]]]),
            {
              "reference": 4,
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.80241381195685, -15.255919272502446],
                  [-41.805847039495916, -15.250454003608843],
                  [-41.80893694428107, -15.251778930333655]]]),
            {
              "reference": 4,
              "system:index": "55"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.11826299598477, -15.69376184529752],
                  [-42.121696223523834, -15.681532087179495],
                  [-42.12495778968594, -15.683019529351695]]]),
            {
              "reference": 4,
              "system:index": "56"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.11929296424649, -15.698058613254144],
                  [-42.12135290076993, -15.696075500833542],
                  [-42.12701772620938, -15.702024780220475]]]),
            {
              "reference": 4,
              "system:index": "57"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.390277382887724, -16.037208463715608],
                  [-42.38718747810257, -16.041332939635883],
                  [-42.379291054762724, -16.034898719919823]]]),
            {
              "reference": 4,
              "system:index": "58"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.024031975113644, -16.561245003794504],
                  [-42.02265868409802, -16.567003821462574],
                  [-42.02008376344372, -16.564700315054676]]]),
            {
              "reference": 4,
              "system:index": "59"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.399283745133175, -16.752016666913942],
                  [-42.40271697267224, -16.744290825138368],
                  [-42.408038475357785, -16.75267417088608]]]),
            {
              "reference": 4,
              "system:index": "60"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.394305565201535, -16.76467321934005],
                  [-42.39447722657849, -16.757441006754746],
                  [-42.405806877457394, -16.7582628629398]]]),
            {
              "reference": 4,
              "system:index": "61"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.47309813722302, -16.753167297374667],
                  [-42.47476880563363, -16.75692589416162],
                  [-42.468417334686364, -16.753474050080072]]]),
            {
              "reference": 4,
              "system:index": "62"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.39254300607308, -16.748378356306294],
                  [-42.38945310128793, -16.74311814225863],
                  [-42.394774603973474, -16.743611293498056]]]),
            {
              "reference": 4,
              "system:index": "63"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.73336331857308, -16.811160927938104],
                  [-41.73422162545785, -16.816747899543568],
                  [-41.7289001227723, -16.812968495589836]]]),
            {
              "reference": 4,
              "system:index": "64"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.59843747628793, -16.75889834838176],
                  [-41.60187070382699, -16.750679654256142],
                  [-41.60736386788949, -16.759062718643793]]]),
            {
              "reference": 4,
              "system:index": "65"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.60478894723519, -16.737364616789908],
                  [-41.5970641852723, -16.741145524532],
                  [-41.5970641852723, -16.737529005643378]]]),
            {
              "reference": 4,
              "system:index": "66"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.85747449411019, -16.93124446336978],
                  [-41.85970609201058, -16.924018613876036],
                  [-41.8688041449891, -16.930587579422607]]]),
            {
              "reference": 4,
              "system:index": "67"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.90124814523324, -16.959324107169948],
                  [-41.90502469552621, -16.954726557873972],
                  [-41.91446607125863, -16.96277219531491]]]),
            {
              "reference": 4,
              "system:index": "68"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.44953458322152, -17.13361928653299],
                  [-42.45382611764535, -17.132470981289412],
                  [-42.454169440399255, -17.141329152264976]]]),
            {
              "reference": 4,
              "system:index": "69"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.44936292184457, -17.14444581568421],
                  [-42.44901959909066, -17.153795492116778],
                  [-42.446959662567224, -17.153467441265015]]]),
            {
              "reference": 4,
              "system:index": "70"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.07359616769418, -17.065528946421495],
                  [-42.074626135955896, -17.062082749865965],
                  [-42.080119300018396, -17.063723803779776]]]),
            {
              "reference": 4,
              "system:index": "71"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.02038114083871, -17.078820822704955],
                  [-42.015746283660974, -17.063887908377698],
                  [-42.020724463592614, -17.064052012831322]]]),
            {
              "reference": 4,
              "system:index": "72"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.52309453923482, -17.411162705699198],
                  [-42.52309453923482, -17.400188030469756],
                  [-42.52515447575826, -17.401498474095423]]]),
            {
              "reference": 4,
              "system:index": "73"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.17989470687649, -18.000777368236065],
                  [-43.178521415860864, -18.0038792610279],
                  [-43.171483299405786, -18.00045085003091]]]),
            {
              "reference": 4,
              "system:index": "74"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.15414550033352, -18.002899721831337],
                  [-43.15809371200344, -17.985267085925916],
                  [-43.1641018601968, -17.985593632235727]]]),
            {
              "reference": 4,
              "system:index": "75"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.14985396590969, -17.99538974054147],
                  [-43.14985396590969, -17.988695792043973],
                  [-43.15260054794094, -17.988369251474285]]]),
            {
              "reference": 4,
              "system:index": "76"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.931476358192505, -15.060076648555862],
                  [-41.93284964920813, -15.06737020477047],
                  [-41.9285581147843, -15.063557695192664]]]),
            {
              "reference": 4,
              "system:index": "77"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.05799079300696, -15.084442779274099],
                  [-42.059535745399536, -15.088917887592022],
                  [-42.052325967567505, -15.089746601013966]]]),
            {
              "reference": 4,
              "system:index": "78"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.10296607376868, -15.19430424122229],
                  [-42.101764444130005, -15.190162687233926],
                  [-42.10416770340735, -15.188837372789804]]]),
            {
              "reference": 4,
              "system:index": "79"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.08871817948157, -15.37595529238915],
                  [-42.081508401649536, -15.36767927503014],
                  [-42.08837485672766, -15.365527456692076]]]),
            {
              "reference": 4,
              "system:index": "80"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.019881967323364, -15.511469549558777],
                  [-42.0135304963761, -15.509980863695985],
                  [-42.01507544876868, -15.506838047180697]]]),
            {
              "reference": 4,
              "system:index": "81"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.18021369339758, -15.5096500431576],
                  [-42.1812436616593, -15.505680155354264],
                  [-42.183646920936646, -15.507168872224362]]]),
            {
              "reference": 4,
              "system:index": "82"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.14588141800696, -15.510477093509648],
                  [-42.1427915132218, -15.50634180862146],
                  [-42.14330649735266, -15.504522257035935],
                  [-42.148456338661255, -15.510642503182487]]]),
            {
              "reference": 4,
              "system:index": "83"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.07790351273352, -15.81064138879281],
                  [-42.07773185135657, -15.80634700169439],
                  [-42.0823667085343, -15.807998699824626]]]),
            {
              "reference": 4,
              "system:index": "84"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.36148810746008, -15.983497078836278],
                  [-42.36114478470618, -15.988282750294692],
                  [-42.35874152542883, -15.985642393995784]]]),
            {
              "reference": 4,
              "system:index": "85"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.17506385208899, -15.979371408093808],
                  [-42.17386222245032, -15.97227505542978],
                  [-42.176952127235474, -15.97739105591901]]]),
            {
              "reference": 4,
              "system:index": "86"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.23669028641516, -16.123719126770524],
                  [-42.23291373612219, -16.120256008538526],
                  [-42.242870095985474, -16.12174020947519]]]),
            {
              "reference": 4,
              "system:index": "87"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.31170630814368, -16.200551778894663],
                  [-42.31033301712805, -16.19676031032252],
                  [-42.315482858436646, -16.199068169437908]]]),
            {
              "reference": 4,
              "system:index": "88"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.48937583329016, -16.199233015484253],
                  [-42.488002542274536, -16.204343174573797],
                  [-42.48285270096594, -16.2017056896446]]]),
            {
              "reference": 4,
              "system:index": "89"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.47564292313391, -16.504454741472376],
                  [-42.47512793900305, -16.508075655113796],
                  [-42.47014975907141, -16.50494850641633]]]),
            {
              "reference": 4,
              "system:index": "90"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.200641397255005, -16.543951949992106],
                  [-42.20544791580969, -16.546913914866145],
                  [-42.19823813797766, -16.54839488024394]]]),
            {
              "reference": 4,
              "system:index": "91"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.450065377967896, -16.69495400553138],
                  [-42.45264029862219, -16.697420371690324],
                  [-42.44766211869055, -16.69774921810544]]]),
            {
              "reference": 4,
              "system:index": "92"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.447318795936646, -16.867029671421328],
                  [-42.44525885941321, -16.870972269313324],
                  [-42.441825631874146, -16.86768677678275]]]),
            {
              "reference": 4,
              "system:index": "93"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.19394660355383, -16.860458492149615],
                  [-42.19034171463782, -16.859637078678738],
                  [-42.19171500565344, -16.85717281685385]]]),
            {
              "reference": 4,
              "system:index": "94"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.43015265824133, -16.9512847617315],
                  [-42.426891092079224, -16.955553996565058],
                  [-42.42654776932532, -16.952269978376933]]]),
            {
              "reference": 4,
              "system:index": "95"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.26964927079016, -17.00234501559404],
                  [-42.26947760941321, -16.99840516929196],
                  [-42.27411246659094, -17.0005392629874]]]),
            {
              "reference": 4,
              "system:index": "96"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.29522681595618, -17.181848126727477],
                  [-42.29316687943274, -17.178240081206813],
                  [-42.297801736610474, -17.176272026771635]]]),
            {
              "reference": 4,
              "system:index": "97"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.32303595902258, -17.28710646401733],
                  [-42.31668448807532, -17.289237243165342],
                  [-42.319259408729614, -17.28677864965173]]]),
            {
              "reference": 4,
              "system:index": "98"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.42568946244055, -17.42047833766363],
                  [-42.42465949417883, -17.41458187984344],
                  [-42.42774939896399, -17.41359911836646]]]),
            {
              "reference": 4,
              "system:index": "99"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.218837503212036, -17.435709972310363],
                  [-42.21746421219641, -17.441114440281677],
                  [-42.216090921180786, -17.43783902426309]]]),
            {
              "reference": 4,
              "system:index": "100"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.484569314735474, -17.539022161569],
                  [-42.48319602371985, -17.542950467101896],
                  [-42.47941947342688, -17.540495286120155]]]),
            {
              "reference": 4,
              "system:index": "101"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.50156379105383, -17.592701628900958],
                  [-42.500533822792114, -17.596628769413094],
                  [-42.49847388626868, -17.596301510964075],
                  [-42.49933219315344, -17.593028893870454]]]),
            {
              "reference": 4,
              "system:index": "102"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.33556723954016, -17.555062206452877],
                  [-42.331447366493286, -17.56046312642312],
                  [-42.32990241410071, -17.552770858409346]]]),
            {
              "reference": 4,
              "system:index": "103"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.664369217974475, -17.53123781412518],
                  [-42.66522752485924, -17.536312077259833],
                  [-42.661622635943225, -17.536312077259833],
                  [-42.66196595869713, -17.531565190224786]]]),
            {
              "reference": 4,
              "system:index": "104"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.7565513773983, -17.630569290326992],
                  [-42.75964128218346, -17.62795169842949],
                  [-42.76187288008385, -17.632368862711154]]]),
            {
              "reference": 4,
              "system:index": "105"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.9100166483944, -17.756168917504816],
                  [-42.90349351607018, -17.753716641618922],
                  [-42.90967332564049, -17.748975479619997]]]),
            {
              "reference": 4,
              "system:index": "106"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.674325577837756, -17.696160262234585],
                  [-42.67638551436119, -17.700085147631654],
                  [-42.670377366167834, -17.70041221754188]]]),
            {
              "reference": 4,
              "system:index": "107"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.83500062666588, -17.842957800265516],
                  [-42.83431398115807, -17.837728780989128],
                  [-42.837403885943225, -17.839526273688925]]]),
            {
              "reference": 4,
              "system:index": "108"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.06571351729088, -17.872368170414497],
                  [-43.06348191939049, -17.868447068793337],
                  [-43.0696617289608, -17.86828368768157]]]),
            {
              "reference": 4,
              "system:index": "109"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.94761048994713, -17.87008087165001],
                  [-42.94486390791588, -17.87383856121524],
                  [-42.943490616900256, -17.87008087165001]]]),
            {
              "reference": 4,
              "system:index": "110"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.29179155073815, -18.138309832213437],
                  [-43.293851487261584, -18.134884044643695],
                  [-43.29694139204674, -18.137983569621344]]]),
            {
              "reference": 4,
              "system:index": "111"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.090604416949084, -18.18381749518826],
                  [-43.08648454390221, -18.181208057318017],
                  [-43.090604416949084, -18.179740231363485]]]),
            {
              "reference": 4,
              "system:index": "112"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.3963333293026, -18.2989200094829],
                  [-43.39684831343346, -18.296964230035464],
                  [-43.39873658857994, -18.298594047774735]]]),
            {
              "reference": 4,
              "system:index": "113"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.485597245318225, -18.393422990419264],
                  [-43.48147737227135, -18.394074555513445],
                  [-43.48473893843346, -18.390816705404276]]]),
            {
              "reference": 4,
              "system:index": "114"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.70240556441002, -18.655315398055308],
                  [-43.70189058027916, -18.653526323391635],
                  [-43.70377885542565, -18.653201035062963]]]),
            {
              "reference": 4,
              "system:index": "115"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.34552960126751, -19.255621440662413],
                  [-43.344842955759695, -19.257566125946077],
                  [-43.34278301923626, -19.256917900080254]]]),
            {
              "reference": 4,
              "system:index": "116"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.40229291580276, -15.618026618068045],
                  [-41.41482419632034, -15.611578908738021],
                  [-41.420660683136745, -15.625466030641672]]]),
            {
              "reference": 4,
              "system:index": "117"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.35182447097854, -15.57173087689116],
                  [-41.360235878449245, -15.558501605916584],
                  [-41.36469907425003, -15.561147528173908]]]),
            {
              "reference": 4,
              "system:index": "118"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.41808576248245, -15.648443842950822],
                  [-41.42048902175979, -15.646460248666697],
                  [-41.427183815460964, -15.66017971545238]]]),
            {
              "reference": 4,
              "system:index": "119"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.37826032302932, -15.601824296452996],
                  [-41.37276715896682, -15.595045394447022],
                  [-41.37517041824417, -15.592730596144037],
                  [-41.38255185745315, -15.587935573782902],
                  [-41.38564176223831, -15.589919734546822],
                  [-41.385985084992214, -15.59669880582557]]]),
            {
              "reference": 4,
              "system:index": "120"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.36658734939651, -15.591738531738857],
                  [-41.36418409011917, -15.600336263974718],
                  [-41.34770459793167, -15.593722655755561]]]),
            {
              "reference": 4,
              "system:index": "121"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.347532936554714, -15.557178632029787],
                  [-41.35542935989456, -15.559824571298169],
                  [-41.35062284133987, -15.566273905714947]]]),
            {
              "reference": 4,
              "system:index": "122"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.43834180496292, -15.557509376298812],
                  [-41.444864937287136, -15.546429153990704],
                  [-41.44898481033401, -15.55122514430488]]]),
            {
              "reference": 4,
              "system:index": "123"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.40812940261917, -15.633070484270947],
                  [-41.41482419632034, -15.641005265216949],
                  [-41.41310758255081, -15.65125390192428],
                  [-41.40572614334182, -15.640509350419453]]]),
            {
              "reference": 4,
              "system:index": "124"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.24556607864456, -15.559824571298169],
                  [-41.2534625019844, -15.564620249498711],
                  [-41.24968595169143, -15.570077264554376],
                  [-41.24470777175979, -15.573549835100607],
                  [-41.24831266067581, -15.566439270605347]]]),
            {
              "reference": 4,
              "system:index": "125"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.42186231277542, -15.612901532311922],
                  [-41.428900429230495, -15.604634995023707],
                  [-41.43679685257034, -15.612405549471497]]]),
            {
              "reference": 4,
              "system:index": "126"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.54769010208206, -15.592234564540647],
                  [-41.545286842804714, -15.582313680859365],
                  [-41.547518440705105, -15.577022346989715],
                  [-41.55335492752151, -15.58198297648438]]]),
            {
              "reference": 4,
              "system:index": "127"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.542025276642605, -15.587439530596642],
                  [-41.54116696975784, -15.590911807739607],
                  [-41.53636045120315, -15.594218683763632],
                  [-41.53533048294143, -15.590746462540327]]]),
            {
              "reference": 4,
              "system:index": "128"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.475592323761745, -15.561974371901579],
                  [-41.47250241897659, -15.567100728837396],
                  [-41.46803922317581, -15.56478561571858]]]),
            {
              "reference": 4,
              "system:index": "129"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.52863568924026, -15.578510548411579],
                  [-41.53172559402542, -15.58347114197983],
                  [-41.52640409133987, -15.580494800209918]]]),
            {
              "reference": 4,
              "system:index": "130"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.37414044998245, -15.632905173064163],
                  [-41.3768870320137, -15.640178739886835],
                  [-41.363497444611355, -15.63836037241098]]]),
            {
              "reference": 4,
              "system:index": "131"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.38255185745315, -15.644972540331214],
                  [-41.39010495803909, -15.639682823086519],
                  [-41.39525479934768, -15.645468444311785]]]),
            {
              "reference": 4,
              "system:index": "132"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.548388324344444, -15.168425831147413],
                  [-41.59920009192257, -15.11407553724171],
                  [-41.61293300207882, -15.135287067654689]]]),
            {
              "reference": 4,
              "system:index": "133"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.53053554114132, -15.194933101779887],
                  [-41.54426845129757, -15.168425831147413],
                  [-41.570360980594444, -15.1909572233621]]]),
            {
              "reference": 4,
              "system:index": "134"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.53877528723507, -15.21083586596016],
                  [-41.53602870520382, -15.236012787887068],
                  [-41.507189593875694, -15.221437042130228]]]),
            {
              "reference": 4,
              "system:index": "135"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-40.922167621219444, -15.58023446916172],
                  [-40.92903407629757, -15.6172703635552],
                  [-40.90431483801632, -15.608012016654806]]]),
            {
              "reference": 4,
              "system:index": "136"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.83210408209537, -15.044333651517546],
                  [-41.858196611392245, -15.03107102069426],
                  [-41.888409013735995, -15.060247719320623]]]),
            {
              "reference": 4,
              "system:index": "137"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.07105671881412, -15.566217934673105],
                  [-42.06281697272037, -15.519910527038677],
                  [-42.08478962897037, -15.529172841107554]]]),
            {
              "reference": 4,
              "system:index": "138"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.097149248110995, -15.604579034433588],
                  [-42.083416337954745, -15.629708281048378],
                  [-42.072430009829745, -15.59928827429468]]]),
            {
              "reference": 4,
              "system:index": "139"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.23585164068912, -15.738125397693102],
                  [-42.228985185610995, -15.772489508518362],
                  [-42.209759111392245, -15.760594897489602]]]),
            {
              "reference": 4,
              "system:index": "140"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.41187703131412, -15.320008322110644],
                  [-41.41462361334537, -15.347820791260919],
                  [-41.394024248110995, -15.337226001459301]]]),
            {
              "reference": 4,
              "system:index": "141"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.20591077613802, -16.67067916945407],
                  [-42.229256723403644, -16.70488095108535],
                  [-42.193551156997394, -16.71803385191722]]]),
            {
              "reference": 4,
              "system:index": "142"
            })]),
    campo = /* color: #009999 */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.01732173990232, -16.022787629974818],
                  [-42.00968280862791, -16.029964682213564],
                  [-42.005219612827126, -16.024767532246784]]]),
            {
              "reference": 12,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.03912273477537, -16.016765306469946],
                  [-42.036719475498025, -16.025592485727387],
                  [-42.035946999301736, -16.01915775811435]]]),
            {
              "reference": 12,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.058426695056276, -16.039721068363043],
                  [-42.06185992259534, -16.037081392258017],
                  [-42.063233213610964, -16.041948267881786]]]),
            {
              "reference": 12,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.96094015121483, -16.048103896003678],
                  [-41.958536891937484, -16.05420775620834],
                  [-41.949267177582016, -16.049753606399477]]]),
            {
              "reference": 12,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.87729969786107, -16.01661232789624],
                  [-41.870433242782944, -16.027914355790415],
                  [-41.868888290390366, -16.019994753734768]]]),
            {
              "reference": 12,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.858416946396225, -16.002587023945694],
                  [-41.849404724106186, -16.004897141765028],
                  [-41.853181274399155, -15.999369315325124]]]),
            {
              "reference": 12,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.840478332504624, -16.022387166662458],
                  [-41.84099331663548, -16.03500873227357],
                  [-41.83859005735814, -16.037153494073568],
                  [-41.83876171873509, -16.02692442272748]]]),
            {
              "reference": 12,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.88232833286399, -16.07232359200194],
                  [-41.8826716556179, -16.077931868952174],
                  [-41.87365943332786, -16.077272079874767],
                  [-41.87983924289817, -16.072983397500398]]]),
            {
              "reference": 12,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.96174182515102, -16.08997263487942],
                  [-41.96157016377407, -16.083292574022],
                  [-41.96414508442837, -16.089312885778735]]]),
            {
              "reference": 12,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.12126817193494, -16.245909492907035],
                  [-42.115260023741584, -16.262224699747406],
                  [-42.11491670098768, -16.243684587049067]]]),
            {
              "reference": 12,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.16306111796209, -16.271555777922732],
                  [-42.162374472454275, -16.281689818142965],
                  [-42.15842626078435, -16.271390992457285]]]),
            {
              "reference": 12,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.13096044047185, -16.278147083095178],
                  [-42.124694800213064, -16.28762169635946],
                  [-42.12409398539373, -16.279300538738852]]]),
            {
              "reference": 12,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.07385163676865, -16.24136829206232],
                  [-42.068787626148534, -16.234116486946814],
                  [-42.07337956798203, -16.233869261606376]]]),
            {
              "reference": 12,
              "system:index": "12"
            })]),
    agro = /* color: #00ffff */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.127216881333716, -16.962224216402056],
                  [-41.1250711141218, -16.96247050670911],
                  [-41.12412697654856, -16.961485343543476],
                  [-41.12678772789133, -16.96066437029218]]]),
            {
              "reference": 21,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.135971611558325, -16.970433719263415],
                  [-41.13665825706614, -16.967149961183814],
                  [-41.139233177720435, -16.966493202676993],
                  [-41.13957650047434, -16.967560434084213],
                  [-41.13760239463938, -16.96821718885859]]]),
            {
              "reference": 21,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.11304460932632, -16.99168815401879],
                  [-41.11244379450699, -16.991113565592247],
                  [-41.11192881037613, -16.989143534763077],
                  [-41.11407457758804, -16.990292721928622]]]),
            {
              "reference": 21,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.29945701708301, -17.06678685780563],
                  [-41.30211776842578, -17.06883812124378],
                  [-41.297053757805664, -17.06900222134478]]]),
            {
              "reference": 21,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.250361863274414, -17.074417443711376],
                  [-41.254310074944335, -17.072284193057538],
                  [-41.25568336595996, -17.073679013553335]]]),
            {
              "reference": 21,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.23422569384082, -17.073925157264135],
                  [-41.237830582756835, -17.074171300650146],
                  [-41.23551315416797, -17.076468623257117]]]),
            {
              "reference": 21,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.204099122185546, -17.091810730685594],
                  [-41.203669968743164, -17.09377967977569],
                  [-41.20418495287402, -17.095174339458776],
                  [-41.20306915392383, -17.096897139946886],
                  [-41.203154984612304, -17.092220930128466]]]),
            {
              "reference": 21,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.167191926140625, -17.098948072134235],
                  [-41.16976684679492, -17.09681510218969],
                  [-41.169938508171875, -17.09952232909985]]]),
            {
              "reference": 21,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.51935524095996, -17.130651561307747],
                  [-41.51540702929004, -17.131963922424525],
                  [-41.51429123033984, -17.129257167469273]]]),
            {
              "reference": 21,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.51386207689746, -17.11826569702397],
                  [-41.516007844109375, -17.117937583444032],
                  [-41.515492859978515, -17.119988283823968]]]),
            {
              "reference": 21,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.50363186949524, -17.24078012259092],
                  [-41.50612095946106, -17.23840285798077],
                  [-41.50629262083801, -17.241517888142912]]]),
            {
              "reference": 21,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.55701855772766, -17.265206791827364],
                  [-41.55925015562805, -17.264960901879846],
                  [-41.560108462512815, -17.266846049762428],
                  [-41.557361880481565, -17.267419786595756]]]),
            {
              "reference": 21,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.595814028919065, -17.274529958730678],
                  [-41.59512738341125, -17.272399009419523],
                  [-41.597788134754026, -17.272808809277944]]]),
            {
              "reference": 21,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.7238734161261, -17.283463285644036],
                  [-41.71820859068664, -17.283053509487868],
                  [-41.72361592406067, -17.281332439674657]]]),
            {
              "reference": 21,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.04796879326171, -17.563270935218842],
                  [-42.044363904345694, -17.563761912340215],
                  [-42.0461663488037, -17.560816029637767]]]),
            {
              "reference": 21,
              "system:index": "14"
            })]),
    flo = 
    /* color: #bf04c2 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.30520767321094, -17.139305819038785],
                  [-41.304263535637695, -17.143406725762425],
                  [-41.30113071082795, -17.14258655023433],
                  [-41.30263275255664, -17.14127426556431],
                  [-41.30280441393359, -17.139715913784908],
                  [-41.301259461541015, -17.137993509768304],
                  [-41.30246109117969, -17.13717331176744],
                  [-41.304006043572265, -17.138895723387463]]]),
            {
              "reference": 3,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.91330044304198, -17.58503630799638],
                  [-41.912270474780264, -17.58405446789332],
                  [-41.91295712028808, -17.582990801764534],
                  [-41.913472104418936, -17.584463568584287],
                  [-41.91467373405761, -17.58266351861983],
                  [-41.91596119438476, -17.582827160266223],
                  [-41.914759564746085, -17.584709028554506]]]),
            {
              "reference": 3,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.1216115239746, -17.55574245262397],
                  [-42.11792080437011, -17.556560781112044],
                  [-42.12109653984374, -17.55402395076328]]]),
            {
              "reference": 3,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.22758821280886, -17.660969984014177],
                  [-42.22355417045046, -17.661624265609323],
                  [-42.22578576835085, -17.659375162660098]]]),
            {
              "reference": 3,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.63403699335299, -15.302638852827469],
                  [-41.63506696161471, -15.29800269680086],
                  [-41.64330670770846, -15.304129024038842]]]),
            {
              "reference": 3,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.661674475042446, -15.312076424692664],
                  [-41.659442877142055, -15.30280442793022],
                  [-41.66287610468112, -15.30280442793022]]]),
            {
              "reference": 3,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.57721707758151, -15.285915093289557],
                  [-41.57670209345065, -15.278463483564023],
                  [-41.58047864374362, -15.281775342799483]]]),
            {
              "reference": 3,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.23281677279723, -16.416066115434962],
                  [-41.23247345004332, -16.411949482847774],
                  [-41.24019821200621, -16.41013813690859]]]),
            {
              "reference": 3,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.64314540442257, -15.06634184259559],
                  [-41.67885097082882, -15.062363550963504],
                  [-41.677477679813194, -15.072972163402333]]]),
            {
              "reference": 3,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.63435017584537, -15.094724118159965],
                  [-41.635723466860995, -15.07483457008749],
                  [-41.658251605594444, -15.099491379507828]]]),
            {
              "reference": 3,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.962838266372394, -16.87448359193452],
                  [-41.95871839332552, -16.899451002874926],
                  [-41.940865610122394, -16.894194980345205]]]),
            {
              "reference": 3,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.93125257301302, -16.908648689804284],
                  [-41.916146371841144, -16.938866499946567],
                  [-41.899666879653644, -16.92441510880438]]]),
            {
              "reference": 3,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.02188978004427, -17.02423839643791],
                  [-42.036995981216144, -17.06231484708622],
                  [-42.017769906997394, -17.067566162295055]]]),
            {
              "reference": 3,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.144112680434894, -17.15812805661594],
                  [-42.124886606216144, -17.181745642019255],
                  [-42.12351331520052, -17.17256138291866]]]),
            {
              "reference": 3,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.23337659645052, -16.55355761682466],
                  [-42.229256723403644, -16.57330220562135],
                  [-42.21964368629427, -16.55619034557262]]]),
            {
              "reference": 3,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.039742563247394, -16.523278653056042],
                  [-42.04660901832552, -16.54039343382439],
                  [-42.031502817153644, -16.5324944927983]]]),
            {
              "reference": 3,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.26908216285677, -16.578567087431868],
                  [-42.284188364028644, -16.596993039326964],
                  [-42.26908216285677, -16.607521361904432]]]),
            {
              "reference": 3,
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.603036020278644, -16.639102866460135],
                  [-41.605782602309894, -16.660154313613244],
                  [-41.594796274184894, -16.652260292009817]]]),
            {
              "reference": 3,
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.78293714332552, -16.76800659936439],
                  [-41.767830942153644, -16.785099526920366],
                  [-41.77195081520052, -16.77063638057686]]]),
            {
              "reference": 3,
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.460213754653644, -16.45085319894237],
                  [-41.45609388160677, -16.470608281928445],
                  [-41.43412122535677, -16.456121417837927]]]),
            {
              "reference": 3,
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.616768930434894, -16.461389493654696],
                  [-41.619515512466144, -16.449536121867194],
                  [-41.641488168716144, -16.461389493654696]]]),
            {
              "reference": 3,
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.03287610816927, -17.034743019569863],
                  [-42.009530160903644, -17.020299010704647],
                  [-42.03012952613802, -17.009793576766768]]]),
            {
              "reference": 3,
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.863961313247394, -16.913904309410565],
                  [-41.87632093238802, -16.937552782972748],
                  [-41.85434827613802, -16.9454349471937]]]),
            {
              "reference": 3,
              "system:index": "22"
            })]),
    reflo = /* color: #ff19be */ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.86592852142951, -15.310067426601488],
                  [-41.85597216156623, -15.288873484565405],
                  [-41.8655851986756, -15.288542312208046]]]),
            {
              "reference": 9,
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.9890097287049, -15.276122971173658],
                  [-41.98746477631232, -15.295662402562437],
                  [-41.9780234005799, -15.293178677590381]]]),
            {
              "reference": 9,
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.81854998139045, -15.203082390916883],
                  [-41.82575975922248, -15.216831194494223],
                  [-41.81889330414435, -15.218487616297166]]]),
            {
              "reference": 9,
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.91433702973029, -15.227846154715156],
                  [-41.91244875458381, -15.229833755328883],
                  [-41.90987383392951, -15.229005590687658]]]),
            {
              "reference": 9,
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.875541558538885, -15.289453034931679],
                  [-41.872794976507635, -15.281339183996913],
                  [-41.87691484955451, -15.28183595940448]]]),
            {
              "reference": 9,
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.761901726995916, -15.200763227221268],
                  [-41.762931695257635, -15.203910657483258],
                  [-41.75812517670295, -15.20540152910264]]]),
            {
              "reference": 9,
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.96532045868537, -15.257575386522882],
                  [-41.965663781439275, -15.262046829152823],
                  [-41.957424035345525, -15.259397096864047]]]),
            {
              "reference": 9,
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.67195116547248, -15.300464187343962],
                  [-41.67263781098029, -15.297980519303506],
                  [-41.68122087982795, -15.301292070145719]]]),
            {
              "reference": 9,
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.15053533485196, -15.737882033976643],
                  [-42.14950536659024, -15.729124854579354],
                  [-42.15396856239102, -15.731438108423658]]]),
            {
              "reference": 9,
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.16255163123868, -15.743664870211335],
                  [-42.15723012855313, -15.735238396912653],
                  [-42.1639249222543, -15.740856084586865]]]),
            {
              "reference": 9,
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.139377345350006, -15.725654924494558],
                  [-42.14469884803555, -15.731768571111118],
                  [-42.140407313611725, -15.733255646560494]]]),
            {
              "reference": 9,
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-42.08921735299691, -16.82085586185978],
                  [-42.08818738473519, -16.828414279866305],
                  [-42.086127448211755, -16.826771171166346]]]),
            {
              "reference": 9,
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.98587720407113, -16.78010093940054],
                  [-41.98089902413949, -16.786510559469278],
                  [-41.98038404000863, -16.782894902941376]]]),
            {
              "reference": 9,
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.99205701364144, -16.77697822564898],
                  [-41.99343030465707, -16.77401981792185],
                  [-41.994975257049646, -16.774184175114705]]]),
            {
              "reference": 9,
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.94811170114144, -16.753474050080072],
                  [-41.93987195504769, -16.76596614140819],
                  [-41.93901364816293, -16.761692623523636]]]),
            {
              "reference": 9,
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-41.94622342599496, -16.76136388740184],
                  [-41.94999997628793, -16.753638425027443],
                  [-41.951544928680505, -16.75478904568408]]]),
            {
              "reference": 9,
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-43.002713791949084, -17.83037521281719],
                  [-42.997220627886584, -17.82808737413196],
                  [-43.002713791949084, -17.819262578301778],
                  [-43.00855027876549, -17.8223676488868]]]),
            {
              "reference": 9,
              "system:index": "16"
            })]);

// Define the region ID (reg_23)
var regiaoID = 'reg_23'; // old 11

// Define whether to collect data (false)
var coleta = false;   // true or false

// Set the map center and zoom level
//Map.setCenter (-41.4042, -15.6172, 9)

// Define the years to process
var anos = [2016,2017,2018,2019,2020,2021,2022,2023];

// If collecting data, only process 2023
if (coleta) {var anos = [2023]};

// Define the number of trees for the Random Forest classifier
var RFtrees = 100;

// If collecting data, use 200 trees
if (coleta) {var RFtrees = 200};

// Define the output version number
var versao_out = 3;

// Define the Sentinel-2 version
var versao_pt = 'S2_v1';

// Define the stable version
var versao_estavel = '3';

// Define the input directory for point data
var dir_pt_in = 'projects/mapbiomas-workspace/AMOSTRAS/col9/MATA_ATLANTICA/teste/';

// Load the 250,000 biomes feature collection
var bioma250mil = ee.FeatureCollection('projects/mapbiomas-workspace/AUXILIAR/biomas_IBGE_250mil');

// Filter the collection to only include the Atlantic Forest biome
var bioma250mil_MA_vetor = bioma250mil.filterMetadata('Bioma','equals', 'Mata Atlntica');

// Load the biomes raster
var biomes = ee.Image('projects/mapbiomas-workspace/AUXILIAR/biomas-raster-41');

// Mask the biomes raster to only include the Atlantic Forest biome
var bioma250mil_MA = biomes.mask(biomes.eq(2));

// Add the Atlantic Forest biome layer to the map
//Map.addLayer(bioma250mil_MA,{},'layer bioma',false)

// Import the palettes module
var palettes = require('users/mapbiomas/modules:Palettes.js');

// Define the visualization parameters for the classification
var vis = {
    'min': 0,
    'max': 62,
    'palette': palettes.get('classification7')
};

// Load the Atlantic Forest regions feature collection
var regioesCollection = ee.FeatureCollection('projects/mapbiomas-workspace/AUXILIAR/Mata_Atlantica_col6_PLANET');

// Define the visualization parameters for the median composite
var visParMedian2 = {bands: ['swir1_median', 'nir_median', 'red_median'],gain: [0.08, 0.06, 0.2],gamma: 0.85}

// Define the biome name
var bioma = "MATAATLANTICA";

// Define the output directory
var dirout = 'projects/mapbiomas-workspace/COLECAO7/classificacao-ma/';

// Load the Sentinel-2 clusters image
var S2_cluster = ee.Image('projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/mosaicos_MA_S2_clusters_2106_2023')

// Filter the regions collection to only include the specified region ID
var limite = regioesCollection.filterMetadata('reg_id', "equals", regiaoID);
//var limite = reg_04_rev

// Load the stable map from collection 6
var mapa_estavel_col6 = ee.Image('projects/mapbiomas-workspace/AMOSTRAS/col7/MATA_ATLANTICA/MA_amostras_estaveis85a20_col6_v1')

// Add the stable map layer to the map
Map.addLayer(mapa_estavel_col6, vis, 'mapa_estavel_col6', false);

// Create a blank image
var blank = ee.Image(0).mask(0);
// Outline the region boundary
var outline = blank.paint(limite, 'AA0000', 2); 
// Define the visualization parameters for the outline
var visPar = {'palette':'000000','opacity': 0.6};
// Add the outline layer to the map
//Map.addLayer(outline, visPar, regiaoID, false);

// Define a function to shuffle a feature collection
var shuffle = function (collection, seed) {
    // Add a random column to the collection
    collection = collection.randomColumn('random', seed || 1)
        // Sort the collection by the random column
        .sort('random', true)
        // Map over the collection and set a new ID based on the random value
        .map(function (feature) {
                var rescaled = ee.Number(feature.get('random')).multiply(1000000000).round();
                return feature.set('new_id', rescaled)});
    // Get a list of the new IDs
    var randomIdList = ee.List(collection.reduceColumns(ee.Reducer.toList(), ['new_id']).get('list'));
    // Create a sequential list of IDs
    var sequentialIdList = ee.List.sequence(1, collection.size());
    // Remap the collection using the new and sequential IDs
    var shuffled = collection.remap(randomIdList, sequentialIdList, 'new_id');
    // Return the shuffled collection
    return shuffled;
};

// Define the visualization parameters for the hand-labeled data
var vis_hand = {
    'min': 0,
    'max': 60,
    'palette': 'blue,white,green,orange,red,brown'
};

// Loop through each year
for (var i_ano=0;i_ano<anos.length; i_ano++){
  // Get the current year
  var ano = anos[i_ano];

  // Define the asset path for the Sentinel-2 mosaics
  var asset = 'projects/mapbiomas-mosaics/assets/SENTINEL/BRAZIL/mosaics-3';
  // Define the band names to use for classification
  var bandNames = ee.List([
  //  THE 60 MOST IMPORTANT BANDS FOR THIS REGION
  'latitude','green_median_texture_'+ano,'ndvi_median_wet_'+ano,'longitude','spri_median_wet','shape_median','cvi_median_wet','red_edge_1_median','evi_median_dry','nddi_median_wet','ndwi_median_'+ano,'green_median_texture','blue_median','spri_median','gli_median','red_edge_2_median_dry','awei_median_wet','swir2_median_wet','mbi_median','gli_median_wet','red_edge_3_median_wet','brightness_median_dry','swir1_median','dswi5_median','afvi_median_wet','brba_median_wet','gvmi_median_wet_1','swir1_stdDev','brightness_median','nir_median','awei_median_dry','osavi_median_dry','ui_median_wet','swir1_median_wet','green_median_wet','spri_median_1','swir2_median','rvi_median_wet','gli_median_dry','gcvi_median_dry','swir1_median_dry','iia_median','awei_median','ri_median','red_edge_2_median','rvi_median','bsi_median','dswi5_median_wet','red_edge_3_median','ndwi_median_wet','ndvi_median_dry_'+ano,'green_median','red_edge_3_median_dry','wetness_median_dry','osavi_median','bsi_median_2','red_edge_4_median','mbi_median_dry','gvmi_median_wet','ratio_median_dry',

  // ALL 143 BANDS TO FEATURE IMPORTANCE
  //    'blue_median','afvi_median','afvi_median_dry','afvi_median_wet','avi_median','avi_median_dry','avi_median_wet','awei_median','awei_median_dry','awei_median_wet','blue_median_dry','blue_median_wet','blue_stdDev','brba_median','brba_median_dry','brba_median_wet','brightness_median','brightness_median_dry','brightness_median_wet','bsi_median','bsi_median_1','bsi_median_2','clusters_2023','co2flux_median','cvi_median','cvi_median_dry','cvi_median_wet','dswi5_median','dswi5_median_dry','dswi5_median_wet','evi_median','evi_median_dry','evi_median_wet','gcvi_median','gcvi_median_dry','gcvi_median_wet','gemi_median','gemi_median_dry','gemi_median_wet','gli_median','gli_median_dry','gli_median_wet','green_median','green_median_dry','green_median_texture','green_median_texture_2023','green_median_wet','green_min','green_stdDev','gvmi_median','gvmi_median_1','gvmi_median_dry','gvmi_median_dry_1','gvmi_median_wet','gvmi_median_wet_1','iia_median','iia_median_dry','iia_median_wet','lai_median','latitude','longitude','lswi_median','lswi_median_dry','lswi_median_wet','mbi_median','mbi_median_dry','mbi_median_wet','msi_median','msi_median_dry','msi_median_wet','nddi_median','nddi_median_dry','nddi_median_wet','ndvi_median','ndvi_median_dry','ndvi_median_dry_2023','ndvi_median_wet','ndvi_median_wet_2023','ndwi_median','ndwi_median_2023','ndwi_median_dry','ndwi_median_wet','nir_median','nir_median_contrast','nir_median_dry','nir_median_dry_contrast','nir_median_wet','nir_stdDev','osavi_median','osavi_median_dry','osavi_median_wet','ratio_median','ratio_median_dry','ratio_median_wet','red_edge_1_median','red_edge_1_median_dry','red_edge_1_median_wet','red_edge_1_stdDev','red_edge_2_median','red_edge_2_median_dry','red_edge_2_median_wet','red_edge_2_stdDev','red_edge_3_median','red_edge_3_median_dry','red_edge_3_median_wet','red_edge_3_stdDev','red_edge_4_median','red_edge_4_median_dry','red_edge_4_median_wet','red_edge_4_stdDev','red_median','red_median_contrast','red_median_dry','red_median_dry_contrast','red_median_wet','red_min','red_stdDev','ri_median','ri_median_dry','ri_median_wet','rvi_median','rvi_median_1','rvi_median_wet','shape_median','shape_median_dry','shape_median_wet','spri_median','spri_median_1','spri_median_wet','swir1_median','swir1_median_dry','swir1_median_wet','swir1_stdDev','swir2_median','swir2_median_dry','swir2_median_wet','swir2_stdDev','ui_median','ui_median_dry','ui_median_wet','wetness_median','wetness_median_dry','wetness_median_wet',
  ])

  // Load the Sentinel-2 mosaics for the current year
  var collection = ee.ImageCollection(asset)
        // Filter the collection by version and year
        .filter(ee.Filter.eq('version', '3'))
        .filter(ee.Filter.eq('year', ano))
        // Filter the collection by biome
        .filter(ee.Filter.inList('biome', [
            'MATAATLANTICA',
        ])); 

  // Create a mosaic of the Sentinel-2 images
  var mosaicoTotal = collection.mosaic()

  // Import the function to add indices for the Caatinga biome
  var addIndexCaatinga = require('users/marcosrosaUSP/MapBiomas_col9_MataAtlan:Mata_Atlantica_SENTINEL2/processa_Bandas_Sentinel2_CAATINGA');

  // Add the Caatinga indices to the mosaic
  mosaicoTotal = addIndexCaatinga.get(mosaicoTotal);

  // Add the Sentinel-2 clusters bands to the mosaic
  mosaicoTotal = mosaicoTotal.addBands(S2_cluster.select([
    'clusters_'+ano, 'ndvi_median_dry_'+ano,'ndvi_median_wet_'+ano,'ndwi_median_'+ano, 'green_median_texture_'+ano
    ]))
    
  // Add the mosaic layer to the map
  Map.addLayer(mosaicoTotal, {'bands': ['swir1_median', 'nir_median', 'red_median'],
    'gain': [0.08, 0.07, 0.2],'gamma': 0.85}, 'Sentinel 2 '+ano, false);

  // Print the mosaic
  //print(mosaicoTotal)

  // Load the training data for the current year
  //var BDamostras = ee.FeatureCollection('projects/mapbiomas-workspace/AMOSTRAS/col9/MATA_ATLANTICA/teste/REGIONs_'+regiaoID+'_'+ano)
  var BDamostras = ee.FeatureCollection('projects/mapbiomas-workspace/AMOSTRAS/S2_2024/MATA_ATLANTICA/pontos_train_v1_'+ano)
                    // Filter the training data by region ID
                    .filterMetadata('reg_id', 'equals', regiaoID)
                    
  // Filter the training data by reference class
  var BDflo = BDamostras.filterMetadata("reference", "equals", 3)
  var BDsav = BDamostras.filterMetadata("reference", "equals", 4)//.limit(100)
  var BDreflo = BDamostras.filterMetadata("reference", "equals", 9)
  var BDvarzea = BDamostras.filterMetadata("reference", "equals", 11)
  var BDcampo = BDamostras.filterMetadata("reference", "equals", 12)
  var BDOutroNFlo = BDamostras.filterMetadata("reference", "equals", 13)
  var BDagro = BDamostras.filterMetadata("reference", "equals", 21)
  // Shuffle the agriculture training data and limit to 2500 samples
  // BDagro = shuffle(BDagro, 2).limit(2500)
  var BDNaoVeg = BDamostras.filterMetadata("reference", "equals", 22)
  var BDAflora = BDamostras.filterMetadata("reference", "equals", 29)
  var BDagua = BDamostras.filterMetadata("reference", "equals", 33)

  // Complementary samples
  // Merge the training data for different classes
  var amostraTotal = savana.merge(campo).merge(aflora).merge(flo).merge(agro).merge(savana).merge(reflo)//.merge(agua)
  
  // Reduce the training data to an image
  var amostraTotalimg = amostraTotal.reduceToImage({properties: ['reference'],reducer: ee.Reducer.first()})

  // Rename the band
  amostraTotalimg = amostraTotalimg.select([0],['reference'])

  // Sample the mosaic for the forest class
  var training_flo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 500, 'region': flo.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the non-forest class
  // var training_nflo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 300, 'region': nao_flo.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the savanna class
  var training_sav = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 2000, 'region': savana.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the afforestation class
  var training_afl = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 1000, 'region': aflora.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the varzea class
  // var training_var = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 1000, 'region': savana.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the water class
  // var training_agu = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 100, 'region': agua.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the pasture class
  var training_cam = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 1000, 'region': campo.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the restinga class
  // var training_nflo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 500, 'region': restinga.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the agriculture class
  var training_agr = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 500, 'region': agro.filterBounds(limite), 'scale': 10, 'seed': 1});
  // Sample the mosaic for the reforestation class
  var training_reflo = mosaicoTotal.select(bandNames).addBands(amostraTotalimg).sample({'numPixels': 300, 'region': reflo.filterBounds(limite), 'scale': 10, 'seed': 1});

  // If collecting data, print the size of each training dataset
  if (coleta) {
// print('BDflo',BDflo.size())
// print('BDsav',BDsav.size())
// print('BDvar',BDvarzea.size())
// print('BDcam',BDcampo.size())
// print('BDOut',BDOutroNFlo.size())
// print('BDAfl',BDAflora.size())
// print('BDagr',BDagro.size())
// print('BDNao',BDNaoVeg.size())
// print('BDagu',BDagua.size())
  print('training_flo',training_flo.size())
// print('training_var',training_var.size())
 //print('training_nflo',training_nflo.size())
//print('training_cam',training_cam.size())
  print('training_sav',training_sav.size())
  print('training_afl',training_afl.size())
//print('training_cam',training_cam.size())
  print('training_agr',training_agr.size())
  print('training_reflo',training_reflo.size())
  }

  // Merge all the training data
  var training = BDflo.merge(BDreflo).merge(BDcampo)//.merge(BDsav).merge(BDOutroNFlo).merge(BDAflora)
                      .merge(BDagro).merge(BDNaoVeg).merge(BDagua)
                      // Add the complementary training data
                      .merge(training_cam)
                      .merge(training_sav)
                      .merge(training_afl).merge(training_agr).merge(training_flo)
                      .merge(training_reflo)
                      // //.merge(training_agu).merge(training_agr)

  // Train the Random Forest classifier
  var classifierRF = ee.Classifier.smileRandomForest({numberOfTrees: RFtrees, variablesPerSplit:1}).train(training, 'reference', bandNames);

  // If collecting data, print the classifier explanation
  if (coleta) {print(classifierRF.explain())}

  // Train the Gradient Tree Boost classifier
  var classifierGTB = ee.Classifier.smileGradientTreeBoost({numberOfTrees: 30, shrinkage: 0.1, samplingRate: 0.8, loss: 'LeastSquares'}).train(training, 'reference', bandNames);

  // Print the classifier explanation
  // print(classifier.explain())

  // Classify the mosaic using the Random Forest classifier
  var classifiedRF = mosaicoTotal.classify(classifierRF).mask(mosaicoTotal.select('blue_median'));

  // Classify the mosaic using the Gradient Tree Boost classifier
  var classifiedGTB = mosaicoTotal.classify(classifierGTB).mask(mosaicoTotal.select('blue_median'));

  // Rename the classification band and clip the image to the region boundary
  classifiedRF = classifiedRF.select(['classification'],['classification_'+ano]).clip(limite.geometry()).toInt8()
  // classifiedGTB = classifiedGTB.select(['classification'],['classification_'+ano]).clip(limite.geometry()).toInt8()

  // If collecting data, add the classification layers to the map
  if (coleta) {  
    Map.addLayer(classifiedRF, vis, 'RF'+ano+"_"+regiaoID, false);
//    Map.addLayer(classifiedGTB, vis, 'GTB'+ano+"_"+regiaoID, false);
  }

  // If it's the first year, store the classification results
  if (i_ano == 0){ var classified16a23RF = classifiedRF;}//  var classified16a23GTB = classifiedGTB}  
  // Otherwise, add the classification results to the existing image
  else {classified16a23RF = classified16a23RF.addBands(classifiedRF);}// classified16a23GTB = classified16a23GTB.addBands(classifiedGTB)}
}

// Add the region outline layer to the map
Map.addLayer(outline, visPar, regiaoID, false);

// Add the Atlantic Forest biome layer to the map
//Map.addLayer(bioma250mil_MA,({'palette':'000000','opacity': 0.3}),'layer bioma',false)

// Add the biomes outline layer to the map
var blank = ee.Image(0).mask(0);
var outline = blank.paint(bioma250mil, 'AA0000', 1.5); 
var visPar = {'palette':'000000','opacity': 0.6};
Map.addLayer(outline, visPar, 'bioma250mil', false);

// If collecting data, do nothing
if (coleta) {}
// Otherwise, export the classification results to an asset
   else 
   {
     // Set the metadata for the classification image
     classified16a23RF = classified16a23RF
     .set('territory', 'BRAZIL')
     .set('biome', 'MATA ATNTICA')
     .set('source', 'arcplan')
     .set('version', '1')
     .set('collection_id',versao_out)

//     classified16a23GTB = classified16a23GTB
//     .set('territory', 'BRAZIL')
//     .set('biome', 'MATA ATNTICA')
//     .set('source', 'arcplan')
//     .set('version', '1')
//     .set('collection_id',versao_out)
     
    // Export the Random Forest classification image to an asset
    Export.image.toAsset({
       "image": classified16a23RF.toInt8(),
       "description": regiaoID+'-'+'RF_SENTINEL2_v'+versao_out,
       "assetId": dirout + regiaoID+'-'+'RF_SENTINEL2_v'+versao_out,
       "scale": 10,
       "pyramidingPolicy": {
           '.default': 'mode'
       },
       "maxPixels": 1e13,
       "region": limite
     });    
     
//    // Export the Gradient Tree Boost classification image to an asset
//    Export.image.toAsset({
//       "image": classified16a23GTB.toInt8(),
//       "description": regiaoID+'-'+'GTB_SENTINEL2_v'+versao_out,
//       "assetId": dirout + regiaoID+'-'+'GTB_SENTINEL2_v'+versao_out,
//       "scale": 10,
//       "pyramidingPolicy": {
//           '.default': 'mode'
//       },
//       "maxPixels": 1e13,
//       "region": limite
//     });    
}
